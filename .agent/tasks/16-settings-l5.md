# Subagent 16 - 系统设置 (Settings) 模块 L5 升级任务

## 任务背景
当前你被指派为 **Subagent 16**，负责优化 `src/features/settings` 模块。
在全站成熟度评估中，该模块得分为 **7.3 (L4)**。这是全系统代码量最大的单体之一（约 11.3k 行），覆盖分支规则、审批流、配置管理等核心骨架逻辑。此模块目前**亟待攻克的瓶颈是测试覆盖率（D3 得分仅为 6）**，其比率偏低（19.1%），导致无法评为 L5。

## 目标成熟度核心要求 (L5)
根据 L5 指标要求（所有维度≥9），你需要将此模块打磨到极致，重点发力**全量业务逻辑和边缘规则测试覆盖**。此外由于这是核心管理界面，需在可运维性和代码稳健性上继续保持最高水准。

## 具体执行要求

### 1. 核心重点：大幅提升 D3 (测试覆盖) 得分至 9 分
由于该模块体积庞大且涵盖底层规则引擎：
- **单元测试补充**：为 `src/features/settings` 下各子模块（如 `split-rules`, `workflow`）的所有纯逻辑函数（Helper/Utility/CalcRules）编写覆盖各场景、各边界情况的单测。
- **集成测试补充**：梳理主要的 Actions 操作流（如配置更新、审批流分支添加等），基于现有的测试套件进一步拔升断言数量。测试密度比例目标从 19% 拉升至 40% 以上。
- **验证要求**：确保 `vitest run src/features/settings` 执行全绿。

### 2. D2 (代码质量) 巩固与清理
- **排查残留 Any**：该模块评估时显示仅有 `1` 处残留的 `any`，需通过全局搜索把它找出来并采用合适的强类型或 `Record<string, unknown>` 替换掉。实现 100% 静态安全。
- **重构超大文件**（可选）：若包含几百上千行的函数或模块，可进行适当方法提取，但必须不改变原有业务对外逻辑。

### 3. D4 (文档) 与 D7 (可运维性) 补全
- 检查代码库中的核心算法/配置分发表，补齐 JSDoc。重点描述状态流转及系统环境变量影响机制。
- 复核那些目前没有加上 `logger.info` 或 `logger.error` 的底层方法，将重要系统设定的变动纳入监控日志记录。

## 约束条件
- **开发语言**：所有的交付物、注释、控制台输出以及测试用例说明(`it('should...')` 可换为 `it('应该...')`) 必须使用 **简体中文**。
- **零回归原则**：增补测试只能在现有测试套件基础上增加，决不允许跳过或注释掉那些报错的旧测试。

## 交付与验证
完成后，使用相关 `scripts` 或 `vitest` 命令全排该区域的测试覆盖率。将本次补充的测试和文件变更总结，并反馈任务完成。
