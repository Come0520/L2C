# Subagent 17 - 审批 (Approval) 模块 L5 升级任务

## 任务背景
当前你被指派为 **Subagent 17**，负责优化 `src/features/approval` 模块。
在全站成熟度评估中，该模块得分为 **6.8 (L4)**。虽然核心流程完备且 0 any 评分优秀，但在测试覆盖（D3：6分）、UI/UX（D5：6分）及可运维性（D7：6分）上有所欠缺，无法达到 L5 的满级标准。

## 目标成熟度核心要求 (L5)
根据 L5 指标要求（所有维度≥9），你需要重点加强该模块的测试健壮性与可维护性：
1. **测试密度大幅提升**。
2. **规范化控制台审核记录**，确保所有操作有迹可循。

## 具体执行要求

### 1. D3 (测试覆盖) 扩充
- 目前仅有 21 个用例！需要大幅拓展单元测试和集成测试覆盖场景，模拟多种审批阶段（流转中、驳回、完成操作）。
- 添加对 `services` 和 `utils` 中涉及权限判断与状态机机制的深入断言测试。
- 保证扩容后 `vitest run src/features/approval` 通过。

### 2. D7 (可运维性) 与 D4 (文档) 加固
- 该模块缺少详尽的 `try-catch` 包裹与日志报告机制。在底层操作（例如操作插入、审批模板获取失败）上，加入 `logger.error` 回溯记录，重要审批通过/驳回增加 `logger.info`或审计级日志。
- 对外暴露并缺乏 JSDoc 的 Hooks 及组件，使用标准 JSDoc (`/** ... */`) 快速补齐文档说明。

### 3. UI/UX D5 提升点评估
- 虽然无须大幅重写 UI，但如果在现有的审批流模板组件（如 `approval-timeline`, `approval-status` 等）中发现不健壮的条件渲染或过时的样式类，进行微调使其更健壮。

## 约束条件
- **开发语言**：所有的交付物、注释、控制台输出以及测试用例说明(`it('should...')` 可换为 `it('应该...')`) 必须使用 **简体中文**。
- **零回归原则**：只能在现有基础上增加与增强测试，不得随意删除有用的功能逻辑或故意忽略已有报错。

## 交付与验证
完成后总结本次工作的覆盖率提升程度和重点日志埋点情况，并通知完成。
