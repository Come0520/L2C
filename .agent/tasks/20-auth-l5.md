# Subagent 20 - 认证 (Auth) 模块 L5 升级任务

## 任务背景
当前你被指派为 **Subagent 20**，负责优化 `src/features/auth` 模块（及其核心认证逻辑所在的 `shared/services`，如鉴权中间件、拦截器等）。
在全站成熟度评估中，该模块得分为 **5.6 (L3)**。这是被评估系统强制降级的典型模块，**导致它停留在 L3 的根本原因是 D4（文档完整性：3分）和 D7（可运维性：3分）极不达标**。

## 目标成熟度核心要求 (L5)
根据 L5 指标要求（所有维度≥9），Auth 是系统的基石区域。你必须将其从一个只重逻辑轻支撑的阶段，改造为完全文档化、严密监控的高成熟架构。

## 具体执行要求

### 1. P0 抢救：D7 (可运维性) 日志与审计系统化补救
- 这是全系统最需要日志的地方。目前该模块只有极少甚至 0 处日志/审计调用！
- 请在 `src/features/auth` 甚至 `src/shared/lib/auth` (若适合) 等核心点植入日志记录：
  - 成功登录/注册/注销时的信息留存 (`logger.info` 或调用 `AuditService`)
  - 登录防刷、令牌过期、非法篡改、权限验证失败等边界，加入预警级日志 (`logger.warn`/`logger.error`)。

### 2. P0 抢救：D4 (文档完整性) 覆盖
- 目前几乎没有 JSDoc。要求对所有暴露的 `loginAction`, `register`, `revalidateSession`，以及底层认证校验方法补足极其详细的 JSDoc：
  - 需要说明方法的返回体、错误码约定。
  - 需要说明 `session` 获取的机制与安全注意事项。

### 3. D1 (功能) 与 D5 (UI/UX)
- 检查 `features/auth` 内的登录/注册表单（如 `login-form`），确认它不仅工作正常，而且包含了良好的防抖（Submitting状态禁用）、友好的客户端表单校验与错误反馈 UX 表现。

## 约束条件
- **开发语言**：所有的交付物、注释、控制台输出必须使用 **简体中文**。
- 测试不可碎：Auth 的拦截与操作测试已接近完美 (比率 154%)，所有的代码埋点和注释修改**绝对不能破坏原本的逻辑树**。

## 交付与验证
完成后，确认核心路径日志已正确插入并不引起回归，向控制台汇报完成。
