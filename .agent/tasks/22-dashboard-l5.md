# 任务指示：升级 Dashboard 模块至 L5 成熟度

## 当前状态与目标
- **模块名称**：`dashboard`（仪表盘）
- **当前等级**：L4 (6.6分)
- **目标等级**：L5 (全维度稳定 ≥9分)
- **短板分析**：测试覆盖 D3(6分)，文档 D4(6分)，安全规范 D6(6分)，可运维性 D7(6分)，性能优化 D8(6分)

## 具体任务分解

### 1. 提升代码测试覆盖率 (D3 目标: 9)
当前测试只有 6 文件, 41 用例, 测试密度仅为 15.4%。这对于聚合入口页面来说太低。
- 为各个业务 widgets 和 actions 书写测试，模拟空数据、正常数据流场景。
- 必须基于 `vitest`。

### 2. 完善性能优化策略 (D8 目标: 9)
只有 9 处缓存。作为系统首页的 dashboard，对数据实时性要求较低的查询（如待办提醒、聚合概览）必须应用 Next.js 15 的 `unstable_cache`，并设定恰当的 TAG 与 TTL（如：60秒或5分钟）。

### 3. 安全与可运维性双修 (D6 & D7 目标: 9)
只有 17 Zod 校验, 27 tenantId 过滤，以及偏少的日志记录。
- 针对 dashboard/widgets 中所有基于 actions 提取的数据，必须严格用 Zod 验证输入参数。
- 加入核心事件日志：比如用户访问了定制视图（如果有），或是某个 widget 数据请求失败等，加入 `logger.info` 和 `logger.error` 埋点。

### 4. 解决 TODO 并补充文档 (D1 & D4 目标: 9)
代码里有遗留的 1 个 TODO，最大文件 `todo-tab.tsx` 长达 537 行。
- 重构 `todo-tab.tsx`，将其拆分为更小的子组件，提高维护性。
- 对每个 widget 组件及其 action 添加详尽的 JSDoc (D4 目前仅 45 个)。

## 验收标准
1. `pnpm test src/features/dashboard` 测试全部稳定通过。
2. `pnpm tsc --noEmit` 不能有新的类型错误 (当前 0 Any 务必保持)。
3. `pnpm run lint` 没有报错。
4. **必须使用中文**进行代码注释、提交记录和进度反馈。

完成上述所有修改后，使用 `verification-before-completion` 验证。
