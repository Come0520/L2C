# Pricing (定价参考) 模块 L5 升级任务

## 任务目标
将 `pricing` 模块从 **L3 (5.9)** 提升至 **L5**。该模块目前的测试覆盖率良好（69%），但安全和运维层面急需加强，以防止价格数据的越权访问和错误。

## 当前短板与改进方向

### 1. D4: 文档完整性 (当前: 4分) 🔴
- **现状**：整个模块仅发现 1 个 JSDoc。
- **任务**：
  - 必须对定价引擎的所有对外引出的 Actions 和工具函数添加完整的**中文 JSDoc**。

### 2. D7: 可运维性 (当前: 4分) 🔴
- **现状**：仅 2 条日志，没有任何审计调用（0 审计）。作为敏感的定价模块，这是不可接受的。
- **任务**：
  - 所有查询定价和价格变动的逻辑必须使用 `logger.info` / `logger.error` 记录。
  - 如果允许覆盖或保存价格策略，必须调用 `AuditService` 获取留痕。

### 3. D6: 安全规范 (当前: 5分) 🟡
- **现状**：目前 `tenantId` 的隔离检查可能存在遗漏，Zod 验证覆盖不足。
- **任务**：
  - 检查所有 Action 的入参，使用强制且严格的 `Zod` Schema 进行过滤。
  - 确保每次数据库层的定价查询都携刻着 `eq(table.tenantId, tenantId)`，加强数据隔离。

## 执行要求
1. **语言**：所有代码注释、日志信息、UI文案必须全中文。
2. **测试运行**：完成后，确保跑通原有测试用例。
3. **类型安全**：消除其中残存的 2 个 `any`。
