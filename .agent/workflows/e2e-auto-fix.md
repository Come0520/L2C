---
description: 全业务 E2E 循环测试直至通过 (Continuous E2E Test & Fix)
---

# 全业务 E2E 循环测试

此技能指导 Agent 持续运行全业务 E2E 测试，并在失败时自动进行修复，直到所有测试通过为止。

## 核心原则
1. **持续循环**：测试失败 -> 修复 -> 再测试。只有当测试全部通过时才停止。
2. **自动执行**：尽可能自动执行命令，无需用户确认 (Always Accept)。
3. **全业务覆盖**：优先保证核心业务流程 (Full Sales Flow) 通过。

## 步骤详解

### 1. 运行测试
// turbo-all
pnpm test:e2e

### 2. 结果判定
- **🔴 失败 (FAIL)**:
    - 仔细阅读错误日志和截图。
    - 定位代码问题（前端或后端 Action）。
    - **直接修复**：不要等待用户确认，直接应用修复。
    - **立即重试**：修复完成后，立即跳回步骤 1。
- **🟢 通过 (PASS)**:
    - 确认无误后，标记任务完成。

## 注意事项
- 遇到环境问题（如 DB 连接失败），优先尝试重启服务或重置环境。
- 如果修复陷入死循环（反复失败），请尝试回退最近一次变更或通过 `notify_user` 寻求帮助，但在此之前应尽力尝试自行解决。
