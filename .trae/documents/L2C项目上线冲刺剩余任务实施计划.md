# L2C项目上线冲刺剩余任务实施计划

## 4.1 代码质量与类型安全 (P0 - 继续进行)

### 4.1.1 全局类型修复
- **目标**: 完成所有文件的 `any` 类型修复
- **措施**:
  1. 运行 `supabase gen types` 更新最新数据库类型
  2. 使用 TypeScript 编译器检查剩余的 `any` 类型
  3. 重点修复 `features/` 和 `components/` 核心模块中的类型问题
  4. 确保所有类型转换都有明确的类型定义

### 4.1.2 死代码清理
- **目标**: 移除未使用的代码和导出
- **措施**:
  1. 运行 `npm run clean:unused` 检测未使用的代码
  2. 清理未使用的组件、函数和导出
  3. 删除临时文件和备份文件夹

## 4.2 生产环境准备 (P0 - 高优先级)

### 4.2.1 错误监控 (Sentry)
- **目标**: 恢复并启用 Sentry 错误监控
- **措施**:
  1. 恢复 `sentry.client.config.ts`, `sentry.edge.config.ts`, `sentry.server.config.ts`
  2. 配置正确的 Sentry DSN
  3. 验证错误上报功能
  4. 确保测试环境和生产环境配置正确

### 4.2.2 性能监控
- **目标**: 优化关键性能指标
- **措施**:
  1. 检查 `lighthouse-results` 报告
  2. 优化 LCP (最大内容绘制)
  3. 优化 CLS (累积布局偏移)
  4. 确保 Bundle Size 达标

## 4.3 核心功能补全 (P1 - 继续进行)

### 4.3.1 通知系统
- **目标**: 完善通知中心功能
- **措施**:
  1. 增加未读消息计数徽标 (Badge) 的实时更新
  2. 确保通知状态同步更新

## 4.4 文档与收尾 (P2 - 待完成)

### 4.4.1 文档归档
- **目标**: 整理过时计划文件
- **措施**:
  1. 在 `.trae/documents` 下建立 `archive` 目录
  2. 将过时的计划文件移动到 archive 目录

### 4.4.2 部署验证
- **目标**: 确保生产部署成功
- **措施**:
  1. 进行完整的 Staging 环境部署
  2. 执行回归测试
  3. 验证核心业务流程
  4. 检查性能和错误监控

## 实施顺序

1. **恢复 Sentry 配置** (P0)
2. **运行 supabase gen types** (P0)
3. **修复剩余的 any 类型** (P0)
4. **运行死代码清理** (P0)
5. **优化性能指标** (P0)
6. **添加未读消息计数徽标** (P1)
7. **归档文档** (P2)
8. **部署验证** (P2)

## 预期成果

- 100% 类型安全，无 `any` 类型
- 启用 Sentry 错误监控
- 优化性能指标
- 完善通知中心功能
- 清理未使用的代码
- 归档过时文档
- 成功部署到 Staging 环境

## 风险与应对

- **类型修复工作量大**: 分批处理，优先修复核心模块
- **Sentry 配置复杂**: 参考官方文档，逐步配置
- **性能优化需要专业知识**: 使用 Lighthouse 报告提供的建议进行优化

## 验收标准

- 所有 TypeScript 编译错误解决
- 运行 `npm run clean:unused` 无明显未使用代码
- Sentry 能正确上报错误
- 首屏加载时间 < 3秒
- 核心功能完整可用
- 部署成功，无关键错误