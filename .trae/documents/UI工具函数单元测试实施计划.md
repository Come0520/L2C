# UI工具函数单元测试实施计划

## 1. 测试目标
为UI工具函数编写单元测试，确保日期格式化、货币格式化等功能的正确性和稳定性。

## 2. 测试范围
### 2.1 核心工具函数
- `formatDate`: 日期格式化函数
- `formatDateTime`: 日期时间格式化函数
- `formatCurrency`: 货币格式化函数
- `truncate`: 字符串截断函数
- `debounce`: 防抖函数

### 2.2 测试文件位置
- 创建测试文件：`src/utils/lib-utils.test.ts`
- 使用Vitest测试框架

## 3. 测试用例设计
### 3.1 `formatDate`测试用例
- 正常日期字符串输入
- Date对象输入
- 边界日期（如1月1日、12月31日）

### 3.2 `formatDateTime`测试用例
- 正常日期时间字符串输入
- Date对象输入
- 边界时间（如00:00、23:59）

### 3.3 `formatCurrency`测试用例
- 正数金额
- 负数金额
- 零金额
- 小数金额
- 大额金额（带千分位）

### 3.4 `truncate`测试用例
- 短字符串（不截断）
- 长字符串（截断）
- 刚好等于最大长度的字符串

### 3.5 `debounce`测试用例
- 基本防抖功能
- 多次调用只执行最后一次
- 取消防抖

## 4. 实施步骤
1. 创建测试文件：`src/utils/lib-utils.test.ts`
2. 导入被测试函数和Vitest测试工具
3. 为每个函数编写对应的测试用例
4. 运行测试确保所有用例通过
5. 检查测试覆盖率

## 5. 测试执行
- 运行测试：`npm run test`
- 监听模式：`npm run test:watch`
- 覆盖率报告：`npm run test:coverage`

## 6. 质量标准
- 测试覆盖率：≥90%
- 所有测试用例通过
- 测试代码符合项目命名规范

## 7. 后续工作
- 定期运行测试确保功能稳定性
- 新增功能时同步添加测试用例
- 修复bug时添加回归测试

## 8. 技术栈
- Vitest：测试框架
- TypeScript：类型安全
- React Testing Library：（可选，用于组件测试）

这个计划将确保UI工具函数的质量和稳定性，为Quote to Order流程提供可靠的基础支持。