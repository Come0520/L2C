## 解决 webpack 构建问题 (node-gyp-build)

### 问题分析

1. **错误原因**：`./src/app/api/sharing/tokens/route.ts` 文件中使用了 `export const runtime = 'edge'`，指定使用 Edge Runtime
2. **Edge Runtime 限制**：

   * 不支持 Node.js 核心模块 `crypto` 和 `path`

   * 不支持需要原生编译的模块 `bcrypt`（依赖 `node-gyp`）
3. **构建错误**：webpack 无法在 Edge Runtime 环境中解析这些模块，导致构建失败

### 解决方案

移除 `export const runtime = 'edge'` 声明，让 API 路由使用默认的 Node.js Runtime，这样可以：

* 正常使用 `crypto` 和 `path` 模块

* 支持 `bcrypt` 模块的原生编译

* 保持 API 路由的原有功能

### 实施步骤

1. 编辑 `./src/app/api/sharing/tokens/route.ts` 文件
2. 删除第 6 行的 `export const runtime = 'edge'` 声明
3. 重新运行 `npm run build` 验证构建是否成功

### 预期结果

* 构建过程不再出现 `node-gyp-build` 相关错误

* API 路由功能保持不变

* 可以正常使用 `bcrypt` 进行密码哈希处理

* 可以正常使用 `crypto` 模块生成安全令牌

