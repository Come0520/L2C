# TypeScript错误修复计划

## 优先级划分

### 高优先级
1. 验证 `products/page.tsx` 修复
2. 修复 `quotes/[id]/page.tsx`
3. 修复 `settings/approvals/page.tsx` (4个错误)
4. 修复 `settings/channels/page.tsx`
5. 修复 `settings/roles/role-list-wrapper.tsx`
6. 修复 `products/components/product-form.tsx` (13个错误)
7. 修复 `quotes/components/quick-quote-dialog.tsx` (8个错误)

### 中优先级
1. 修复 `after-sales/[id]/page.tsx`
2. 修复 `finance/ap/page.tsx`
3. 修复 `leads/components/lead-form.tsx` (6个错误)
4. 修复 `settings/components/channel-form.tsx` (3个错误)
5. 修复 `settings/components/role-form.tsx` (3个错误)
6. 修复 `settings/components/user-form.tsx`
7. 修复 `settings/components/channel-list.tsx` (4个错误)
8. 修复 `settings/components/role-list.tsx` (4个错误)
9. 修复 `settings/components/user-list.tsx` (4个错误)
10. 修复 `shared/api/db.ts`
11. 修复 `shared/ui/stateful-button.tsx`

### 低优先级
1. 修复其他组件和测试文件中的错误

## 修复策略

1. **系统验证**：每次修复后运行类型检查，确保问题解决
2. **类型匹配**：确保组件接口与实际数据结构一致
3. **空值处理**：为可能为null/undefined的字段添加默认值或类型断言
4. **类型断言**：使用 `as` 或 `NonNullable` 处理复杂类型转换
5. **接口扩展**：更新组件接口以匹配数据模型
6. **事务类型**：修复 `db.ts` 中的事务类型定义

## 执行步骤

1. 首先验证 `products/page.tsx` 的修复
2. 按优先级顺序修复剩余文件
3. 最后处理测试文件和低优先级错误
4. 完成所有修复后运行完整的类型检查

## 预期结果

- 所有TypeScript错误解决
- 项目能够成功通过类型检查
- 代码质量符合FSD架构规范
- 遵循React 19和Next.js 16最佳实践