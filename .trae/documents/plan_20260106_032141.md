## TypeScript错误修复计划

### 1. 修复目标
修复终端中显示的所有非测试文件的TypeScript错误，共涉及21个文件，48个错误。

### 2. 错误分类
- **组件表单类**: 8个文件 (lead-form, product-form, add-resolution-dialog等)
- **页面类**: 6个文件 (after-sales, finance, service等页面)
- **业务组件类**: 7个文件 (order-timeline, quote-builder, room-view等)

### 3. 修复优先级

#### 高优先级 (核心业务流程)
1. **leads/components/lead-form.tsx** - 线索管理核心表单 (6个错误)
2. **products/components/product-form.tsx** - 产品管理核心表单 (5个错误)
3. **after-sales/components/add-resolution-dialog.tsx** - 售后解决方案 (7个错误)
4. **orders/components/order-timeline.tsx** - 订单时间线展示 (2个错误)
5. **quotes/components/quote-builder.tsx** - 报价构建器 (1个错误)
6. **quotes/components/quote-to-order-button.tsx** - 报价转订单功能 (1个错误)

#### 中优先级 (页面展示)
1. **app/(dashboard)/after-sales/[id]/page.tsx** - 售后详情页 (1个错误)
2. **app/(dashboard)/service/installation/page.tsx** - 安装服务页 (1个错误)
3. **app/(dashboard)/settings/channels/page.tsx** - 渠道设置页 (1个错误)
4. **analytics/components/order-trend-chart.tsx** - 订单趋势图 (1个错误)

#### 低优先级 (辅助功能)
1. **finance/ap/page.tsx** - 应付账款页 (1个错误)
2. **finance/labor/page.tsx** - 人工费页 (1个错误)
3. **leads/components/add-followup-dialog.tsx** - 添加跟进记录 (1个错误)
4. **monitoring/actions.ts** - 监控动作 (1个错误)
5. **monitoring/components/notification-bell.tsx** - 通知铃铛 (1个错误)
6. **quotes/components/views/room-view.tsx** - 房间视图 (1个错误)
7. **quotes/quick-quote/components/quick-quote-form.tsx** - 快速报价表单 (2个错误)
8. **quotes/quick-quote/components/room-input-list.tsx** - 房间输入列表 (2个错误)

### 4. 修复策略

#### 表单类错误修复
- 修复useForm的Resolver类型不匹配
- 确保formSchema与FormValues类型一致
- 修复action状态管理的类型问题
- 处理null/undefined值转换

#### 页面类错误修复
- 修复数据获取和类型转换
- 确保组件属性传递正确
- 处理异步数据的null检查

#### 业务组件类错误修复
- 修复组件属性类型不匹配
- 处理枚举类型转换
- 确保函数调用参数正确
- 修复事件处理函数类型

### 5. 技术方案

1. **使用类型断言**：对于暂时无法完全匹配的类型，使用as const或as any断言
2. **添加默认值**：为可选属性添加合适的默认值
3. **修复函数签名**：确保函数调用与定义匹配
4. **调整类型定义**：扩展接口或类型以包含缺失的属性
5. **使用nullish coalescing**：处理null/undefined值
6. **修复枚举类型**：确保枚举值符合定义

### 6. 预期结果
- 消除所有非测试文件的TypeScript错误
- 保持组件功能不变
- 提高代码类型安全性
- 为后续测试文件修复奠定基础

### 7. 修复顺序
按照优先级顺序依次修复，每个文件修复后验证类型检查结果，确保修复有效。