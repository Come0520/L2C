## 优化计划：类型断言与 React 19 Hooks 使用

### 1. 优化测试文件中的 `as unknown` 类型断言

**问题**：测试文件中大量使用 `as unknown` 类型断言，影响代码可读性和类型安全性。

**解决方案**：

- **创建专门的 Mock 类型定义**：为测试中使用的 mock 对象创建清晰的类型定义
- **使用 TypeScript 泛型**：在 mock 函数中使用泛型来推断类型
- **优化 mock 实现**：使用更准确的 mock 实现，减少类型断言需求

**实施步骤**：

1. **创建 Mock 类型文件**：在 `src/shared/types/mocks.ts` 中定义常用的 mock 类型
2. **优化 leads 测试文件**：更新 `src/features/leads/__tests__/status-workflow.test.ts`
3. **优化 orders 测试文件**：更新 `src/features/orders/__tests__/order-actions.test.ts` 和 `status-sync.test.ts`
4. **优化 supply-chain 测试文件**：更新 `src/features/supply-chain/__tests__/inventory-actions.test.ts`

### 2. 检查并优化表单提交的 `useActionState` 使用

**问题**：并非所有表单提交都使用了 React 19 的 `useActionState`，可能影响用户体验。

**解决方案**：

- **检查所有表单组件**：找出未使用 `useActionState` 的表单
- **更新表单提交逻辑**：将传统的表单提交更新为使用 `useActionState`
- **统一错误处理**：确保所有表单都有一致的错误处理和加载状态

**实施步骤**：

1. **查找所有表单组件**：使用 grep 查找所有使用 `react-hook-form` 的组件
2. **检查 `useActionState` 使用情况**：确认哪些表单未使用 `useActionState`
3. **更新表单组件**：将未使用 `useActionState` 的表单更新为使用该 hook
4. **测试表单功能**：确保更新后的表单功能正常

### 3. 预期结果

- **类型安全性提高**：减少 `as unknown` 类型断言，提高代码可读性和类型安全性
- **用户体验提升**：所有表单提交都使用 `useActionState`，提供更好的加载状态和错误处理
- **代码一致性增强**：统一表单提交模式，便于维护和扩展

### 4. 风险评估

- **测试中断风险**：修改测试文件可能导致测试失败，需要仔细验证
- **兼容性风险**：确保所有更新后的表单都能正常工作
- **性能风险**：`useActionState` 可能带来轻微的性能开销，但通常可以忽略

### 5. 资源需求

- **开发时间**：2-3 天
- **测试时间**：1 天
- **人员需求**：1 名前端开发人员

### 6. 优先级

**低优先级**：这些优化不会影响系统的核心功能，但会提高代码质量和用户体验。建议在完成核心功能开发后进行这些优化。