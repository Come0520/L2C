# 产品管理模块代码优化计划

## 目标

根据用户反馈和建议，结合Next.js 15 + React 19 + DDD架构目标，对产品管理模块进行代码优化，主要包括：

1. 确保组件文件使用PascalCase命名规范
2. 提取逻辑到utils目录，实现"轻量级View，强大Hook"的架构
3. 为types和utils创建统一导出的index.ts文件
4. 提取相关逻辑到自定义Hooks

## 执行步骤

### 1. 文件命名规范检查与修复

- 检查所有产品相关组件文件，确保使用PascalCase命名规范
- 目前已检查的组件文件均已符合规范，无需重命名

### 2. 创建必要的目录结构

- 在`src/features/products`目录下创建`utils`目录，用于存放产品相关的工具函数
- 在`src/features/products`目录下创建`hooks`目录，用于存放产品相关的自定义Hooks
- 在`src/features/products`目录下创建`types.ts`文件，用于存放产品相关的类型定义

### 3. 提取逻辑到utils目录

- 创建`src/features/products/utils/product-formatters.ts`文件，用于存放价格格式化、状态映射等纯函数
- 创建`src/features/products/utils/product-validators.ts`文件，用于存放产品相关的验证逻辑
- 将组件中分散的逻辑（如价格处理、状态映射等）提取到相应的工具函数中

### 4. 创建自定义Hooks

- 创建`src/features/products/hooks/use-product-filters.ts`文件，用于封装产品筛选逻辑
- 创建`src/features/products/hooks/use-product-form.ts`文件，用于封装产品表单逻辑
- 将组件中的复杂状态管理和业务逻辑提取到自定义Hooks中

### 5. 创建统一导出的index.ts文件

- 在`src/features/products/utils`目录下创建`index.ts`文件，统一导出所有工具函数
- 在`src/features/products/hooks`目录下创建`index.ts`文件，统一导出所有自定义Hooks
- 在`src/features/products`目录下创建`index.ts`文件，统一导出主要的类型和组件

### 6. 更新组件导入路径

- 更新所有组件的导入路径，使用新创建的utils和hooks
- 确保导入路径符合Next.js的最佳实践，避免Tree Shaking失效

## 预期成果

通过本次优化，产品管理模块将实现：

1. **更清晰的代码结构**：组件、逻辑、工具函数分离，便于维护和扩展
2. **更好的代码复用**：工具函数和Hooks可以在多个组件中复用
3. **更好的可测试性**：纯函数逻辑便于单元测试
4. **更好的性能**：避免Tree Shaking失效，减少打包体积
5. **符合Next.js最佳实践**：遵循Next.js的文件命名和导入规范

## 技术栈

- Next.js 15
- React 19
- TypeScript
- Tailwind CSS v4
- Zod（用于验证）
- React Hook Form（用于表单管理）