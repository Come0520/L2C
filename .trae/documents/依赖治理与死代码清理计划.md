# 依赖治理与死代码清理计划

## 一、当前状态分析

### 1. 依赖检查结果
- 预期需要移除的依赖（pg、bcrypt、@swc/helpers、caniuse-lite）已经不在dependencies中
- typescript和@types/*系列包已经正确放在devDependencies中
- 存在13个未使用的devDependencies需要清理

### 2. 死代码检查结果
- 发现大量未使用代码，主要包括：
  - 未使用的组件（如Skeleton系列组件、CreateSlideModal等）
  - 未使用的函数和类型定义
  - Next.js自动生成的类型文件（.next/types/）中的未使用类型（这些会在下次构建时重新生成，无需手动清理）

## 二、清理计划

### 1. 清理未使用的devDependencies
移除以下未使用的开发依赖：
```
@commitlint/cli
@commitlint/config-conventional
@tailwindcss/postcss
@testing-library/user-event
@vitest/coverage-v8
autoprefixer
debug
husky
postcss
prettier
stylelint-config-standard
stylelint-config-tailwindcss
tailwindcss
```

### 2. 清理死代码
清理以下未使用的代码：
- `src/components/ui/skeleton/index.ts` 中的Skeleton系列组件
- `src/features/editor/components/create-slide-modal.tsx` 中的CreateSlideModal组件
- `src/features/leads/components/tag-management-panel.tsx` 中的TagManagementPanel组件
- `src/features/orders/components/` 目录下的多个未使用组件
- `src/features/installations/components/list/installation-table.tsx` 中的InstallationTable组件
- 其他未使用的组件和函数

### 3. 修复缺失的依赖
添加缺失的eslint-plugin-import依赖

## 三、实施步骤

1. 运行 `npm uninstall <package-name>` 移除未使用的devDependencies
2. 手动删除未使用的组件文件和代码
3. 运行 `npm install eslint-plugin-import --save-dev` 添加缺失的依赖
4. 运行 `npm run build` 验证构建是否成功
5. 运行 `npm run lint` 验证代码质量
6. 运行 `npm run test` 验证测试是否通过

## 四、预期效果

- package.json 依赖精简
- 无未使用的导入
- 生产包体积减小
- 代码质量提高

## 五、注意事项

- .next/types/ 目录是Next.js自动生成的，不应该手动清理，会在下次构建时重新生成
- 清理代码时要确保不影响现有功能
- 移除依赖前要确认它们确实未被使用
- 清理后要运行完整的测试套件验证功能完整性