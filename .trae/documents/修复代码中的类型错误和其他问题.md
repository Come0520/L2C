## 修复计划

### 1. 修复 permissions.ts 中的类型错误
- **问题**：第21行和第42行，类型"string"的参数不能赋给类型"OperationPermission"的参数
- **解决方案**：将`checkPermission`和`checkAnyPermission`函数的参数类型从`string`改为`OperationPermission`

### 2. 修复 useRealtimeOrders.ts 中的类型错误
- **问题**：第35行，类型"{} | { [key: string]: any; }"上不存在属性"id"
- **解决方案**：添加类型检查，确保在访问`payload.new?.id`和`payload.old?.id`之前它们存在，或者添加类型断言

### 3. 修复 installation-schedule.client.ts 中的错误
- **问题**：多个类型错误，包括属性不存在、undefined不能作为索引等
- **解决方案**：
  - 添加类型检查，确保对象属性存在
  - 处理undefined值，避免作为索引使用
  - 为隐式any参数添加类型定义
  - 修复API调用中的参数类型错误

### 4. 修复 leads.client.ts 中的错误
- **问题**：对象可能为"未定义"
- **解决方案**：添加可选链或类型检查

### 5. 修复 quotes.client.ts 中的错误
- **问题**：latestVersion可能为"未定义"
- **解决方案**：添加类型检查或默认值

### 6. 修复组件文件中的错误
- **问题**：各种类型不匹配、属性不存在等
- **解决方案**：
  - 修复组件属性传递，确保使用正确的属性名
  - 修复类型断言，确保类型安全
  - 处理可选值，避免运行时错误

### 7. 修复 useSalesOrders.ts 中的导入问题
- **问题**：重复导入useRealtimeOrders和useRealtimeOrder
- **解决方案**：合并导入语句

## 修复顺序

1. 先修复核心工具函数和hooks（permissions.ts, useRealtimeOrders.ts）
2. 然后修复服务层文件（installation-schedule.client.ts, leads.client.ts, quotes.client.ts）
3. 最后修复组件文件

## 预期效果

- 所有TypeScript错误都将被修复
- 代码将更加类型安全
- 运行时错误的风险将降低
- 代码质量将提高

## 注意事项

- 修复时要保持代码的原有功能不变
- 遵循项目的命名规范和代码风格
- 确保修复后的代码通过所有测试
- 对于不确定的类型，使用适当的类型断言或添加类型检查

我将按照这个计划逐步修复项目中的所有错误。