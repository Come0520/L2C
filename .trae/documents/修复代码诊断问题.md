## 修复计划

### 1. 优先级最高的文件修复

#### `src/app/orders/status/[status]/page.tsx`
- **错误**：`measurement_order` 属性在 `never` 类型上不存在
- **修复方案**：
  - 修复类型定义，确保 `measurement_order` 是可选属性
  - 移除直接访问 `window.env`，改用 `process.env` 或 `import.meta.env`
  - 修复 `sales` 属性访问，改为使用 `salesName`

#### `src/app/finance/reconciliations/anomalies/page.tsx`
- **错误**：多个类型不匹配和缺少类型定义
- **修复方案**：
  - 修复 `AnomalyType` 和 `AnomalySeverity` 的使用
  - 移除不存在的属性访问（如 `resolutionStatus`、`amountDifference` 等）
  - 修复组件导入（如 `PaperModal`、`PaperModalContent`）

#### `src/features/reconciliation/components/FinancialCrossValidation.tsx`
- **错误**：大量缺少组件和服务实例
- **修复方案**：
  - 修复组件导入路径
  - 添加缺失的服务实例
  - 修复类型转换错误

### 2. 中等优先级的文件修复

#### E2E 测试文件
- **错误**：`precision` 属性不在预期类型中
- **修复方案**：移除 `precision` 属性，使用正确的类型

#### API 路由文件
- **错误**：Supabase 客户端使用错误
- **修复方案**：修复 Supabase 客户端的异步调用

#### 组件文件
- **错误**：类型转换错误和属性不存在
- **修复方案**：修复类型转换，移除不存在的属性访问

### 3. 低优先级的文件修复

#### 未使用的导入
- **修复方案**：移除未使用的导入

#### 次要类型错误
- **修复方案**：修复类型不匹配问题

### 修复策略
1. 先修复 TypeScript 类型错误，确保编译通过
2. 然后修复组件导入和 API 调用错误
3. 最后修复环境变量和未使用的导入
4. 每个文件修复后运行 `npm run typecheck` 验证
5. 最终运行 `npm run lint` 确保代码质量

### 预期结果
- 所有 TypeScript 编译错误消失
- 代码符合 lint 规则
- 项目能够正常构建和运行