## 修复计划

通过分析代码，我发现了以下可能导致26条日志错误的问题：

### 1. 路径不一致问题
- **问题**：`actions.ts` 中使用了 `/quotesTable` 路径进行缓存失效，但实际页面路径是 `/quotes`
- **修复**：将所有 `revalidatePath('/quotesTable')` 改为 `revalidatePath('/quotes')`

### 2. 类型安全问题
- **问题**：`getQuotesPure` 和 `getQuoteBundlesPure` 函数中，当 `session` 为 `null` 时，使用空字符串作为 `tenantId`
- **修复**：在函数开始处添加 `tenantId` 验证，确保只有合法的 `tenantId` 才执行查询

### 3. 服务器组件与客户端库兼容性问题
- **问题**：`quote-table.tsx` 和 `quote-bundle-table.tsx` 中使用了 `motion.tr` 组件，可能导致服务器渲染错误
- **修复**：确保 `framer-motion` 相关代码只在客户端执行，或替换为更兼容的动画方案

### 4. 错误的错误处理方式
- **问题**：`page.tsx` 中使用简单的 `<div>Access Denied</div>` 处理未授权访问
- **修复**：使用 Next.js 提供的 `notFound()` 或 `redirect()` 函数进行正确的错误处理

### 5. 类型断言安全问题
- **问题**：`quotes-page-client.tsx` 中使用了不安全的类型断言
- **修复**：添加类型检查或使用更安全的类型转换方式

### 6. 不必要的 Promise.all 使用
- **问题**：`page.tsx` 中使用 `Promise.all([getUsers(tenantId)])`，但只调用了一个异步函数
- **修复**：直接调用 `getUsers(tenantId)`，移除不必要的 `Promise.all`

### 7. 未使用的导入和变量
- **问题**：代码中存在一些未使用的导入和变量，可能导致编译警告
- **修复**：移除所有未使用的导入和变量

### 8. 日期处理问题
- **问题**：`quote-table.tsx` 和 `quote-bundle-table.tsx` 中直接使用 `new Date(bundle.createdAt)`，可能导致日期解析错误
- **修复**：确保日期字符串正确解析，或在服务器端处理日期格式

## 修复步骤

1. 修复 `actions.ts` 中的路径不一致问题
2. 加强 `getQuotesPure` 和 `getQuoteBundlesPure` 函数的类型安全
3. 修复 `page.tsx` 中的错误处理方式
4. 优化 `quotes-page-client.tsx` 中的类型断言
5. 移除不必要的 `Promise.all` 使用
6. 清理未使用的导入和变量
7. 修复日期处理问题
8. 测试所有修复，确保没有新的错误

这些修复将解决当前报价管理页面的26条日志错误，提高系统的稳定性和性能。