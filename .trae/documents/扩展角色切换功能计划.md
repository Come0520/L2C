# 扩展角色切换功能计划（基于详细角色文档）

## 问题分析

当前系统存在以下问题：
1. 后端定义了多种角色，但前端角色切换功能只支持2种角色
2. 缺少大部分角色的模拟数据和工作台视图
3. 前端角色类型与后端角色编码体系不一致
4. 开发阶段无法方便地查看所有角色的工作台

## 扩展计划

### 1. 更新前端角色类型定义

- 更新 `auth-context.tsx` 中的 User 接口，使用与后端一致的角色编码体系
- 更新 `page.tsx` 中的角色状态类型，支持所有文档中定义的角色

### 2. 扩展角色切换按钮

- 修改首页的角色切换功能，支持所有主要角色
- 使用下拉选择器或标签组组件，方便切换不同角色
- 显示角色的中文名称和英文编码

### 3. 为主要角色创建模拟数据

根据角色文档，为以下主要角色创建模拟数据：

#### 销售类角色
- 驻店销售 (SALES_STORE)
- 远程销售 (SALES_REMOTE)
- 业务 (SALES_CHANNEL)

#### 领导类角色
- 销售负责人 (LEAD_SALES)
- 渠道负责人 (LEAD_CHANNEL)
- 领导 (LEAD_GENERAL)
- 系统管理员 (LEAD_ADMIN)
- 领导查看角色 (LEAD_VIEWER)

#### 审批类角色
- 业务审批人 (APPROVER_BUSINESS)
- 财务审批人 (APPROVER_FINANCIAL)
- 管理审批人 (APPROVER_MANAGEMENT)

#### 交付类角色
- 订单客服 (DELIVERY_SERVICE)

#### 服务模块角色
- 派单员 (SERVICE_DISPATCH)

#### 其他角色
- 财务 (OTHER_FINANCE)

### 4. 根据角色动态显示工作台内容

- 更新 `page.tsx` 中的工作台逻辑，根据当前角色显示不同的内容
- 为每种角色设计合适的工作台布局，包括：
  - 快速统计数据
  - 待办事项
  - 最近活动
  - 快速导航

### 5. 确保角色切换功能正常工作

- 测试所有角色的切换功能
- 确保不同角色的工作台内容正确显示
- 确保开发阶段可以正常使用角色切换功能

## 实现步骤

1. **更新角色类型定义**
   - 修改 `auth-context.tsx` 中的 User 接口
   - 修改 `page.tsx` 中的角色状态类型

2. **扩展角色切换按钮**
   - 更新首页的角色切换UI组件
   - 添加所有主要角色的选项
   - 实现角色切换逻辑

3. **创建角色模拟数据**
   - 为每种角色创建模拟的待办事项数据
   - 为每种角色创建模拟的统计数据
   - 为每种角色创建模拟的最近活动数据

4. **更新工作台逻辑**
   - 根据当前角色动态显示不同的待办事项
   - 根据当前角色动态显示不同的统计数据
   - 根据当前角色动态显示不同的最近活动
   - 根据当前角色动态显示不同的快速导航

5. **测试角色切换功能**
   - 测试所有角色的切换
   - 测试不同角色的工作台内容
   - 确保开发阶段可以正常使用角色切换功能

## 预期成果

1. ✅ 角色切换按钮支持所有主要角色
2. ✅ 每种角色都有对应的模拟数据
3. ✅ 每种角色都有合适的工作台视图
4. ✅ 开发阶段可以方便地切换不同角色查看工作台
5. ✅ 前端角色类型与后端角色编码体系保持一致

## 技术实现

- 使用 TypeScript 确保类型安全
- 使用 React 状态管理角色切换
- 使用模拟数据支持开发阶段的测试
- 保持与现有代码风格一致
- 使用现有的 UI 组件库

## 风险评估

- 低风险：只涉及前端代码修改，不影响后端功能
- 中风险：需要为多种角色创建模拟数据，工作量较大
- 高风险：无

## 依赖关系

- 依赖现有的 DashboardLayout 组件
- 依赖现有的 TodoCategories 组件
- 依赖现有的 PaperButton 组件
- 依赖现有的 PaperCard 组件

## 输出文档

- 无额外文档需求，代码注释清晰即可