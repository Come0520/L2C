# 数据库客户管理结构优化方案

## 问题分析

当前数据库设计中存在以下问题：
1. **客户类型混淆**：`customer_customers`表没有明确区分B端和C端客户，导致数据管理混乱
2. **B端客户存储不当**：B端客户（如装企）没有合适的存储结构，错误地将渠道作为B端客户的存储方式
3. **业务关系不清晰**：门店、渠道、客户之间的关系需要进一步明确

## 优化方案

### 1. 明确客户类型区分

**修改`customer_customers`表**：
- 添加`customer_type`字段，区分B端和C端客户
- 调整表结构，支持不同类型客户的差异化管理

### 2. 为B端客户设计专属结构

**新增`business_customers`表**：
- 专门存储B端客户（如装企）的详细信息
- 包含企业规模、经营范围、资质证书等B端特有字段
- 与`customer_customers`表建立关联

### 3. 调整渠道与客户的关系

**明确渠道、门店、客户的关系**：
- 渠道：管理销售网络和渠道商
- 门店：渠道下的销售终端
- 客户：包括B端（装企）和C端（个人），通过门店或渠道产生订单

### 4. 优化关联关系

**调整表间关联**：
- `sales_orders`表可关联到B端客户或C端客户
- `business_customers`表与`customer_customers`表建立一对一关系
- 保持渠道与门店的现有关联

## 实施步骤

1. **修改`customer_customers`表**：添加`customer_type`字段
2. **创建`business_customers`表**：设计B端客户专属结构
3. **调整关联关系**：更新相关表的外键约束
4. **更新文档**：修改所有相关Markdown文档
5. **更新可视化图表**：调整HTML中的Mermaid图表

## 预期效果

1. **数据结构清晰**：明确区分B端和C端客户，便于管理和分析
2. **业务关系明确**：渠道、门店、客户之间的关系更加清晰
3. **扩展性强**：支持不同类型客户的差异化管理和扩展
4. **查询效率高**：通过明确的类型区分，提高查询和统计效率

## 注意事项

1. 保持现有数据的兼容性，通过迁移脚本处理历史数据
2. 确保所有外键关系的完整性
3. 遵循项目的命名规范和设计规范
4. 更新所有相关文档和可视化图表

这个优化方案将解决当前数据库设计中客户类型混淆的问题，为B端客户（如装企）提供合适的存储结构，同时保持良好的扩展性和查询效率。