# 礼品管理模块开发计划

## 1. 模块结构设计

创建礼品管理模块，目录结构如下：

```
gifts/
├── dto/
│   ├── create-gift.dto.ts
│   ├── update-gift.dto.ts
│   ├── create-gift-category.dto.ts
│   └── update-gift-category.dto.ts
├── entities/
│   ├── gift-category.entity.ts
│   └── gift.entity.ts
├── gifts.controller.ts
├── gifts.module.ts
└── gifts.service.ts
```

## 2. 实体设计

### 2.1 礼品分类实体 (GiftCategory)

* 与产品分类类似，支持多级分类

* 字段：id, name, code, level, description, parent, children, isActive, createdAt, updatedAt

### 2.2 礼品实体 (Gift)

* 字段：

  * 基本信息：id, giftCode, giftName, categoryLevel1, categoryLevel2, unit, status, description, images, stockQuantity, isFeatured

  * 价格信息：tagPrice (吊牌价), distributionPrice (经销价), vipPrice (VIP价), costPrice (成本价)

  * 时间信息：createdAt, updatedAt

## 3. 功能实现

### 3.1 礼品分类管理

* 创建分类

* 查询分类列表

* 查询单个分类

* 更新分类

* 删除分类

### 3.2 礼品管理

* 创建礼品

* 查询礼品列表

* 查询单个礼品

* 更新礼品

* 删除礼品

* 上下架功能（通过更新status字段实现）

### 3.3 价格管理

* 在创建和更新礼品时管理四种价格

* 支持单独更新价格

## 4. API设计

| API路径                 | 方法     | 功能     |
| --------------------- | ------ | ------ |
| /gifts                | POST   | 创建礼品   |
| /gifts                | GET    | 查询礼品列表 |
| /gifts/:id            | GET    | 查询单个礼品 |
| /gifts/:id            | PATCH  | 更新礼品   |
| /gifts/:id            | DELETE | 删除礼品   |
| /gifts/:id/online     | PATCH  | 上架礼品   |
| /gifts/:id/offline    | PATCH  | 下架礼品   |
| /gifts/categories     | POST   | 创建分类   |
| /gifts/categories     | GET    | 查询分类列表 |
| /gifts/categories/:id | GET    | 查询单个分类 |
| /gifts/categories/:id | PATCH  | 更新分类   |
| /gifts/categories/:id | DELETE | 删除分类   |

## 5. 技术实现细节

* 使用TypeORM进行数据库操作

* 使用class-validator进行数据验证

* 遵循项目现有的命名规范

* 与产品模块类似的架构设计

* 支持分页查询（后续扩展）

## 6. 实现步骤

1. 创建模块目录结构
2. 实现礼品分类实体
3. 实现礼品实体
4. 实现DTO
5. 实现服务层
6. 实现控制器层
7. 创建模块文件
8. 在app.module.ts中注册模块

## 7. 预期成果

* 完整的礼品管理模块

* 支持礼品的CRUD操作

* 支持礼品的上下架功能

* 支持四种价格的管理

* 支持礼品分类管理

