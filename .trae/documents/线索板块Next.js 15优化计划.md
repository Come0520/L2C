# 线索板块Next.js 15优化计划

## 1. 服务端组件优化
- 将 `/app/leads/page.tsx` 从客户端组件转换为服务端组件
- 移除 `'use client'` 指令，直接在服务端获取初始数据
- 使用 `leadService.getLeads()` 直接获取数据，无需 `useEffect`

## 2. 布局文件创建
- 创建 `/app/leads/layout.tsx` 文件
- 添加 SEO 元数据配置
- 设置页面布局结构

## 3. 错误边界完善
- 创建 `/app/leads/error.tsx` 文件
- 实现错误处理和重试功能
- 添加友好的错误提示界面

## 4. 加载状态增强
- 升级现有 `/app/leads/loading.tsx`
- 引入 `Suspense` 组件实现更细粒度的加载控制
- 优化骨架屏显示效果

## 5. 性能优化
- 在服务端组件中使用 `unstable_cache` 缓存数据
- 配置合理的缓存过期时间（如60秒）
- 优化数据获取逻辑，减少不必要的请求

## 6. 路由处理优化
- 优化 `/app/leads/[id]/page.tsx`
- 添加 `generateStaticParams` 支持静态生成
- 实现服务端数据获取

## 7. 组件拆分与并行加载
- 考虑将大型组件拆分为更小的服务端组件
- 支持并行加载不同区域的数据
- 优化组件渲染性能

## 8. 依赖调整
- 确保服务端组件中只使用兼容的库和函数
- 调整数据服务层，支持服务端调用
- 优化客户端组件的使用场景

## 实现步骤
1. 创建 `layout.tsx` 和 `error.tsx` 文件
2. 转换 `page.tsx` 为服务端组件
3. 优化加载组件
4. 添加缓存机制
5. 优化详情页路由
6. 测试所有功能正常运行

这些优化将充分利用Next.js 15的新特性，提升线索管理模块的性能和用户体验。