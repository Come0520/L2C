# 线索管理功能测试计划

## 测试目标
验证 L2C 系统中线索管理模块的所有功能是否正常实现，包括线索的创建、编辑、分配、跟进、状态变更、报价和测量服务等。

## 测试环境
- 开发环境：http://localhost:3000
- 浏览器：Chrome/Firefox 最新版本
- 权限：销售/管理员角色

## 测试用例

### 1. 线索列表页面测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 页面加载 | 1. 登录系统<br>2. 导航至「线索管理」页面 | 1. 页面正常加载，显示线索列表<br>2. 显示正确的线索总数<br>3. 显示筛选条件和分页控件 |
| 状态筛选 | 1. 点击不同状态标签（全部、待分配、待跟进、跟进中、已成交、已作废） | 1. 列表显示对应状态的线索<br>2. URL 参数更新为对应状态<br>3. 总数统计更新 |
| 高级筛选 | 1. 展开筛选面板<br>2. 设置筛选条件（销售、来源、意向等级、日期范围等）<br>3. 点击「应用筛选」 | 1. 列表显示符合条件的线索<br>2. URL 参数更新为对应筛选条件<br>3. 总数统计更新 |
| 搜索功能 | 1. 在搜索框输入关键词（客户名称/电话）<br>2. 按下回车键 | 1. 列表显示匹配的线索<br>2. URL 参数更新为搜索关键词<br>3. 总数统计更新 |
| 分页功能 | 1. 点击页码或「下一页」按钮<br>2. 选择不同的每页显示数量 | 1. 列表显示对应页的线索<br>2. URL 参数更新为对应页码和每页数量<br>3. 分页控件状态正确 |
| 创建线索按钮 | 1. 点击「创建线索」按钮 | 1. 弹出创建线索对话框<br>2. 对话框包含所有必填字段 |

### 2. 线索创建测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 创建线索表单 | 1. 填写完整的线索信息（客户名称、电话、意向等级、来源等）<br>2. 点击「保存」按钮 | 1. 线索创建成功<br>2. 列表中显示新创建的线索<br>3. 自动跳转到线索详情页 |
| 必填字段验证 | 1. 不填写必填字段（客户名称、电话）<br>2. 点击「保存」按钮 | 1. 表单验证失败<br>2. 显示相应的错误提示<br>3. 线索创建失败 |
| 电话号码格式验证 | 1. 输入无效的电话号码<br>2. 点击「保存」按钮 | 1. 表单验证失败<br>2. 显示电话号码格式错误提示<br>3. 线索创建失败 |

### 3. 线索详情页面测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 基本信息显示 | 1. 点击任意线索进入详情页 | 1. 正确显示线索的基本信息<br>2. 正确显示状态标签<br>3. 正确显示创建人和负责人信息 |
| 编辑线索 | 1. 点击「编辑资料」按钮<br>2. 修改线索信息<br>3. 点击「保存」按钮 | 1. 线索信息更新成功<br>2. 页面显示更新后的信息<br>3. 活动日志中记录编辑操作 |
| 添加跟进记录 | 1. 点击「添加跟进」按钮<br>2. 填写跟进内容和下次跟进时间<br>3. 点击「保存」按钮 | 1. 跟进记录添加成功<br>2. 活动日志中显示新的跟进记录<br>3. 线索状态自动更新为「跟进中」 |
| 标记线索作废 | 1. 点击「标记作废」按钮<br>2. 填写作废原因<br>3. 点击「确认」按钮 | 1. 线索状态更新为「已作废」<br>2. 活动日志中记录作废操作<br>3. 列表中该线索显示为已作废状态 |
| 快速报价 | 1. 点击「快速报价」按钮 | 1. 跳转到快速报价页面<br>2. 自动携带线索信息 |
| 转为客户 | 1. 查看「转为客户」按钮状态 | 1. 当线索状态为「已成交」时，按钮可点击<br>2. 其他状态下按钮禁用并显示提示 |

### 4. 测量服务测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 发起测量任务 | 1. 在线索详情页点击「发起测量任务」按钮<br>2. 填写测量任务信息<br>3. 点击「保存」按钮 | 1. 测量任务创建成功<br>2. 页面显示新创建的测量任务<br>3. 活动日志中记录测量任务创建操作 |
| 指派测量师傅 | 1. 对于待指派的测量任务，点击「指派师傅」按钮<br>2. 选择可用的测量师傅<br>3. 点击「确认」按钮 | 1. 测量师傅指派成功<br>2. 测量任务状态更新<br>3. 活动日志中记录指派操作 |
| 查看测量任务列表 | 1. 在线索详情页查看测量任务列表 | 1. 显示该线索的所有测量任务<br>2. 每个任务显示正确的状态和信息 |

### 5. 活动日志测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 日志记录完整性 | 1. 对线索执行多个操作（编辑、添加跟进、标记作废等）<br>2. 查看活动日志 | 1. 所有操作都被记录在活动日志中<br>2. 每条日志显示正确的操作类型、操作人、操作时间和详情 |
| 日志时间顺序 | 1. 查看活动日志的时间顺序 | 1. 日志按时间倒序排列<br>2. 最新的操作显示在最上方 |

### 6. 报价版本测试

| 测试项 | 测试步骤 | 预期结果 |
|--------|----------|----------|
| 报价版本显示 | 1. 为线索创建多个报价<br>2. 在线索详情页查看报价版本 | 1. 显示该线索的所有报价版本<br>2. 每个版本显示正确的报价信息和创建时间<br>3. 可点击查看详情 |

## 测试执行

### 执行人员
开发人员/测试人员

### 执行时间
开发完成后立即执行

## 测试结论

| 测试结果 | 说明 |
|----------|------|
| 通过 | 所有测试用例均通过，功能正常实现 |
| 部分通过 | 部分测试用例失败，需要修复 |
| 不通过 | 大部分测试用例失败，需要重新开发 |

## 后续行动

- 对于测试中发现的问题，创建 bug 报告并分配给开发人员修复
- 修复完成后，重新执行相关测试用例
- 所有测试通过后，文档化测试结果并归档