## 销售单全流程测试计划

### 测试目标

验证销售单的完整业务流程是否正常工作，包括创建、查看、编辑、状态更新等核心功能。

### 测试步骤

#### 1. 单元测试

运行销售单相关的单元测试，验证核心逻辑：

```bash
# 运行销售单钩子测试
pnpm test src/hooks/__tests__/useSalesOrders.test.tsx

# 运行销售单页面测试
pnpm test src/app/__tests__/orders.test.tsx

# 运行销售单服务测试（如果存在）
pnpm test src/services/__tests__/salesOrders.client.test.ts
```

#### 2. 构建测试

确保项目能够成功构建：

```bash
# 清理之前的构建
rm -rf .next

# 运行构建测试
pnpm build
```

#### 3. 功能测试

启动开发服务器并测试销售单的完整流程：

```bash
# 启动开发服务器
pnpm dev
```

##### 测试场景

1. **销售单列表**：访问 `/orders` 查看销售单列表
2. **销售单详情**：点击销售单查看详情页
3. **创建销售单**：访问 `/orders/create` 创建新销售单
4. **编辑销售单**：编辑现有销售单
5. **销售单状态**：更新销售单状态
6. **销售单删除**：删除销售单

#### 4. 类型检查

确保没有类型错误：

```bash
pnpm typecheck
```

### 预期结果

- ✅ 单元测试全部通过
- ✅ 构建成功完成
- ✅ 开发服务器正常启动
- ✅ 销售单列表正常显示
- ✅ 销售单详情页面正常访问
- ✅ 能够成功创建销售单
- ✅ 能够成功编辑销售单
- ✅ 能够成功更新销售单状态
- ✅ 能够成功删除销售单
- ✅ 类型检查通过

### 测试工具

- **浏览器开发者工具**：查看网络请求和控制台错误
- **Postman**：测试 API 接口
- **Vitest**：运行单元测试
- **Next.js 开发服务器**：测试功能

### 风险评估

- **数据库连接问题**：确保 Supabase 数据库连接正常
- **依赖版本问题**：确保所有依赖版本兼容
- **环境变量配置**：确保环境变量正确配置

### 执行顺序

1. 运行类型检查
2. 运行单元测试
3. 运行构建测试
4. 启动开发服务器
5. 测试销售单功能

通过以上步骤，可以全面验证销售单的完整流程是否正常工作。