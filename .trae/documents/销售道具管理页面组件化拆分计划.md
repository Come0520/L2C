# 销售道具管理页面组件化拆分计划

## 1. 目录结构创建
- 创建 `src/features/products/tools/components/` 目录用于存放所有拆分后的组件

## 2. 状态管理拆分
- 创建 `useToolsPageState.ts` hook，将所有状态管理逻辑从主页面中分离出来
- 包含的状态：activeTab, searchTerm, statusFilter, currentPage, selectedStore, selectedProduct 等
- 包含的模拟数据：salesTools, stockRecords, stockStats 等
- 包含的工具函数：getStatusText, getStatusColor, getRecordTypeText, getRecordTypeBadge 等

## 3. 组件拆分计划

### 3.1 ToolsHeader.tsx
- 包含页面标题和门店选择功能
- 对应原文件第 281-298 行

### 3.2 ToolsTabs.tsx
- 包含导航标签功能
- 对应原文件第 301-338 行

### 3.3 ToolsSearchBar.tsx
- 包含搜索和过滤功能
- 对应原文件第 341-370 行

### 3.4 InventoryTable.tsx
- 包含库存管理表格
- 对应原文件第 373-461 行
- 使用 VirtualizedTableBody 组件实现虚拟滚动

### 3.5 InboundTable.tsx
- 包含入库记录表格
- 对应原文件第 464-511 行
- 使用 VirtualizedTableBody 组件实现虚拟滚动

### 3.6 OutboundTable.tsx
- 包含出库记录表格
- 对应原文件第 514-561 行
- 使用 VirtualizedTableBody 组件实现虚拟滚动

### 3.7 StatsOverview.tsx
- 包含统计与明细功能
- 对应原文件第 564-664 行

### 3.8 ProductDetailModal.tsx
- 包含商品详情弹窗
- 对应原文件第 667-808 行

### 3.9 loading.tsx
- 添加骨架态组件，用于数据加载时显示

## 4. 主页面重构
- 修改 `src/app/products/tools/page.tsx`，将所有拆分后的组件整合起来
- 引入 useToolsPageState hook 管理状态
- 引入各个拆分后的组件
- 实现骨架态加载逻辑

## 5. 验收标准
- 主页面文件 < 150 行
- 长列表使用 VirtualList（数据 > 100 条）
- 包含骨架态加载

## 6. 技术实现要点
- 使用 `@tanstack/react-virtual` 库提供的 VirtualizedTableBody 组件实现虚拟滚动
- 遵循项目现有的组件设计模式和命名规范
- 保持代码的可维护性和可扩展性
- 确保拆分后的组件能够独立工作且易于测试