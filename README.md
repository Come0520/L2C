# L2C (Lead-to-Cash) SaaS System

L2C 是一款面向家居/窗帘行业的全链路业务管理系统，覆盖从线索跟进、报价方案、订单转化、采购委外、测量安装到财务结算的闭环业务流。

## 🚀 核心架构

- **前端/后端**: [Next.js](https://nextjs.org/) (App Router)
- **数据库**: PostgreSQL + [Drizzle ORM](https://orm.drizzle.team/)
- **端到端测试**: [Playwright](https://playwright.dev/)
- **单元测试**: [Vitest](https://vitest.dev/)
- **组件库**: Tailwind CSS + Shadcn UI
- **权限管理**: 基于角色 (RBAC) 的细粒度权限控制

## 📂 模块详情

### 1. 线索管理 (Leads)
- 线索录入、跟进记录、区域管理。
- 销售漏斗转化分析。

### 2. 报价系统 (Quotes)
- **智能计算引擎**: 窗帘/墙纸/墙布等品类自动计算用料与损耗。
- **多模式切换**: 支持快速报价（简单字段）与高级报价模式。
- **版本对比**: 苹果风格的 Side-by-Side 方案对比视图。

### 3. 订单与交付 (Orders & Service)
- **订单生命周期**: 从报价单激活转订单到交付完成。
- **测量/复测**: 师傅端实时录入尺寸，自动同步回报价单修改金额。
- **安装管理**: 工人排班排期，完工验收图片上传。

### 4. 供应链与委外 (Supply Chain & Processing)
- **自动拆单**: 根据规则自动拆分采购单或委外加工单。
- **待采购池**: 支持跨订单合并采购，提升供应链效率。

### 5. 财务管理 (Finance)
- **应收账款 (AR)**: 多阶段收款计划、认领流水。
- **委外结算**: 与加工商的结账单分析。

## 🛠️ 开始使用

### 环境要求
- Node.js 18.x +
- PostgreSQL 15+
- pnpm

### 启动步骤
```bash
# 安装依赖
pnpm install

# 数据库迁移 (如有 Schema 变更)
pnpm db:push

# 启动开发服务器
pnpm dev
```

## 📚 详细文档

- [业务需求文档](./docs/需求.md)
- [报价单核心逻辑](./docs/报价单需求.md)
- [计算算法说明](./docs/数量计算逻辑.md)
- [测试策略](./docs/requirements/test-strategy.md)

---
*Generated by Antigravity - Advanced Agentic Coding Assistant*
