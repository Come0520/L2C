# 工人 (Workers)

## 角色类型
1.  **测量师 (Measurer)**: 负责上门勘测尺寸、记录现场环境。
2.  **安装师 (Installer)**: 负责成品的送货与安装调试。
*(注：同一人可兼任两种角色，通过师傅类型字段标识)*

## 师傅类型 (Worker Type)
系统通过 `worker_type` 字段标识师傅的能力范围：

| 师傅类型 | 代码 | 说明 | 可接任务类型 |
|:---|:---|:---|---|
| **测量师** | `MEASURER` | 仅具备测量技能 | 测量单 |
| **安装师** | `INSTALLER` | 仅具备安装技能 | 安装单 |
| **全能师傅** | `BOTH` | 同时具备测量和安装技能 | 测量单 + 安装单 |
| **非师傅** | `null` | 非师傅角色（如销售、客服） | 无 |

## 技能标签系统 (Skill Tags)
为了更精细地管理师傅能力，系统支持技能标签：

### 技能标签层级结构

技能标签采用**父子层级结构**，支持灵活的技能组合和精准的派单匹配。

```
┌─────────────────────────────────────────────────────────┐
│ 技能标签树                                          │
├─────────────────────────────────────────────────────────┤
│                                                     │
│ ├── MEASURE（测量 - 父标签）                         │
│ │   ├── CURTAIN（窗帘）                            │
│ │   │   └── MEASURE.CURTAIN（窗帘测量）             │
│ │   ├── WALLCLOTH（墙布）                          │
│ │   │   └── MEASURE.WALLCLOTH（墙布测量）           │
│ │   ├── WALLPAPER（墙纸）                          │
│ │   │   └── MEASURE.WALLPAPER（墙纸测量）           │
│ │   └── WALLKICK（墙咔）                           │
│ │       └── MEASURE.WALLKICK（墙咔测量）             │
│                                                     │
│ ├── INSTALL（安装 - 父标签）                          │
│ │   ├── CURTAIN（窗帘）                            │
│ │   │   └── INSTALL.CURTAIN（窗帘安装）              │
│ │   ├── WALLCLOTH（墙布）                          │
│ │   │   └── INSTALL.WALLCLOTH（墙布安装）           │
│ │   ├── WALLPAPER（墙纸）                          │
│ │   │   └── INSTALL.WALLPAPER（墙纸安装）           │
│ │   └── WALLKICK（墙咔）                           │
│ │       └── INSTALL.WALLKICK（墙咔安装）             │
│                                                     │
│ ├── REPAIR（维修 - 父标签）                          │
│ │   └── REPAIR（维修）                              │
│                                                     │
│ └── CLEAN（清洗 - 父标签）                          │
│     └── CLEAN（清洗）                                │
│                                                     │
└─────────────────────────────────────────────────────────┘
```

### 技能标签编码规则

```
标签编码 = {父标签}.{子标签}
```

| 父标签 | 子标签 | 完整编码 | 说明 |
|:---|:---|:---|---|
| MEASURE | CURTAIN | `MEASURE.CURTAIN` | 窗帘测量 |
| MEASURE | WALLCLOTH | `MEASURE.WALLCLOTH` | 墙布测量 |
| MEASURE | WALLPAPER | `MEASURE.WALLPAPER` | 墙纸测量 |
| INSTALL | CURTAIN | `INSTALL.CURTAIN` | 窗帘安装 |
| INSTALL | WALLCLOTH | `INSTALL.WALLCLOTH` | 墙布安装 |
| INSTALL | WALLPAPER | `INSTALL.WALLPAPER` | 墙纸安装 |
| REPAIR | - | `REPAIR` | 维修 |
| CLEAN | - | `CLEAN` | 清洗 |

### 技能标签属性

每个技能标签包含以下属性：

| 属性 | 说明 |
|:---|---|
| **标签编码** | 唯一标识（如：MEASURE.CURTAIN） |
| **标签名称** | 显示名称（如：窗帘测量） |
| **父标签** | 所属父标签（如：MEASURE） |
| **层级** | 1=父标签，2=子标签 |
| **品类** | 所属品类（CURTAIN/WALLCLOTH/WALLPAPER） |
| **技能类型** | 技能类型（MEASURE/INSTALL/REPAIR/CLEAN） |
| **是否启用** | 标签是否可用 |
| **是否系统预设** | 是否为系统预设标签 |
| **排序** | 显示顺序 |

### 用户技能属性

师傅的技能包含以下属性：

| 属性 | 说明 |
|:---|---|
| **技能标签** | 关联的技能标签 |
| **是否主要技能** | 是否为主要技能 |
| **熟练度** | 熟练度评分（1-5星） |
| **认证时间** | 技能认证时间 |

### 技能标签与师傅类型的关系
- **师傅类型优先**：派单时首先检查 `worker_type` 是否匹配
- **技能标签辅助**：如果 `worker_type = BOTH`，则进一步检查技能标签
- **灵活扩展**：一个师傅可以拥有多个技能标签，支持"全才"和"专项"师傅
- **层级查询**：可以按父标签查询（如：查询所有具备测量技能的师傅）

## 核心职责
*   **执行任务**: 接收系统派发或销售指派的工单。
*   **现场交付**:
    *   准确测量并拍照留档。
    *   按标准安装并清理现场。
*   **数据录入**: 通过小程序端录入数据、上传现场照片/验收单。
*   **工费确认**: 接单时确认工费金额，支持讨价还价。

## 协作关系
*   **接受调度**:
    *   直接接受熟悉的销售指派。
    *   接受派单员的统一调度与调价协商。
*   **交付反馈**: 遇现场无法安装或测量问题，即时反馈给派单员或销售。
*   **技能匹配**: 派单员根据任务品类和师傅技能标签，选择最合适的师傅。
