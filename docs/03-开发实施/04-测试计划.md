# 功能验证测试 - 手动测试清单

## 1. 测试目的
验证系统核心业务流程的正确性和完整性，包括线索管理、销售单状态流转、积分系统、权限控制和产品管理等模块。

## 2. 测试环境
- **测试URL**: http://localhost:3000
- **浏览器**: Chrome/Edge/Firefox 最新版本
- **测试账号**: 见测试数据部分

## 3. 测试数据

### 3.1 测试用户
| 角色 | 用户名 | 密码 | 权限 |
|-----|--------|------|------|
| 驻店销售 | sales1@example.com | password123 | 线索创建、跟踪 |
| 销售负责人 | manager1@example.com | password123 | 线索分配、审批 |
| 测量人员 | measurer1@example.com | password123 | 测量任务 |
| 安装人员 | installer1@example.com | password123 | 安装任务 |
| 财务人员 | finance1@example.com | password123 | 回款确认 |
| 管理员 | admin@example.com | password123 | 所有权限 |

### 3.2 测试产品
| 产品名称 | 型号 | 价格 | 库存 |
|---------|------|------|------|
| 窗帘A | CUR-001 | 1999 | 100 |
| 窗帘B | CUR-002 | 2999 | 50 |
| 墙布A | WALL-001 | 999 | 200 |
| 墙纸A | WALLPAPER-001 | 499 | 300 |

## 4. 测试模块和场景

### 4.1 线索管理流程

#### 4.1.1 创建线索(驻店销售角色)
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| LEA-001 | 驻店销售创建线索 | 1. 登录系统(驻店销售账号)
2. 进入线索管理页面
3. 点击"新建线索"按钮
4. 填写客户信息：姓名、电话、地址、需求等
5. 点击"保存"按钮 | 线索创建成功，显示在线索列表中 | | |

#### 4.1.2 分配线索(销售负责人角色)
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| LEA-002 | 销售负责人分配线索 | 1. 登录系统(销售负责人账号)
2. 进入线索管理页面
3. 选择待分配的线索
4. 点击"分配"按钮
5. 选择销售人员
6. 点击"确认"按钮 | 线索分配成功，状态更新为"待跟踪" | | |

#### 4.1.3 跟踪并添加标签
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| LEA-003 | 销售人员跟踪线索 | 1. 登录系统(驻店销售账号)
2. 进入线索详情页面
3. 点击"跟踪"按钮
4. 添加跟踪记录
5. 点击"添加标签"按钮
6. 选择或创建标签
7. 点击"保存"按钮 | 跟踪记录和标签添加成功，显示在线索详情中 | | |

#### 4.1.4 上传预报价(验证90天有效期)
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| LEA-004 | 上传预报价 | 1. 进入线索详情页面
2. 点击"上传预报价"按钮
3. 选择报价文件
4. 填写报价信息
5. 点击"保存"按钮
6. 验证预报价显示90天有效期 | 预报价上传成功，显示90天有效期 | | |

#### 4.1.5 草签转订单
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| LEA-005 | 草签转订单 | 1. 进入线索详情页面
2. 点击"草签转订单"按钮
3. 填写订单信息
4. 点击"确认"按钮 | 订单创建成功，线索状态更新为"已转化" | | |

### 4.2 销售单25状态流转

#### 4.2.1 销售单完整流转测试
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| ORD-001 | 预算中 → 等待推单 | 1. 登录系统(销售账号)
2. 进入销售单页面
3. 选择预算中状态的销售单
4. 上传预算报价单
5. 提交审核 | 销售单状态更新为"等待推单" | | |
| ORD-002 | 等待推单 → 待测量 | 1. 登录系统(远程销售账号)
2. 进入销售单页面
3. 选择等待推单状态的销售单
4. 点击"推单"按钮
5. 填写推单信息 | 销售单状态更新为"待测量" | | |
| ORD-003 | 待测量 → 测量中-待确认 | 1. 登录系统(测量人员账号)
2. 进入测量任务页面
3. 选择待测量状态的销售单
4. 完成测量任务
5. 提交测量报告 | 销售单状态更新为"测量中-待确认" | | |
| ORD-004 | 测量中-待确认 → 方案待确认 | 1. 登录系统(销售账号)
2. 进入销售单页面
3. 选择测量中-待确认状态的销售单
4. 确认测量数据
5. 生成方案 | 销售单状态更新为"方案待确认" | | |
| ORD-005 | 方案待确认 → 待下单 | 1. 登录系统(客户账号)
2. 进入销售单页面
3. 选择方案待确认状态的销售单
4. 确认方案
5. 点击"确认下单"按钮 | 销售单状态更新为"待下单" | | |
| ORD-006 | 待下单 → 生产中 | 1. 登录系统(销售负责人账号)
2. 进入销售单页面
3. 选择待下单状态的销售单
4. 点击"确认下单"按钮 | 销售单状态更新为"生产中" | | |
| ORD-007 | 生产中 → 备货完成 | 1. 登录系统(生产人员账号)
2. 进入生产管理页面
3. 选择生产中状态的销售单
4. 点击"生产完成"按钮 | 销售单状态更新为"备货完成" | | |
| ORD-008 | 备货完成 → 待发货 | 1. 登录系统(仓库人员账号)
2. 进入库存管理页面
3. 选择备货完成状态的销售单
4. 点击"备货确认"按钮 | 销售单状态更新为"待发货" | | |
| ORD-009 | 待发货 → 已发货 | 1. 登录系统(物流人员账号)
2. 进入物流管理页面
3. 选择待发货状态的销售单
4. 填写物流信息
5. 点击"发货"按钮 | 销售单状态更新为"已发货" | | |
| ORD-010 | 已发货 → 安装中-待分配 | 1. 登录系统(服务调度账号)
2. 进入安装管理页面
3. 选择已发货状态的销售单
4. 点击"分配安装任务"按钮 | 销售单状态更新为"安装中-待分配" | | |
| ORD-011 | 安装中-待分配 → 安装中-分配中 | 1. 登录系统(服务调度账号)
2. 进入安装管理页面
3. 选择安装中-待分配状态的销售单
4. 选择安装人员
5. 点击"分配"按钮 | 销售单状态更新为"安装中-分配中" | | |
| ORD-012 | 安装中-分配中 → 安装中-待上门 | 1. 登录系统(安装人员账号)
2. 进入安装任务页面
3. 选择安装中-分配中状态的任务
4. 点击"接受任务"按钮 | 销售单状态更新为"安装中-待上门" | | |
| ORD-013 | 安装中-待上门 → 安装中-待确认 | 1. 登录系统(安装人员账号)
2. 进入安装任务页面
3. 选择安装中-待上门状态的任务
4. 完成安装
5. 提交安装报告 | 销售单状态更新为"安装中-待确认" | | |
| ORD-014 | 安装中-待确认 → 已交付 | 1. 登录系统(销售账号)
2. 进入销售单页面
3. 选择安装中-待确认状态的销售单
4. 确认安装结果
5. 点击"确认交付"按钮 | 销售单状态更新为"已交付" | | |
| ORD-015 | 已交付 → 待对账 | 1. 登录系统(财务账号)
2. 进入财务管理页面
3. 选择已交付状态的销售单
4. 点击"开始对账"按钮 | 销售单状态更新为"待对账" | | |
| ORD-016 | 待对账 → 待开发票 | 1. 登录系统(财务账号)
2. 进入财务管理页面
3. 选择待对账状态的销售单
4. 完成对账
5. 点击"确认对账"按钮 | 销售单状态更新为"待开发票" | | |
| ORD-017 | 待开发票 → 待回款 | 1. 登录系统(财务账号)
2. 进入财务管理页面
3. 选择待开发票状态的销售单
4. 点击"开具发票"按钮
5. 填写发票信息 | 销售单状态更新为"待回款" | | |
| ORD-018 | 待回款 → 已完成 | 1. 登录系统(财务账号)
2. 进入财务管理页面
3. 选择待回款状态的销售单
4. 点击"确认回款"按钮 | 销售单状态更新为"已完成" | | |

### 4.3 积分系统

#### 4.3.1 验证线索创建积分发放
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| POI-001 | 线索创建积分发放 | 1. 登录系统(销售账号)
2. 创建新线索
3. 进入积分管理页面
4. 查看积分记录 | 积分记录中显示线索创建奖励+5分 | | |

#### 4.3.2 验证销售单完成积分
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| POI-002 | 销售单完成积分 | 1. 登录系统(销售账号)
2. 完成一个销售单(按照销售单流转流程)
3. 进入积分管理页面
4. 查看积分记录 | 积分记录中显示销售单完成奖励+30分 | | |

#### 4.3.3 验证罗莱好伙伴在途积分
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| POI-003 | 罗莱好伙伴在途积分 | 1. 登录系统(销售账号)
2. 进入积分管理页面
3. 查看积分明细
4. 查找罗莱好伙伴相关积分 | 罗莱好伙伴相关积分显示为"在途"状态 | | |

#### 4.3.4 积分商城兑换流程
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| POI-004 | 积分商城兑换 | 1. 登录系统
2. 进入积分商城页面
3. 选择可兑换商品
4. 点击"兑换"按钮
5. 确认兑换信息
6. 查看兑换记录 | 兑换成功，积分扣除，兑换记录生成 | | |

#### 4.3.5 订单金额计算积分系数
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| POI-005 | 订单金额计算积分 | 1. 登录系统(销售账号)
2. 创建不同金额的销售单
3. 完成销售单
4. 查看积分记录 | 积分计算符合系数规则(每元0.01积分) | | |

### 4.4 权限控制

#### 4.4.1 8种角色权限验证
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PER-001 | 驻店销售权限 | 1. 登录系统(驻店销售账号)
2. 验证可访问的页面和功能
3. 尝试访问管理员功能 | 只能访问销售相关功能，无法访问管理员功能 | | |
| PER-002 | 远程销售权限 | 1. 登录系统(远程销售账号)
2. 验证可访问的页面和功能
3. 尝试访问财务功能 | 只能访问销售相关功能，无法访问财务功能 | | |
| PER-003 | 销售负责人权限 | 1. 登录系统(销售负责人账号)
2. 验证可访问的页面和功能
3. 尝试访问安装任务管理 | 可访问销售管理功能，无法访问安装任务 | | |
| PER-004 | 服务调度权限 | 1. 登录系统(服务调度账号)
2. 验证可访问的页面和功能
3. 尝试访问销售线索管理 | 可访问安装调度功能，无法访问销售线索 | | |
| PER-005 | 测量人员权限 | 1. 登录系统(测量人员账号)
2. 验证可访问的页面和功能
3. 尝试访问销售单管理 | 只能访问测量任务，无法访问销售单管理 | | |
| PER-006 | 安装人员权限 | 1. 登录系统(安装人员账号)
2. 验证可访问的页面和功能
3. 尝试访问库存管理 | 只能访问安装任务，无法访问库存管理 | | |
| PER-007 | 财务人员权限 | 1. 登录系统(财务人员账号)
2. 验证可访问的页面和功能
3. 尝试访问销售管理 | 只能访问财务功能，无法访问销售管理 | | |
| PER-008 | 管理员权限 | 1. 登录系统(管理员账号)
2. 验证可访问的页面和功能 | 可访问所有功能 | | |

### 4.5 产品管理

#### 4.5.1 产品创建
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PRO-001 | 创建新产品 | 1. 登录系统(管理员账号)
2. 进入产品管理页面
3. 点击"创建产品"按钮
4. 填写产品信息
5. 点击"保存"按钮 | 产品创建成功，显示在产品列表中 | | |

#### 4.5.2 产品编辑
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PRO-002 | 编辑产品信息 | 1. 登录系统(管理员账号)
2. 进入产品管理页面
3. 选择一个产品
4. 点击"编辑"按钮
5. 修改产品信息
6. 点击"保存"按钮 | 产品信息更新成功 | | |

#### 4.5.3 产品删除
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PRO-003 | 删除产品 | 1. 登录系统(管理员账号)
2. 进入产品管理页面
3. 选择一个产品
4. 点击"删除"按钮
5. 确认删除 | 产品删除成功，从列表中移除 | | |

#### 4.5.4 产品查询
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PRO-004 | 查询产品 | 1. 登录系统
2. 进入产品管理页面
3. 使用搜索框搜索产品
4. 使用筛选条件筛选产品 | 能准确查询到目标产品 | | |

#### 4.5.5 库存管理
| 测试ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 备注 |
|--------|---------|---------|----------|----------|------|
| PRO-005 | 库存更新 | 1. 登录系统(管理员账号)
2. 进入库存管理页面
3. 选择一个产品
4. 点击"更新库存"按钮
5. 修改库存数量
6. 点击"保存"按钮 | 库存更新成功，显示最新库存数量 | | |

## 5. 测试执行记录

| 测试ID | 执行日期 | 执行人员 | 测试结果 | 备注 |
|--------|---------|----------|----------|------|
| | | | | |
| | | | | |
| | | | | |

## 6. 缺陷记录

| 缺陷ID | 测试ID | 缺陷描述 | 严重程度 | 优先级 | 状态 | 修复日期 |
|--------|--------|---------|----------|--------|------|----------|
| | | | | | | |
| | | | | | | |
| | | | | | | |

## 7. 测试总结

### 7.1 测试完成情况
- [ ] 线索管理流程测试 (5/5)
- [ ] 销售单25状态流转测试 (25/25)
- [ ] 积分系统测试 (5/5)
- [ ] 权限控制测试 (8/8)
- [ ] 产品管理测试 (5/5)

### 7.2 测试结论

### 7.3 改进建议

## 8. 附录

### 8.1 销售单25状态列表
1. pending_assignment - 待分配
2. pending_tracking - 待跟踪
3. tracking - 跟踪中
4. draft_signed - 草签
5. expired - 已失效
6. pending_measurement - 待测量
7. measuring_pending_assignment - 测量中-待分配
8. measuring_assigning - 测量中-分配中
9. measuring_pending_visit - 测量中-待上门
10. measuring_pending_confirmation - 测量中-待确认
11. plan_pending_confirmation - 方案待确认
12. pending_push - 待推单
13. pending_order - 待下单
14. in_production - 生产中
15. stock_prepared - 备货完成
16. pending_shipment - 待发货
17. shipped - 已发货
18. installing_pending_assignment - 安装中-待分配
19. installing_assigning - 安装中-分配中
20. installing_pending_visit - 安装中-待上门
21. installing_pending_confirmation - 安装中-待确认
22. delivered - 已交付
23. pending_reconciliation - 待对账
24. pending_invoice - 待开发票
25. pending_payment - 待回款
26. completed - 已完成
27. cancelled - 已取消
28. suspended - 暂停
29. exception - 异常

### 8.2 权限矩阵
| 功能 | 驻店销售 | 远程销售 | 销售负责人 | 服务调度 | 测量人员 | 安装人员 | 财务人员 | 管理员 |
|-----|----------|----------|------------|----------|----------|----------|----------|--------|
| 线索创建 | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ |
| 线索分配 | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ |
| 测量任务 | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ❌ | ✅ |
| 安装任务 | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ | ✅ |
| 财务确认 | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| 产品管理 | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |

---

**测试计划版本**: v1.0
**制定日期**: 2025-12-03
**制定人**: 测试团队
**审批人**: 技术负责人
