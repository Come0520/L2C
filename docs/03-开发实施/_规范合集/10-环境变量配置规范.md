# ç½—è±L2Cé”€å”®ç®¡ç†ç³»ç»Ÿ - ç¯å¢ƒå˜é‡é…ç½®è§„èŒƒ

## ğŸ¯ è§„èŒƒç›®æ ‡

### ä¸»è¦ç›®æ ‡
- **å®‰å…¨æ€§**ï¼šé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œç¡®ä¿é…ç½®å®‰å…¨
- **ä¸€è‡´æ€§**ï¼šç»Ÿä¸€ä¸åŒç¯å¢ƒçš„é…ç½®ç®¡ç†æ–¹å¼
- **å¯ç»´æŠ¤æ€§**ï¼šä¾¿äºé…ç½®çš„ç»´æŠ¤å’Œæ›´æ–°
- **å¯è¿½æº¯æ€§**ï¼šé…ç½®å˜æ›´æœ‰è®°å½•å¯æŸ¥
- **ç¯å¢ƒéš”ç¦»**ï¼šä¸åŒç¯å¢ƒé…ç½®å®Œå…¨éš”ç¦»

## ğŸ“‹ ç¯å¢ƒå˜é‡å‘½åè§„èŒƒ

### å‘½ååŸåˆ™
1. **å…¨å¤§å†™**ï¼šä½¿ç”¨SCREAMING_SNAKE_CASEæ ¼å¼
2. **è¯­ä¹‰åŒ–**ï¼šåç§°åº”æ¸…æ™°è¡¨è¾¾ç”¨é€”
3. **åˆ†ç»„å‰ç¼€**ï¼šä½¿ç”¨å‰ç¼€å¯¹ç›¸å…³é…ç½®åˆ†ç»„
4. **é¿å…ç¼©å†™**ï¼šé™¤éæ˜¯å¹¿æ³›è®¤çŸ¥çš„ç¼©å†™

### åˆ†ç»„å‰ç¼€è§„èŒƒ
```bash
# åº”ç”¨åŸºç¡€é…ç½®
APP_NAME=luolai-l2c-sales
APP_VERSION=1.0.0
APP_ENV=development
APP_PORT=3000
APP_HOST=localhost
APP_DEBUG=true

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=luolai_l2c_sales
DB_USERNAME=root
DB_PASSWORD=your_password
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_PREFIX=l2c:

# JWTè®¤è¯é…ç½®
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# æ–‡ä»¶å­˜å‚¨é…ç½®
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
STORAGE_MAX_SIZE=10485760

# é‚®ä»¶æœåŠ¡é…ç½®
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=noreply@example.com
MAIL_PASSWORD=your_mail_password
MAIL_FROM_ADDRESS=noreply@example.com
MAIL_FROM_NAME=ç½—è±L2Cç³»ç»Ÿ

# çŸ­ä¿¡æœåŠ¡é…ç½®
SMS_PROVIDER=aliyun
SMS_ACCESS_KEY_ID=your_access_key
SMS_ACCESS_KEY_SECRET=your_access_secret
SMS_SIGN_NAME=ç½—è±L2C
SMS_TEMPLATE_CODE=SMS_123456789

# ç¬¬ä¸‰æ–¹APIé…ç½®
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_alipay_private_key

# æ—¥å¿—é…ç½®
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=30

# ç›‘æ§é…ç½®
MONITOR_ENABLED=true
MONITOR_ENDPOINT=http://localhost:8200/metrics
SENTRY_DSN=your_sentry_dsn
```

## ğŸ”’ æ•æ„Ÿä¿¡æ¯ç®¡ç†

### æ•æ„Ÿä¿¡æ¯åˆ†ç±»
```bash
# ğŸ”´ é«˜æ•æ„Ÿä¿¡æ¯ï¼ˆç»ä¸èƒ½æäº¤åˆ°ä»£ç åº“ï¼‰
DB_PASSWORD=your_database_password
REDIS_PASSWORD=your_redis_password
JWT_SECRET=your_jwt_secret_key
MAIL_PASSWORD=your_mail_password
SMS_ACCESS_KEY_SECRET=your_sms_secret
WECHAT_APP_SECRET=your_wechat_secret
ALIPAY_PRIVATE_KEY=your_alipay_private_key
ENCRYPTION_KEY=your_encryption_key

# ğŸŸ¡ ä¸­æ•æ„Ÿä¿¡æ¯ï¼ˆéœ€è¦ç¯å¢ƒéš”ç¦»ï¼‰
DB_HOST=production_db_host
REDIS_HOST=production_redis_host
MAIL_HOST=production_mail_host
SMS_ACCESS_KEY_ID=your_access_key_id
WECHAT_APP_ID=your_wechat_app_id

# ğŸŸ¢ ä½æ•æ„Ÿä¿¡æ¯ï¼ˆå¯ä»¥æœ‰é»˜è®¤å€¼ï¼‰
APP_PORT=3000
LOG_LEVEL=info
REDIS_DB=0
DB_CHARSET=utf8mb4
```

### æ•æ„Ÿä¿¡æ¯å­˜å‚¨æ–¹æ¡ˆ
```bash
# 1. ä½¿ç”¨.envæ–‡ä»¶ï¼ˆæœ¬åœ°å¼€å‘ï¼‰
# .env.localï¼ˆä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼‰
DB_PASSWORD=local_dev_password
JWT_SECRET=local_dev_jwt_secret

# 2. ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
export DB_PASSWORD="production_password"
export JWT_SECRET="production_jwt_secret"

# 3. ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
# AWS Secrets Manager, Azure Key Vault, HashiCorp Vaultç­‰
```

## ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

### ç›®å½•ç»“æ„
```
config/
â”œâ”€â”€ environments/              # ç¯å¢ƒé…ç½®ç›®å½•
â”‚   â”œâ”€â”€ development.env       # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ testing.env          # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ staging.env          # é¢„å‘å¸ƒç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ production.env       # ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆæ¨¡æ¿ï¼‰
â”œâ”€â”€ defaults/                 # é»˜è®¤é…ç½®
â”‚   â”œâ”€â”€ app.js               # åº”ç”¨é»˜è®¤é…ç½®
â”‚   â”œâ”€â”€ database.js          # æ•°æ®åº“é»˜è®¤é…ç½®
â”‚   â””â”€â”€ redis.js             # Redisé»˜è®¤é…ç½®
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ .env.local.example       # æœ¬åœ°ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ config.js                # é…ç½®åŠ è½½å™¨
```

### é…ç½®åŠ è½½å™¨å®ç°
```javascript
// config/config.js
const path = require('path');
const dotenv = require('dotenv');

class ConfigManager {
  constructor() {
    this.loadEnvironmentConfig();
  }

  loadEnvironmentConfig() {
    const env = process.env.NODE_ENV || 'development';
    
    // åŠ è½½ç¯å¢ƒç‰¹å®šçš„é…ç½®æ–‡ä»¶
    const envFile = path.join(__dirname, 'environments', `${env}.env`);
    dotenv.config({ path: envFile });
    
    // åŠ è½½æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    const localFile = path.join(__dirname, '..', '.env.local');
    dotenv.config({ path: localFile });
    
    // éªŒè¯å¿…éœ€çš„ç¯å¢ƒå˜é‡
    this.validateRequiredVariables();
  }

  validateRequiredVariables() {
    const required = [
      'APP_NAME',
      'APP_ENV',
      'DB_HOST',
      'DB_NAME',
      'DB_USERNAME',
      'JWT_SECRET'
    ];

    const missing = required.filter(key => !process.env[key]);
    
    if (missing.length > 0) {
      throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
    }
  }

  get(key, defaultValue = null) {
    return process.env[key] || defaultValue;
  }

  getBoolean(key, defaultValue = false) {
    const value = process.env[key];
    if (value === undefined) return defaultValue;
    return value.toLowerCase() === 'true';
  }

  getNumber(key, defaultValue = 0) {
    const value = process.env[key];
    if (value === undefined) return defaultValue;
    const parsed = parseInt(value, 10);
    return isNaN(parsed) ? defaultValue : parsed;
  }

  // è·å–æ•°æ®åº“é…ç½®
  getDatabaseConfig() {
    return {
      host: this.get('DB_HOST', 'localhost'),
      port: this.getNumber('DB_PORT', 3306),
      database: this.get('DB_NAME'),
      username: this.get('DB_USERNAME'),
      password: this.get('DB_PASSWORD'),
      charset: this.get('DB_CHARSET', 'utf8mb4'),
      timezone: this.get('DB_TIMEZONE', '+08:00'),
      logging: this.getBoolean('DB_LOGGING', false)
    };
  }

  // è·å–Redisé…ç½®
  getRedisConfig() {
    return {
      host: this.get('REDIS_HOST', 'localhost'),
      port: this.getNumber('REDIS_PORT', 6379),
      password: this.get('REDIS_PASSWORD'),
      db: this.getNumber('REDIS_DB', 0),
      keyPrefix: this.get('REDIS_PREFIX', 'l2c:')
    };
  }

  // è·å–JWTé…ç½®
  getJWTConfig() {
    return {
      secret: this.get('JWT_SECRET'),
      expiresIn: this.get('JWT_EXPIRES_IN', '7d'),
      refreshExpiresIn: this.get('JWT_REFRESH_EXPIRES_IN', '30d')
    };
  }
}

module.exports = new ConfigManager();
```

## ğŸŒ ç¯å¢ƒé…ç½®ç®¡ç†

### å¼€å‘ç¯å¢ƒé…ç½®
```bash
# config/environments/development.env
NODE_ENV=development
APP_ENV=development
APP_DEBUG=true
APP_PORT=3000

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=luolai_l2c_sales_dev
DB_USERNAME=root
DB_LOGGING=true

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=3379
REDIS_DB=0

# æ—¥å¿—é…ç½®
LOG_LEVEL=debug
LOG_FILE_PATH=./logs/development

# é‚®ä»¶é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨æµ‹è¯•é‚®ç®±ï¼‰
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_mailtrap_username
MAIL_FROM_ADDRESS=dev@luolai-l2c.com
```

### æµ‹è¯•ç¯å¢ƒé…ç½®
```bash
# config/environments/testing.env
NODE_ENV=test
APP_ENV=testing
APP_DEBUG=false
APP_PORT=4000

# æ•°æ®åº“é…ç½®
DB_HOST=test-db.internal
DB_PORT=5433
DB_NAME=luolai_l2c_sales_test
DB_USERNAME=test_user

# Redisé…ç½®
REDIS_HOST=test-redis.internal
REDIS_PORT=4379
REDIS_DB=1

# æ—¥å¿—é…ç½®
LOG_LEVEL=warn
LOG_FILE_PATH=./logs/testing

# ç¦ç”¨å¤–éƒ¨æœåŠ¡
MAIL_ENABLED=false
SMS_ENABLED=false
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿
```bash
# config/environments/production.env.template
NODE_ENV=production
APP_ENV=production
APP_DEBUG=false
APP_PORT=8000

# æ•°æ®åº“é…ç½®ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡ï¼‰
DB_HOST=${DB_HOST}
DB_PORT=${DB_PORT}
DB_NAME=${DB_NAME}
DB_USERNAME=${DB_USERNAME}
DB_PASSWORD=${DB_PASSWORD}

# Redisé…ç½®
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_PASSWORD=${REDIS_PASSWORD}

# å®‰å…¨é…ç½®
JWT_SECRET=${JWT_SECRET}
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# æ—¥å¿—é…ç½®
LOG_LEVEL=error
LOG_FILE_PATH=/var/log/luolai-l2c

# ç›‘æ§é…ç½®
MONITOR_ENABLED=true
SENTRY_DSN=${SENTRY_DSN}
```

## ğŸ”§ é…ç½®éªŒè¯å’Œç±»å‹è½¬æ¢

### é…ç½®éªŒè¯å™¨
```javascript
// config/validator.js
const Joi = require('joi');

const configSchema = Joi.object({
  // åº”ç”¨é…ç½®
  APP_NAME: Joi.string().required(),
  APP_ENV: Joi.string().valid('development', 'testing', 'staging', 'production').required(),
  APP_PORT: Joi.number().port().default(3000),
  APP_DEBUG: Joi.boolean().default(false),

  // æ•°æ®åº“é…ç½®
  DB_HOST: Joi.string().required(),
  DB_PORT: Joi.number().port().default(3306),
  DB_NAME: Joi.string().required(),
  DB_USERNAME: Joi.string().required(),
  DB_PASSWORD: Joi.string().when('APP_ENV', {
    is: 'production',
    then: Joi.required(),
    otherwise: Joi.optional()
  }),

  // Redisé…ç½®
  REDIS_HOST: Joi.string().default('localhost'),
  REDIS_PORT: Joi.number().port().default(6379),
  REDIS_PASSWORD: Joi.string().optional(),
  REDIS_DB: Joi.number().min(0).max(15).default(0),

  // JWTé…ç½®
  JWT_SECRET: Joi.string().min(32).required(),
  JWT_EXPIRES_IN: Joi.string().default('7d'),

  // é‚®ä»¶é…ç½®
  MAIL_HOST: Joi.string().when('MAIL_ENABLED', {
    is: true,
    then: Joi.required(),
    otherwise: Joi.optional()
  }),
  MAIL_PORT: Joi.number().port().default(587),
  MAIL_USERNAME: Joi.string().email().optional(),
  MAIL_PASSWORD: Joi.string().optional(),

  // æ—¥å¿—é…ç½®
  LOG_LEVEL: Joi.string().valid('error', 'warn', 'info', 'debug').default('info'),
  LOG_FILE_PATH: Joi.string().default('./logs')
});

function validateConfig() {
  const { error, value } = configSchema.validate(process.env, {
    allowUnknown: true,
    stripUnknown: false
  });

  if (error) {
    throw new Error(`Configuration validation error: ${error.message}`);
  }

  return value;
}

module.exports = { validateConfig, configSchema };
```

## ğŸ“ é…ç½®æ–‡æ¡£å’Œç¤ºä¾‹

### .env.example æ–‡ä»¶
```bash
# ç½—è±L2Cé”€å”®ç®¡ç†ç³»ç»Ÿ - ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
# å¤åˆ¶æ­¤æ–‡ä»¶ä¸º .env.local å¹¶å¡«å…¥å®é™…å€¼

# ================================
# åº”ç”¨åŸºç¡€é…ç½®
# ================================
APP_NAME=luolai-l2c-sales
APP_VERSION=1.0.0
APP_ENV=development
APP_PORT=3000
APP_HOST=localhost
APP_DEBUG=true

# ================================
# æ•°æ®åº“é…ç½®
# ================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=luolai_l2c_sales
DB_USERNAME=root
DB_PASSWORD=your_database_password
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00
DB_LOGGING=false

# ================================
# Redisç¼“å­˜é…ç½®
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_PREFIX=l2c:

# ================================
# JWTè®¤è¯é…ç½®
# ================================
JWT_SECRET=your_jwt_secret_key_at_least_32_characters
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ================================
# æ–‡ä»¶å­˜å‚¨é…ç½®
# ================================
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
STORAGE_MAX_SIZE=10485760

# ================================
# é‚®ä»¶æœåŠ¡é…ç½®
# ================================
MAIL_ENABLED=true
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USERNAME=noreply@example.com
MAIL_PASSWORD=your_mail_password
MAIL_FROM_ADDRESS=noreply@example.com
MAIL_FROM_NAME=ç½—è±L2Cç³»ç»Ÿ

# ================================
# çŸ­ä¿¡æœåŠ¡é…ç½®
# ================================
SMS_ENABLED=true
SMS_PROVIDER=aliyun
SMS_ACCESS_KEY_ID=your_access_key_id
SMS_ACCESS_KEY_SECRET=your_access_key_secret
SMS_SIGN_NAME=ç½—è±L2C
SMS_TEMPLATE_CODE=SMS_123456789

# ================================
# ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®
# ================================
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_alipay_private_key

# ================================
# æ—¥å¿—é…ç½®
# ================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=30
LOG_DATE_PATTERN=YYYY-MM-DD

# ================================
# ç›‘æ§å’Œé”™è¯¯è¿½è¸ª
# ================================
MONITOR_ENABLED=true
MONITOR_ENDPOINT=http://localhost:8200/metrics
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development

# ================================
# å®‰å…¨é…ç½®
# ================================
CORS_ORIGIN=http://localhost:3000
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
ENCRYPTION_KEY=your_encryption_key_32_characters
```

## ğŸš€ æœ€ä½³å®è·µ

### 1. é…ç½®åŠ è½½é¡ºåº
```javascript
// æ¨èçš„é…ç½®åŠ è½½é¡ºåº
// 1. é»˜è®¤é…ç½®
// 2. ç¯å¢ƒç‰¹å®šé…ç½®æ–‡ä»¶
// 3. .env.local æ–‡ä»¶
// 4. ç³»ç»Ÿç¯å¢ƒå˜é‡
// 5. å‘½ä»¤è¡Œå‚æ•°

const config = {
  ...defaultConfig,
  ...environmentConfig,
  ...localConfig,
  ...process.env,
  ...commandLineArgs
};
```

### 2. é…ç½®çƒ­é‡è½½
```javascript
// config/hot-reload.js
const chokidar = require('chokidar');
const path = require('path');

class ConfigHotReload {
  constructor(configManager) {
    this.configManager = configManager;
    this.setupWatcher();
  }

  setupWatcher() {
    const configPath = path.join(__dirname, 'environments');
    
    chokidar.watch(configPath).on('change', (filePath) => {
      console.log(`Configuration file changed: ${filePath}`);
      this.reloadConfig();
    });
  }

  reloadConfig() {
    try {
      this.configManager.reload();
      console.log('Configuration reloaded successfully');
    } catch (error) {
      console.error('Failed to reload configuration:', error.message);
    }
  }
}

module.exports = ConfigHotReload;
```

### 3. é…ç½®åŠ å¯†
```javascript
// utils/config-encryption.js
const crypto = require('crypto');

class ConfigEncryption {
  constructor(encryptionKey) {
    this.algorithm = 'aes-256-gcm';
    this.key = crypto.scryptSync(encryptionKey, 'salt', 32);
  }

  encrypt(text) {
    const iv = crypto.randomBytes(16);
    const cipher = crypto.createCipher(this.algorithm, this.key, iv);
    
    let encrypted = cipher.update(text, 'utf8', 'hex');
    encrypted += cipher.final('hex');
    
    const authTag = cipher.getAuthTag();
    
    return {
      encrypted,
      iv: iv.toString('hex'),
      authTag: authTag.toString('hex')
    };
  }

  decrypt(encryptedData) {
    const { encrypted, iv, authTag } = encryptedData;
    const decipher = crypto.createDecipher(
      this.algorithm, 
      this.key, 
      Buffer.from(iv, 'hex')
    );
    
    decipher.setAuthTag(Buffer.from(authTag, 'hex'));
    
    let decrypted = decipher.update(encrypted, 'hex', 'utf8');
    decrypted += decipher.final('utf8');
    
    return decrypted;
  }
}

module.exports = ConfigEncryption;
```

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. ç‰ˆæœ¬æ§åˆ¶å®‰å…¨
```bash
# .gitignore å¿…é¡»åŒ…å«
.env
.env.local
.env.*.local
config/environments/production.env
secrets/
*.key
*.pem
```

### 2. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# ä½¿ç”¨ç¯å¢ƒå˜é‡è€Œä¸æ˜¯æ–‡ä»¶
export DB_PASSWORD="$(cat /run/secrets/db_password)"
export JWT_SECRET="$(cat /run/secrets/jwt_secret)"

# æˆ–ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡
export DB_PASSWORD="$(aws secretsmanager get-secret-value --secret-id prod/db/password --query SecretString --output text)"
```

### 3. é…ç½®å®¡è®¡
```javascript
// utils/config-audit.js
class ConfigAudit {
  static logConfigAccess(key, value, source) {
    const maskedValue = this.maskSensitiveValue(key, value);
    console.log(`Config accessed: ${key}=${maskedValue} from ${source}`);
  }

  static maskSensitiveValue(key, value) {
    const sensitiveKeys = ['PASSWORD', 'SECRET', 'KEY', 'TOKEN'];
    const isSensitive = sensitiveKeys.some(sensitive => 
      key.toUpperCase().includes(sensitive)
    );
    
    return isSensitive ? '***MASKED***' : value;
  }
}

module.exports = ConfigAudit;
```

## ğŸ“Š é…ç½®ç›‘æ§å’Œå‘Šè­¦

### é…ç½®å¥åº·æ£€æŸ¥
```javascript
// health/config-health.js
class ConfigHealthCheck {
  static async checkConfigHealth() {
    const checks = [];

    // æ£€æŸ¥å¿…éœ€çš„é…ç½®é¡¹
    checks.push(this.checkRequiredConfigs());
    
    // æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
    checks.push(await this.checkDatabaseConfig());
    
    // æ£€æŸ¥Redisè¿æ¥é…ç½®
    checks.push(await this.checkRedisConfig());
    
    // æ£€æŸ¥å¤–éƒ¨æœåŠ¡é…ç½®
    checks.push(await this.checkExternalServices());

    return {
      status: checks.every(check => check.status === 'ok') ? 'healthy' : 'unhealthy',
      checks
    };
  }

  static checkRequiredConfigs() {
    const required = ['APP_NAME', 'DB_HOST', 'JWT_SECRET'];
    const missing = required.filter(key => !process.env[key]);
    
    return {
      name: 'required_configs',
      status: missing.length === 0 ? 'ok' : 'error',
      message: missing.length === 0 ? 'All required configs present' : `Missing: ${missing.join(', ')}`
    };
  }

  static async checkDatabaseConfig() {
    try {
      // å°è¯•è¿æ¥æ•°æ®åº“
      await testDatabaseConnection();
      return {
        name: 'database_config',
        status: 'ok',
        message: 'Database connection successful'
      };
    } catch (error) {
      return {
        name: 'database_config',
        status: 'error',
        message: `Database connection failed: ${error.message}`
      };
    }
  }
}

module.exports = ConfigHealthCheck;
```

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£åº”éšç€ç³»ç»Ÿéœ€æ±‚å˜åŒ–åŠæ—¶æ›´æ–°ï¼Œç¡®ä¿é…ç½®è§„èŒƒçš„å‡†ç¡®æ€§å’Œå®ç”¨æ€§ã€‚

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š
- åˆ›å»ºæ—¶é—´ï¼š2024-01-15
- æœ€åæ›´æ–°ï¼š2024-01-15
- æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0
- ç»´æŠ¤äººå‘˜ï¼šå¼€å‘å›¢é˜Ÿ
