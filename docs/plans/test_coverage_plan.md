# L2C æµ‹è¯•è¦†ç›–ç‡æå‡è¯¦ç»†å·¥ä½œè®¡åˆ’

> **å½“å‰çŠ¶æ€**: æµ‹è¯•è¦†ç›–ç‡ 75%  
> **ç›®æ ‡**: æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%  
> **é¢„è®¡å·¥ä½œé‡**: 10-12ä¸ªå·¥ä½œæ—¥  
> **æ›´æ–°æ—¥æœŸ**: 2025-12-12

---

## ğŸ“Š å½“å‰æµ‹è¯•ç°çŠ¶åˆ†æ

### å·²æœ‰æµ‹è¯•æ–‡ä»¶ (13ä¸ª)

ä½äº `src/services/__tests__/`:

1. âœ… `auth-client.test.ts` (13.2 KB) - è®¤è¯æœåŠ¡æµ‹è¯•
2. âœ… `installations.client.test.ts` (14.1 KB) - å®‰è£…æœåŠ¡æµ‹è¯•
3. âœ… `leads-client.test.ts` (2.9 KB) - çº¿ç´¢æœåŠ¡æµ‹è¯•
4. âœ… `leads-tags.test.ts` (4.5 KB) - çº¿ç´¢æ ‡ç­¾æµ‹è¯•
5. âœ… `measurement-templates.client.test.ts` (21.0 KB) - æµ‹é‡æ¨¡æ¿æµ‹è¯•
6. âœ… `measurements.client.test.ts` (32.7 KB) - æµ‹é‡æœåŠ¡æµ‹è¯•
7. âœ… `points-service.test.ts` (9.2 KB) - ç§¯åˆ†æœåŠ¡æµ‹è¯•
8. âœ… `points.client.test.ts` (8.8 KB) - ç§¯åˆ†å®¢æˆ·ç«¯æµ‹è¯•
9. âœ… `products-service.test.ts` (12.1 KB) - äº§å“æœåŠ¡æµ‹è¯•
10. âœ… `quotes-client.test.ts` (5.7 KB) - æŠ¥ä»·æœåŠ¡æµ‹è¯•
11. âœ… `salesOrders.client.test.ts` (14.3 KB) - è®¢å•æœåŠ¡æµ‹è¯•
12. âœ… `share.client.test.ts` (6.3 KB) - åˆ†äº«æœåŠ¡æµ‹è¯•
13. âœ… `workflow.client.test.ts` (4.3 KB) - å·¥ä½œæµæµ‹è¯•

### æœªæµ‹è¯•çš„æœåŠ¡æ–‡ä»¶ (28ä¸ª)

éœ€è¦æ–°å¢å•å…ƒæµ‹è¯•çš„æœåŠ¡ï¼š

**æ ¸å¿ƒä¸šåŠ¡æœåŠ¡ (ä¼˜å…ˆçº§ P0-P1)**:
1. âŒ `approval.client.ts` - å®¡æ‰¹æœåŠ¡
2. âŒ `assignment.client.ts` - åˆ†é…æœåŠ¡
3. âŒ `audit.client.ts` - å®¡è®¡æœåŠ¡
4. âŒ `auditLogs.client.ts` - å®¡è®¡æ—¥å¿—æœåŠ¡
5. âŒ `batch.client.ts` - æ‰¹é‡æ“ä½œæœåŠ¡
6. âŒ `businessData.client.ts` - ä¸šåŠ¡æ•°æ®æœåŠ¡
7. âŒ `coefficient.client.ts` - ç³»æ•°ç®¡ç†æœåŠ¡
8. âŒ `config.client.ts` - é…ç½®æœåŠ¡
9. âŒ `dashboard.client.ts` - çœ‹æ¿æœåŠ¡
10. âŒ `installation-schedule.client.ts` - å®‰è£…æ’ç¨‹æœåŠ¡
11. âŒ `installation-team.client.ts` - å®‰è£…å›¢é˜ŸæœåŠ¡
12. âŒ `installation.client.ts` - å®‰è£…å®¢æˆ·ç«¯æœåŠ¡
13. âŒ `logs.client.ts` - æ—¥å¿—æœåŠ¡
14. âŒ `permissions.client.ts` - æƒé™æœåŠ¡
15. âŒ `purchase-orders.client.ts` - é‡‡è´­è®¢å•æœåŠ¡
16. âŒ `quote-collaboration.client.ts` - æŠ¥ä»·åä½œæœåŠ¡
17. âŒ `reconciliation.client.ts` - å¯¹è´¦æœåŠ¡
18. âŒ `slides.client.ts` - å¹»ç¯ç‰‡æœåŠ¡
19. âŒ `teams.client.ts` - å›¢é˜ŸæœåŠ¡
20. âŒ `users.client.ts` - ç”¨æˆ·æœåŠ¡

**Server-side æœåŠ¡ (ä¼˜å…ˆçº§ P1)**:
21. âŒ `customers.server.ts` - å®¢æˆ·æœåŠ¡ç«¯
22. âŒ `installation.server.ts` - å®‰è£…æœåŠ¡ç«¯
23. âŒ `measurement.server.ts` - æµ‹é‡æœåŠ¡ç«¯
24. âŒ `products.server.ts` - äº§å“æœåŠ¡ç«¯
25. âŒ `salesOrders.server.ts` - è®¢å•æœåŠ¡ç«¯
26. âŒ `teams.server.ts` - å›¢é˜ŸæœåŠ¡ç«¯

**æ”¯æŒæœåŠ¡ (ä¼˜å…ˆçº§ P2)**:
27. âŒ `dataSync.ts` - æ•°æ®åŒæ­¥
28. âŒ `feishuBitable.ts` - é£ä¹¦å¤šç»´è¡¨æ ¼
29. âŒ `notifications.ts` - é€šçŸ¥æœåŠ¡

### E2Eæµ‹è¯•ç°çŠ¶

- é…ç½®å®Œå–„ (Playwright)
- E2E æµ‹è¯•ç›®å½•: `__tests__/e2e`
- éœ€è¡¥å……æ ¸å¿ƒä¸šåŠ¡æµç¨‹E2Eæµ‹è¯•

---

## ğŸ¯ æµ‹è¯•æå‡è®¡åˆ’ (3ä¸ªé˜¶æ®µ)

### é˜¶æ®µä¸€: æ ¸å¿ƒæœåŠ¡å•å…ƒæµ‹è¯•è¡¥å…… (P0, 5-6å¤©)

#### ç›®æ ‡
è¡¥å……20ä¸ªæ ¸å¿ƒä¸šåŠ¡æœåŠ¡çš„å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ç‡æå‡è‡³78%ã€‚

#### ä»»åŠ¡æ¸…å•

##### 1.1 å®¡æ‰¹ä¸åˆ†é…æœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `approval.client.test.ts`**
  - æµ‹è¯•å®¡æ‰¹è¯·æ±‚åˆ›å»º
  - æµ‹è¯•å®¡æ‰¹çŠ¶æ€æ›´æ–°
  - æµ‹è¯•å®¡æ‰¹æµç¨‹æŸ¥è¯¢
  - æµ‹è¯•æƒé™éªŒè¯
  - **é¢„è®¡**: 50-80è¡Œä»£ç 

- [ ] **åˆ›å»º `assignment.client.test.ts`**
  - æµ‹è¯•çº¿ç´¢åˆ†é…
  - æµ‹è¯•è®¢å•åˆ†é…
  - æµ‹è¯•é‡æ–°åˆ†é…é€»è¾‘
  - æµ‹è¯•åˆ†é…è§„åˆ™éªŒè¯
  - **é¢„è®¡**: 60-100è¡Œä»£ç 

##### 1.2 å®¡è®¡ä¸æ—¥å¿—æœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `audit.client.test.ts`**
  - æµ‹è¯•å®¡è®¡è®°å½•åˆ›å»º
  - æµ‹è¯•å®¡è®¡æŸ¥è¯¢åŠŸèƒ½
  - æµ‹è¯•å®¡è®¡æ•°æ®æ ¼å¼
  - **é¢„è®¡**: 40-60è¡Œä»£ç 

- [ ] **åˆ›å»º `auditLogs.client.test.ts`**
  - æµ‹è¯•æ—¥å¿—æŸ¥è¯¢æ¥å£
  - æµ‹è¯•æ—¥å¿—è¿‡æ»¤åŠŸèƒ½
  - æµ‹è¯•åˆ†é¡µé€»è¾‘
  - **é¢„è®¡**: 50-80è¡Œä»£ç 

- [ ] **åˆ›å»º `logs.client.test.ts`**
  - æµ‹è¯•æ—¥å¿—è®°å½•
  - æµ‹è¯•æ—¥å¿—çº§åˆ«
  - æµ‹è¯•æ—¥å¿—æ ¼å¼åŒ–
  - **é¢„è®¡**: 40-60è¡Œä»£ç 

##### 1.3 ä¸šåŠ¡æ•°æ®ä¸é…ç½®æœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `businessData.client.test.ts`**
  - æµ‹è¯•ä¸šåŠ¡æ•°æ®è·å– (9.2KBå¤æ‚æœåŠ¡)
  - æµ‹è¯•æ•°æ®èšåˆé€»è¾‘
  - æµ‹è¯•æ•°æ®è½¬æ¢
  - æµ‹è¯•ç¼“å­˜æœºåˆ¶
  - **é¢„è®¡**: 100-150è¡Œä»£ç 

- [ ] **åˆ›å»º `coefficient.client.test.ts`**
  - æµ‹è¯•ç³»æ•°CRUD (11.5KBå¤æ‚æœåŠ¡)
  - æµ‹è¯•ç³»æ•°è®¡ç®—é€»è¾‘
  - æµ‹è¯•ç³»æ•°åº”ç”¨è§„åˆ™
  - **é¢„è®¡**: 120-180è¡Œä»£ç 

- [ ] **åˆ›å»º `config.client.test.ts`**
  - æµ‹è¯•é…ç½®è¯»å–
  - æµ‹è¯•é…ç½®æ›´æ–°
  - æµ‹è¯•é…ç½®éªŒè¯
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

##### 1.4 æ‰¹é‡æ“ä½œä¸çœ‹æ¿æœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `batch.client.test.ts`**
  - æµ‹è¯•æ‰¹é‡åˆ›å»º
  - æµ‹è¯•æ‰¹é‡æ›´æ–°
  - æµ‹è¯•æ‰¹é‡åˆ é™¤
  - æµ‹è¯•é”™è¯¯å¤„ç†
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `dashboard.client.test.ts`**
  - æµ‹è¯•çœ‹æ¿æ•°æ®è·å– (6.2KBæœåŠ¡)
  - æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  - æµ‹è¯•å›¾è¡¨æ•°æ®æ ¼å¼
  - **é¢„è®¡**: 70-100è¡Œä»£ç 

##### 1.5 å®‰è£…ç›¸å…³æœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `installation-schedule.client.test.ts`**
  - æµ‹è¯•æ’ç¨‹åˆ›å»º (32.6KBå¤§å‹æœåŠ¡)
  - æµ‹è¯•æ’ç¨‹æ›´æ–°
  - æµ‹è¯•æ’ç¨‹å†²çªæ£€æµ‹
  - æµ‹è¯•æ’ç¨‹æŸ¥è¯¢
  - **é¢„è®¡**: 150-200è¡Œä»£ç 

- [ ] **åˆ›å»º `installation-team.client.test.ts`**
  - æµ‹è¯•å›¢é˜Ÿç®¡ç† (26.4KBå¤§å‹æœåŠ¡)
  - æµ‹è¯•æˆå‘˜åˆ†é…
  - æµ‹è¯•æŠ€èƒ½åŒ¹é…
  - **é¢„è®¡**: 120-180è¡Œä»£ç 

- [ ] **åˆ›å»º `installation.client.test.ts`**
  - æµ‹è¯•å®‰è£…å•åˆ›å»º
  - æµ‹è¯•çŠ¶æ€æµè½¬
  - **é¢„è®¡**: 50-80è¡Œä»£ç 

##### 1.6 å…¶ä»–æ ¸å¿ƒæœåŠ¡æµ‹è¯• (0.5å¤©)
- [ ] **åˆ›å»º `permissions.client.test.ts`**
  - æµ‹è¯•æƒé™æ£€æŸ¥
  - æµ‹è¯•è§’è‰²æƒé™æ˜ å°„
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

- [ ] **åˆ›å»º `purchase-orders.client.test.ts`**
  - æµ‹è¯•é‡‡è´­è®¢å•CRUD (6.6KBæœåŠ¡)
  - æµ‹è¯•è®¢å•çŠ¶æ€
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `quote-collaboration.client.test.ts`**
  - æµ‹è¯•æŠ¥ä»·åä½œ (7.1KBæœåŠ¡)
  - æµ‹è¯•åä½œæƒé™
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `reconciliation.client.test.ts`**
  - æµ‹è¯•å¯¹è´¦é€»è¾‘ (6.0KBæœåŠ¡)
  - æµ‹è¯•å¯¹è´¦è®¡ç®—
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

##### 1.7 ç”¨æˆ·ä¸å›¢é˜ŸæœåŠ¡æµ‹è¯• (0.5å¤©)
- [ ] **åˆ›å»º `users.client.test.ts`**
  - æµ‹è¯•ç”¨æˆ·æŸ¥è¯¢
  - æµ‹è¯•ç”¨æˆ·æ›´æ–°
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

- [ ] **åˆ›å»º `teams.client.test.ts`**
  - æµ‹è¯•å›¢é˜ŸCRUD
  - æµ‹è¯•æˆå‘˜ç®¡ç†
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

- [ ] **åˆ›å»º `slides.client.test.ts`**
  - æµ‹è¯•å¹»ç¯ç‰‡æ“ä½œ
  - **é¢„è®¡**: 30-50è¡Œä»£ç 

---

### é˜¶æ®µäºŒ: Server-side æœåŠ¡æµ‹è¯• (P1, 2å¤©)

#### ç›®æ ‡
è¡¥å……6ä¸ªæœåŠ¡ç«¯æœåŠ¡çš„å•å…ƒæµ‹è¯•ã€‚

#### ä»»åŠ¡æ¸…å•

##### 2.1 æ ¸å¿ƒServeræœåŠ¡æµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `customers.server.test.ts`**
  - æµ‹è¯•å®¢æˆ·æ•°æ®æœåŠ¡ç«¯è·å– (3.7KB)
  - æµ‹è¯•RLSç­–ç•¥
  - æµ‹è¯•æ•°æ®è¿‡æ»¤
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

- [ ] **åˆ›å»º `products.server.test.ts`**
  - æµ‹è¯•äº§å“æœåŠ¡ç«¯é€»è¾‘ (3.3KB)
  - æµ‹è¯•åº“å­˜æ£€æŸ¥
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

- [ ] **åˆ›å»º `salesOrders.server.test.ts`**
  - æµ‹è¯•è®¢å•æœåŠ¡ç«¯é€»è¾‘ (5.0KB)
  - æµ‹è¯•è®¢å•è®¡ç®—
  - æµ‹è¯•äº‹åŠ¡å¤„ç†
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

##### 2.2 æœåŠ¡ç®¡ç†Serveræµ‹è¯• (1å¤©)
- [ ] **åˆ›å»º `installation.server.test.ts`**
  - æµ‹è¯•å®‰è£…æœåŠ¡ç«¯é€»è¾‘ (2.4KB)
  - æµ‹è¯•æ’ç¨‹å†²çª
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

- [ ] **åˆ›å»º `measurement.server.test.ts`**
  - æµ‹è¯•æµ‹é‡æœåŠ¡ç«¯é€»è¾‘ (2.3KB)
  - æµ‹è¯•æ—¶é—´åˆ†é…
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

- [ ] **åˆ›å»º `teams.server.test.ts`**
  - æµ‹è¯•å›¢é˜ŸæœåŠ¡ç«¯é€»è¾‘ (3.0KB)
  - æµ‹è¯•æƒé™éªŒè¯
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

---

### é˜¶æ®µä¸‰: E2Eæµ‹è¯•ä¸å·¥å…·ä¼˜åŒ– (P1-P2, 3-4å¤©)

#### ç›®æ ‡
è¡¥å……å…³é”®ä¸šåŠ¡æµç¨‹E2Eæµ‹è¯•ï¼Œä¼˜åŒ–æµ‹è¯•å·¥å…·é…ç½®ã€‚

#### ä»»åŠ¡æ¸…å•

##### 3.1 æ ¸å¿ƒä¸šåŠ¡æµç¨‹E2Eæµ‹è¯• (2å¤©)
- [ ] **åˆ›å»º `e2e/lead-to-quote.spec.ts`**
  - æµ‹è¯•çº¿ç´¢åˆ›å»º â†’ åˆ†é… â†’ æŠ¥ä»·å®Œæ•´æµç¨‹
  - æµ‹è¯•æ•°æ®æµè½¬æ­£ç¡®æ€§
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/quote-to-order.spec.ts`**
  - æµ‹è¯•æŠ¥ä»· â†’ å®¡æ ¸ â†’ è®¢å•åˆ›å»ºæµç¨‹
  - æµ‹è¯•çŠ¶æ€æµè½¬
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/order-to-measurement.spec.ts`**
  - æµ‹è¯•è®¢å• â†’ æ´¾å• â†’ æµ‹é‡æµç¨‹
  - æµ‹è¯•æŠ€å¸ˆåˆ†é…
  - **é¢„è®¡**: 100-150è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/measurement-to-installation.spec.ts`**
  - æµ‹è¯•æµ‹é‡ â†’ ç”Ÿäº§ â†’ å®‰è£…æµç¨‹
  - æµ‹è¯•å®Œæ•´æœåŠ¡é“¾
  - **é¢„è®¡**: 100-150è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/installation-to-reconciliation.spec.ts`**
  - æµ‹è¯•å®‰è£… â†’ éªŒæ”¶ â†’ å¯¹è´¦æµç¨‹
  - æµ‹è¯•è´¢åŠ¡é—­ç¯
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/user-permissions.spec.ts`**
  - æµ‹è¯•7ç§è§’è‰²æƒé™
  - æµ‹è¯•è®¿é—®æ§åˆ¶
  - **é¢„è®¡**: 100-150è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/points-system.spec.ts`**
  - æµ‹è¯•ç§¯åˆ†è·å–
  - æµ‹è¯•ç§¯åˆ†å…‘æ¢
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/share-workflow.spec.ts`**
  - æµ‹è¯•åˆ†äº«é“¾æ¥ç”Ÿæˆ
  - æµ‹è¯•è®¿é—®éªŒè¯
  - **é¢„è®¡**: 50-70è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/approval-workflow.spec.ts`**
  - æµ‹è¯•å®¡æ‰¹æµç¨‹
  - æµ‹è¯•å¤šçº§å®¡æ‰¹
  - **é¢„è®¡**: 80-120è¡Œä»£ç 

- [ ] **åˆ›å»º `e2e/batch-operations.spec.ts`**
  - æµ‹è¯•æ‰¹é‡å¯¼å…¥
  - æµ‹è¯•æ‰¹é‡æ“ä½œ
  - **é¢„è®¡**: 60-80è¡Œä»£ç 

##### 3.2 æµ‹è¯•å·¥å…·ä¼˜åŒ– (1å¤©)
- [ ] **ä¼˜åŒ– `vitest.config.ts`**
  - æ·»åŠ æ›´ç²¾ç»†çš„è¦†ç›–ç‡é…ç½®
  - é…ç½®æµ‹è¯•è¶…æ—¶æ—¶é—´
  - æ·»åŠ æµ‹è¯•å¹¶è¡Œåº¦è®¾ç½®
  - **å‚è€ƒé…ç½®**:
    ```typescript
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html', 'lcov'],
      include: ['src/**/*.ts', 'src/**/*.tsx'],
      exclude: [
        'src/types/**/*',
        'src/test-utils/**/*',
        '**/*.d.ts',
        '**/*.config.*',
        '**/mockData/**'
      ],
      thresholds: {
        lines: 80,
        functions: 75,
        branches: 70,
        statements: 80
      }
    }
    ```

- [ ] **åˆ›å»ºæµ‹è¯•å·¥å…·è¾…åŠ©å‡½æ•°**
  - åˆ›å»º `src/test-utils/mockSupabase.ts` - Mock Supabaseå®¢æˆ·ç«¯
  - åˆ›å»º `src/test-utils/testFixtures.ts` - æµ‹è¯•æ•°æ®fixtures
  - åˆ›å»º `src/test-utils/testHelpers.ts` - é€šç”¨æµ‹è¯•è¾…åŠ©å‡½æ•°
  - **é¢„è®¡**: 150-200è¡Œä»£ç 

- [ ] **åˆ›å»ºæµ‹è¯•æ•°æ®ç”Ÿæˆå™¨**
  - åˆ›å»º `src/test-utils/factories/leadFactory.ts` - çº¿ç´¢æ•°æ®å·¥å‚
  - åˆ›å»º `src/test-utils/factories/orderFactory.ts` - è®¢å•æ•°æ®å·¥å‚
  - åˆ›å»º `src/test-utils/factories/userFactory.ts` - ç”¨æˆ·æ•°æ®å·¥å‚
  - **é¢„è®¡**: 200-300è¡Œä»£ç 

##### 3.3 CI/CDæµ‹è¯•é›†æˆ (0.5å¤©)
- [ ] **é…ç½®GitHub Actionsæµ‹è¯•å·¥ä½œæµ**
  - æ·»åŠ å•å…ƒæµ‹è¯•æ­¥éª¤
  - æ·»åŠ E2Eæµ‹è¯•æ­¥éª¤
  - æ·»åŠ è¦†ç›–ç‡ä¸Šä¼ åˆ°Codecov
  - **åˆ›å»ºæ–‡ä»¶**: `.github/workflows/test.yml`

- [ ] **æ·»åŠ æµ‹è¯•å¾½ç« åˆ°README**
  - è¦†ç›–ç‡å¾½ç« 
  - æµ‹è¯•é€šè¿‡å¾½ç« 

##### 3.4 æµ‹è¯•æ–‡æ¡£ç¼–å†™ (0.5å¤©)
- [ ] **åˆ›å»º `docs/testing-guide.md`**
  - æµ‹è¯•ç¼–å†™è§„èŒƒ
  - Mockæ•°æ®ä½¿ç”¨æŒ‡å—
  - E2Eæµ‹è¯•ç¼–å†™æŒ‡å—
  - æµ‹è¯•è¿è¡Œå‘½ä»¤è¯´æ˜
  - **é¢„è®¡**: 300-500è¡Œæ–‡æ¡£

---

## ğŸ“‹ éªŒæ”¶æ ‡å‡†

### å•å…ƒæµ‹è¯•éªŒæ”¶æ ‡å‡†
- âœ… æ‰€æœ‰28ä¸ªæœªæµ‹è¯•æœåŠ¡éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶
- âœ… æ¯ä¸ªæœåŠ¡è‡³å°‘è¦†ç›–70%çš„ä»£ç è¡Œ
- âœ… æµ‹è¯•åŒ…å«æ­£å¸¸æµç¨‹å’Œå¼‚å¸¸æµç¨‹
- âœ… æ‰€æœ‰æµ‹è¯•èƒ½é€šè¿‡ `npm run test` æ‰§è¡Œ
- âœ… æµ‹è¯•æ— flakyé—®é¢˜ï¼ˆç¨³å®šå¯é‡å¤ï¼‰

### E2Eæµ‹è¯•éªŒæ”¶æ ‡å‡†
- âœ… 10ä¸ªE2Eæµ‹è¯•åœºæ™¯å…¨éƒ¨é€šè¿‡
- âœ… æ¯ä¸ªæµ‹è¯•èƒ½ç‹¬ç«‹è¿è¡Œ
- âœ… E2Eæµ‹è¯•èƒ½åœ¨CIç¯å¢ƒè¿è¡Œ
- âœ… æµ‹è¯•æ‰§è¡Œæ—¶é—´ < 5åˆ†é’Ÿ

### è¦†ç›–ç‡éªŒæ”¶æ ‡å‡†
- âœ… æ€»ä½“ä»£ç è¦†ç›–ç‡ â‰¥ 80%
- âœ… æ ¸å¿ƒæœåŠ¡(P0)è¦†ç›–ç‡ â‰¥ 85%
- âœ… å‡½æ•°è¦†ç›–ç‡ â‰¥ 75%
- âœ… åˆ†æ”¯è¦†ç›–ç‡ â‰¥ 70%

### å·¥å…·éªŒæ”¶æ ‡å‡†
- âœ… æµ‹è¯•å·¥å…·è¾…åŠ©å‡½æ•°å¯å¤ç”¨
- âœ… Mockæ•°æ®å·¥å‚æ˜“äºä½¿ç”¨
- âœ… CIæµ‹è¯•æµæ°´çº¿æ­£å¸¸è¿è¡Œ
- âœ… æµ‹è¯•æ–‡æ¡£å®Œæ•´æ¸…æ™°

---

## ğŸ› ï¸ æµ‹è¯•ç¼–å†™è§„èŒƒ

### æµ‹è¯•æ–‡ä»¶å‘½å
```
src/services/xxx.client.ts â†’ src/services/__tests__/xxx.client.test.ts
src/services/xxx.server.ts â†’ src/services/__tests__/xxx.server.test.ts
```

### æµ‹è¯•ç»“æ„æ¨¡æ¿
```typescript
import { describe, it, expect, beforeEach, vi } from 'vitest';
import { xxxService } from '../xxx.client';

describe('XxxService', () => {
  beforeEach(() => {
    vi.clearAllMocks();
  });

  describe('methodName', () => {
    it('should handle success case', async () => {
      // Arrange
      const input = { ... };
      
      // Act
      const result = await xxxService.methodName(input);
      
      // Assert
      expect(result).toEqual({ ... });
    });

    it('should handle error case', async () => {
      // Test error handling
    });

    it('should validate input', async () => {
      // Test input validation
    });
  });
});
```

### Mock Supabaseç¤ºä¾‹
```typescript
// src/test-utils/mockSupabase.ts
export const mockSupabase = {
  from: vi.fn().mockReturnValue({
    select: vi.fn().mockReturnThis(),
    insert: vi.fn().mockReturnThis(),
    update: vi.fn().mockReturnThis(),
    delete: vi.fn().mockReturnThis(),
    eq: vi.fn().mockReturnThis(),
    single: vi.fn().mockResolvedValue({ data: null, error: null })
  })
};
```

---

## â±ï¸ æ—¶é—´è§„åˆ’ï¼ˆ10-12ä¸ªå·¥ä½œæ—¥ï¼‰

| é˜¶æ®µ | ä»»åŠ¡ | å·¥ä½œé‡ | èµ·æ­¢æ—¥æœŸï¼ˆç¤ºä¾‹ï¼‰ |
|------|------|--------|------------------|
| é˜¶æ®µä¸€ | 1.1 å®¡æ‰¹ä¸åˆ†é… | 1å¤© | Day 1 |
| é˜¶æ®µä¸€ | 1.2 å®¡è®¡ä¸æ—¥å¿— | 1å¤© | Day 2 |
| é˜¶æ®µä¸€ | 1.3 ä¸šåŠ¡æ•°æ®ä¸é…ç½® | 1å¤© | Day 3 |
| é˜¶æ®µä¸€ | 1.4 æ‰¹é‡æ“ä½œä¸çœ‹æ¿ | 1å¤© | Day 4 |
| é˜¶æ®µä¸€ | 1.5 å®‰è£…ç›¸å…³æœåŠ¡ | 1å¤© | Day 5 |
| é˜¶æ®µä¸€ | 1.6-1.7 å…¶ä»–æ ¸å¿ƒæœåŠ¡ | 1å¤© | Day 6 |
| é˜¶æ®µäºŒ | 2.1 æ ¸å¿ƒServeræœåŠ¡ | 1å¤© | Day 7 |
| é˜¶æ®µäºŒ | 2.2 æœåŠ¡ç®¡ç†Server | 1å¤© | Day 8 |
| é˜¶æ®µä¸‰ | 3.1 E2Eæµ‹è¯• | 2å¤© | Day 9-10 |
| é˜¶æ®µä¸‰ | 3.2 æµ‹è¯•å·¥å…·ä¼˜åŒ– | 1å¤© | Day 11 |
| é˜¶æ®µä¸‰ | 3.3-3.4 CIä¸æ–‡æ¡£ | 1å¤© | Day 12 |

**æ€»è®¡**: 12ä¸ªå·¥ä½œæ—¥ï¼ˆå¯æ ¹æ®å®é™…è¿›åº¦è°ƒæ•´ï¼‰

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

### é˜¶æ®µå®Œæˆåº¦
- [ ] é˜¶æ®µä¸€: æ ¸å¿ƒæœåŠ¡å•å…ƒæµ‹è¯• (0/20)
- [ ] é˜¶æ®µäºŒ: Server-sideæœåŠ¡æµ‹è¯• (0/6)
- [ ] é˜¶æ®µä¸‰: E2Eæµ‹è¯•ä¸å·¥å…·ä¼˜åŒ– (0/14)

### è¦†ç›–ç‡é‡Œç¨‹ç¢‘
- [ ] è¾¾åˆ° 76% (å®Œæˆé˜¶æ®µä¸€çš„50%)
- [ ] è¾¾åˆ° 78% (å®Œæˆé˜¶æ®µä¸€)
- [ ] è¾¾åˆ° 79% (å®Œæˆé˜¶æ®µäºŒ)
- [ ] è¾¾åˆ° â‰¥80% (å®Œæˆé˜¶æ®µä¸‰)

---

## ğŸš€ æ‰§è¡Œå»ºè®®

### ä¼˜å…ˆçº§æ’åº
1. **P0 (æœ€é«˜ä¼˜å…ˆçº§)**: é˜¶æ®µä¸€ 1.1-1.5 æ ¸å¿ƒä¸šåŠ¡æœåŠ¡
2. **P1 (é«˜ä¼˜å…ˆçº§)**: é˜¶æ®µä¸€ 1.6-1.7 + é˜¶æ®µäºŒå…¨éƒ¨
3. **P2 (ä¸­ä¼˜å…ˆçº§)**: é˜¶æ®µä¸‰ E2Eæµ‹è¯•
4. **P3 (ä½ä¼˜å…ˆçº§)**: é˜¶æ®µä¸‰å·¥å…·ä¼˜åŒ–å’Œæ–‡æ¡£

### å¹¶è¡Œæ‰§è¡Œå»ºè®®
- å¯ä»¥åŒæ—¶è¿›è¡Œå•å…ƒæµ‹è¯•å’ŒE2Eæµ‹è¯•ç¼–å†™
- æµ‹è¯•å·¥å…·è¾…åŠ©å‡½æ•°å¯ä»¥è¾¹å†™æµ‹è¯•è¾¹å®Œå–„
- CIé…ç½®å¯ä»¥æå‰å‡†å¤‡ï¼Œé€æ­¥é›†æˆ

### è´¨é‡ä¿éšœ
- æ¯å®Œæˆä¸€ä¸ªæœåŠ¡æµ‹è¯•ï¼Œç«‹å³è¿è¡Œ `npm run test` éªŒè¯
- æ¯å¤©æ‰§è¡Œ `npm run test:coverage` æŸ¥çœ‹è¦†ç›–ç‡å˜åŒ–
- é‡åˆ°éš¾ä»¥æµ‹è¯•çš„ä»£ç ï¼Œè€ƒè™‘é‡æ„ä»¥æå‡å¯æµ‹è¯•æ€§

---

## ğŸ“š å‚è€ƒèµ„æº

### ç›¸å…³æ–‡æ¡£
- [Vitest å®˜æ–¹æ–‡æ¡£](https://vitest.dev/)
- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev/)
- [æµ‹è¯•æœ€ä½³å®è·µ](https://testingjavascript.com/)

### é¡¹ç›®å·²æœ‰èµ„æº
- ç°æœ‰æµ‹è¯•æ–‡ä»¶: `src/services/__tests__/*.test.ts`
- Vitesté…ç½®: `vitest.config.ts`
- Playwrighté…ç½®: `playwright.config.ts`

---

**è®¡åˆ’åˆ¶å®šæ—¥æœŸ**: 2025-12-12  
**è´£ä»»äºº**: å¼€å‘å›¢é˜Ÿ  
**å®¡æ ¸äºº**: é¡¹ç›®è´Ÿè´£äºº
