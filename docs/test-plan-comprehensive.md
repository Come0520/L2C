# ğŸ§ª L2C é¡¹ç›®å…¨é¢æµ‹è¯•è®¡åˆ’

> **åˆ¶å®šæ—¶é—´**: 2026-01-18
> **çŠ¶æ€**: âœ… å·²æ‰¹å‡†
> **ç›®æ ‡**: å»ºç«‹è¦†ç›– Lintã€å•å…ƒæµ‹è¯•ã€E2E æµ‹è¯•çš„å…¨é¢æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿ä»£ç è´¨é‡ä¸ä¸šåŠ¡åŠŸèƒ½çš„å®Œæ•´æ€§

---

## 1. æµ‹è¯•ç°çŠ¶æ‘˜è¦

### 1.1 ç°æœ‰æµ‹è¯•è¦†ç›–

| æµ‹è¯•ç±»å‹ | æ–‡ä»¶æ•°é‡ | è¦†ç›–æ¨¡å— |
|:---|:---:|:---|
| **E2E æµ‹è¯•** | 32 | çº¿ç´¢(12)ã€æŠ¥ä»·(2)ã€è®¢å•(2)ã€è´¢åŠ¡(3)ã€æœåŠ¡(2)ã€å”®å(1)ã€ä¾›åº”é“¾(1)ã€æƒé™(1)ã€æœç´¢(1)ã€å®¢æˆ·(1)ã€å®¡æ‰¹(2)ã€æ¸ é“(1)ã€åˆ†æ(1)ã€é€šçŸ¥(1)ã€é—­ç¯(1) |
| **å•å…ƒæµ‹è¯•** | 49 | å”®åã€å®¡æ‰¹ã€è´¢åŠ¡ã€è®¢å•ã€äº§å“ã€æŠ¥ä»·(26ä¸ª)ã€æœåŠ¡(11ä¸ª)ã€ä¾›åº”é“¾(6ä¸ª)ã€å…±äº«(3ä¸ª) |

### 1.2 å·²è¯†åˆ«çš„æµ‹è¯•ç¼ºå£

| æ¨¡å— | ä¼˜å…ˆçº§ | E2E æµ‹è¯• | å•å…ƒæµ‹è¯• | çŠ¶æ€ |
|:---|:---:|:---:|:---:|:---|
| **å®¡æ‰¹æµç¨‹ (Approval)** | P0 | âœ… å·²æœ‰ | âš ï¸ 3ä¸ª | éœ€å¢å¼ºè¾¹ç¼˜åœºæ™¯ |
| **é€šçŸ¥ä¸­å¿ƒ (Notifications)** | P0 | âš ï¸ 1ä¸ª | âŒ æ—  | éœ€è¡¥å……å•å…ƒæµ‹è¯• |
| **æ¸ é“ç®¡ç† (Channels)** | P1 | âœ… å·²æœ‰ | âŒ æ—  | éœ€è¡¥å……å•å…ƒæµ‹è¯• |
| **æ•°æ®åˆ†æ (Analytics)** | P1 | âš ï¸ 1ä¸ª | âŒ æ—  | éœ€å¢å¼º |
| **äº§å“ç®¡ç† (Products)** | P2 | âŒ æ—  | âœ… 1ä¸ª | éœ€è¡¥å…… E2E |
| **å®¢æˆ·ç®¡ç† (Customers)** | P3 | âœ… å·²æœ‰ | âŒ æ—  | éœ€è¡¥å……å•å…ƒæµ‹è¯• |

---

## 2. æµ‹è¯•è®¡åˆ’æ€»ä½“ç›®æ ‡

### éªŒæ”¶æ ‡å‡†

- [ ] `pnpm lint` é›¶é”™è¯¯
- [ ] `pnpm type-check` é›¶é”™è¯¯
- [ ] `pnpm test:run` å…¨éƒ¨é€šè¿‡ (è¦†ç›–ç‡ > 80%)
- [ ] `pnpm test:e2e:chromium` å…¨éƒ¨é€šè¿‡

---

## 3. éœ€è¡¥å……çš„å•å…ƒæµ‹è¯• (9 ä¸ª)

### P0 - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | æµ‹è¯•å†…å®¹ |
|:---|:---|:---|
| **é€šçŸ¥ä¸­å¿ƒ** | `src/features/notifications/actions/__tests__/notifications.test.ts` | é€šçŸ¥å‘é€ã€å·²è¯»æ ‡è®°ã€æ‰¹é‡æ“ä½œ |
| **æ¸ é“ç®¡ç†** | `src/features/channels/actions/__tests__/channel-actions.test.ts` | æ¸ é“CRUDã€å±‚çº§å…³ç³»ã€çº¿ç´¢å…³è”ç»Ÿè®¡ |
| **å®¢æˆ·ç®¡ç†** | `src/features/customers/actions/__tests__/customer-actions.test.ts` | å®¢æˆ·CRUDã€åˆå¹¶ã€ç”»åƒ |

### P1 - ä¸šåŠ¡å¢å¼º

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | æµ‹è¯•å†…å®¹ |
|:---|:---|:---|
| **å®¡æ‰¹å¢å¼º** | `src/features/approval/__tests__/approval-edge-cases.test.ts` | è¶…æ—¶è‡ªåŠ¨å®¡æ‰¹ã€æ’¤å›ã€ä¼šç­¾ |
| **æŠ¥ä»·é£æ§** | `src/features/quotes/__tests__/risk-control-edge.test.ts` | è´Ÿæ¯›åˆ©æ‹¦æˆªã€æç«¯æŠ˜æ‰£ã€ä»·æ ¼å˜åŠ¨ |
| **è®¢å•çŠ¶æ€æœº** | `src/features/orders/__tests__/order-state-edge.test.ts` | çŠ¶æ€å›é€€ã€å«åœæ¢å¤ã€å¹¶å‘å˜æ›´ |

### P2 - è¾¹ç¼˜åœºæ™¯

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | æµ‹è¯•å†…å®¹ |
|:---|:---|:---|
| **è´¢åŠ¡å¯¹è´¦** | `src/features/finance/__tests__/reconciliation-edge.test.ts` | è¶…é¢æ‰£æ¬¾ã€å¤šå¸ç§ã€çº¢å­—å¯¹è´¦ |
| **æµ‹é‡ç‰ˆæœ¬** | `src/features/service/measurement/__tests__/version-edge.test.ts` | å¤šç‰ˆæœ¬å†²çªã€é©³å›åé‡æµ‹ |
| **ä¾›åº”é“¾é‡‡è´­** | `src/features/supply-chain/__tests__/po-edge.test.ts` | è·¨è®¢å•åˆå¹¶ã€éƒ¨åˆ†æ”¶è´§ã€é€€è´§ |

---

## 4. éœ€è¡¥å……çš„ E2E æµ‹è¯• (12 ä¸ª)

### P0 - ç´§æ€¥è¡¥å……

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ |
|:---|:---|
| `products.spec.ts` | äº§å“CRUDã€æ‰¹é‡å¯¼å…¥ã€åŠ¨æ€å±æ€§ |
| `approval-edge.spec.ts` | è¶…æ—¶è‡ªåŠ¨å®¡æ‰¹ã€å¤šçº§å®¡æ‰¹ã€å®¡æ‰¹æ’¤å› |
| `notifications-edge.spec.ts` | é€šçŸ¥åå¥½è®¾ç½®ã€æ‰¹é‡å·²è¯»ã€SLAé¢„è­¦ |

### P1 - é«˜ä¼˜å…ˆçº§

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ |
|:---|:---|
| `analytics-edge.spec.ts` | é”€å”®æ¼æ–—ã€æ—¥æœŸç­›é€‰ã€æ•°æ®å¯¼å‡º |
| `channels-edge.spec.ts` | æ¸ é“å±‚çº§ã€è½¬åŒ–ç‡åˆ†æã€ä½£é‡‘è®¡ç®— |
| `order-split.spec.ts` | è®¢å•æ‹†åˆ†ã€åˆå¹¶ã€çŠ¶æ€å›é€€ |

### P2 - ä¸­ä¼˜å…ˆçº§

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ |
|:---|:---|
| `quote-version.spec.ts` | ç‰ˆæœ¬å¯¹æ¯”ã€æ¿€æ´»åˆ‡æ¢ã€è¿‡æœŸå¤„ç† |
| `finance-reconciliation.spec.ts` | å¯¹è´¦æµç¨‹ã€è¶…é¢æ‰£æ¬¾ã€çº¢å­—å•æ® |
| `measurement-split.spec.ts` | æµ‹é‡æ‹†å•ã€å¤æµ‹ã€å¤šç‰ˆæœ¬ç®¡ç† |

### P3 - è¾¹ç¼˜åœºæ™¯

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ |
|:---|:---|
| `customer-merge.spec.ts` | å®¢æˆ·åˆå¹¶ã€æ•°æ®è¿ç§»ã€å…³è”æ›´æ–° |
| `after-sales-arbitration.spec.ts` | å”®åä»²è£ã€è´£ä»»åˆ¤å®šã€æ‰£æ¬¾å¤„ç† |
| `supply-chain-merge.spec.ts` | è·¨è®¢å•åˆå¹¶é‡‡è´­ã€éƒ¨åˆ†æ”¶è´§ |

---

## 5. è¾¹ç¼˜åœºæ™¯æµ‹è¯•æ¸…å•

| ç±»åˆ« | åœºæ™¯ | éªŒè¯ç‚¹ |
|:---|:---|:---|
| **å¹¶å‘** | çº¿ç´¢åŒæ—¶åˆ†é…ã€æŠ¥ä»·åŒæ—¶ç¼–è¾‘ã€å®¡æ‰¹åŒæ—¶æ“ä½œ | ä¹è§‚é”ã€äº’æ–¥ |
| **æ•°æ®è¾¹ç•Œ** | è¶…é•¿æ–‡æœ¬ã€æç«¯æ•°å€¼ã€æ—¥æœŸè¾¹ç•Œã€ç‰¹æ®Šå­—ç¬¦ | æ ¡éªŒæ‹¦æˆªã€XSSé˜²æŠ¤ |
| **å¼‚å¸¸æ¢å¤** | ç½‘ç»œä¸­æ–­ã€è¡¨å•å¤±è´¥ã€å®¡æ‰¹è¶…æ—¶ | æ•°æ®ä¸ä¸¢å¤±ã€è‡ªåŠ¨æµè½¬ |
| **æƒé™è¾¹ç•Œ** | è¶Šæƒè®¿é—®ã€æ•°æ®éš”ç¦»ã€è§’è‰²é™çº§ | 403ã€ç§Ÿæˆ·éš”ç¦» |

---

## 6. æ‰§è¡Œæ—¶é—´è¡¨ (çº¦ 8 å¤©)

| é˜¶æ®µ | æ—¶é—´ | ä»»åŠ¡ |
|:---|:---:|:---|
| **ç¬¬ä¸€é˜¶æ®µ** | 1å¤© | Lint ä¸ç±»å‹æ£€æŸ¥ |
| **ç¬¬äºŒé˜¶æ®µ** | 2å¤© | å•å…ƒæµ‹è¯•è¡¥å…… |
| **ç¬¬ä¸‰é˜¶æ®µ** | 3å¤© | E2E æµ‹è¯•è¡¥å…… |
| **ç¬¬å››é˜¶æ®µ** | 2å¤© | é›†æˆéªŒè¯ + Buffer |

---

## é™„å½•: æµ‹è¯•å‘½ä»¤é€ŸæŸ¥

```bash
# Lint
pnpm lint && pnpm lint --fix

# ç±»å‹
pnpm type-check

# å•å…ƒæµ‹è¯•
pnpm test:run && pnpm test:run --coverage

# E2E æµ‹è¯•
pnpm test:e2e:chromium
npx playwright test <file> --project=chromium --headed
```
