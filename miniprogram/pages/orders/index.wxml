<!--pages/orders/index.wxml-->
<view class="container">
    <view class="tabs">
        <view class="tab-item {{activeTab === 'ALL' ? 'active' : ''}}" bindtap="onTabChange" data-status="ALL">å…¨éƒ¨</view>
        <view class="tab-item {{activeTab === 'PENDING_PAYMENT' ? 'active' : ''}}" bindtap="onTabChange" data-status="PENDING_PAYMENT">å¾…ä»˜æ¬¾</view>
        <view class="tab-item {{activeTab === 'IN_PRODUCTION' ? 'active' : ''}}" bindtap="onTabChange" data-status="IN_PRODUCTION">ç”Ÿäº§ä¸­</view>
        <view class="tab-item {{activeTab === 'COMPLETED' ? 'active' : ''}}" bindtap="onTabChange" data-status="COMPLETED">å·²å®Œæˆ</view>
    </view>

    <scroll-view class="order-list" scroll-y="true" bindscrolltolower="onLoadMore" enhanced="true" show-scrollbar="false">
        <block wx:for="{{list}}" wx:key="id">
            <view class="card order-card animate-slide-up" bindtap="onToDetail" data-id="{{item.id}}" style="animation-delay: {{index * 0.05}}s">
                <view class="card-header">
                    <text class="order-no">{{item.orderNo}}</text>
                    <text class="status {{item.status}}">{{statusMap[item.status] || item.status}}</text>
                </view>
                <view class="card-body">
                    <view class="row">
                        <text class="label">å®¢æˆ·ï¼š</text>
                        <text class="value">{{item.customerName}}</text>
                    </view>
                    <view class="row">
                        <text class="label">é‡‘é¢ï¼š</text>
                        <text class="value price">Â¥{{item.totalAmount}}</text>
                    </view>
                     <view class="row">
                        <text class="label">å·²ä»˜ï¼š</text>
                        <text class="value paid">Â¥{{item.paidAmount}}</text>
                    </view>
                     <view class="row">
                        <text class="label">åˆ›å»ºæ—¶é—´ï¼š</text>
                        <text class="value">{{item.createdAtFormatted}}</text>
                    </view>
                </view>
            </view>
        </block>

        <view class="empty-state" wx:if="{{!list.length && !loading}}">
            <view class="empty-icon">ğŸ“</view>
            <text>æš‚æ— è®¢å•</text>
        </view>
    </scroll-view>

    <!-- åˆ†åŒ…é¡µé¢æ— æ³•è‡ªåŠ¨è·å– custom-tab-barï¼Œéœ€æ‰‹åŠ¨æ·»åŠ ä»¥ä¿æŒå¯¼èˆªæ å¯è§ -->
    <custom-tab-bar />
</view>
