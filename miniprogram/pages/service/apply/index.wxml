<!--pages/service/apply/index.wxml-->
<view class="container">
  <view class="form-group">
    <view class="form-item">
      <text class="label">关联订单</text>
      <view class="value" wx:if="{{orderNo}}">{{orderNo}}</view>
      <view class="value placeholder" wx:else bindtap="onSelectOrder">点击选择订单 ></view>
    </view>
  </view>

  <view class="form-group">
    <view class="group-title">售后类型</view>
    <view class="type-grid">
         <view class="type-item {{type === 'REPAIR' ? 'active' : ''}}" bindtap="onTypeSelect" data-type="REPAIR">维修</view>
         <view class="type-item {{type === 'RETURN' ? 'active' : ''}}" bindtap="onTypeSelect" data-type="RETURN">退货/退款</view>
         <view class="type-item {{type === 'COMPLAINT' ? 'active' : ''}}" bindtap="onTypeSelect" data-type="COMPLAINT">投诉</view>
         <view class="type-item {{type === 'OTHER' ? 'active' : ''}}" bindtap="onTypeSelect" data-type="OTHER">其他</view>
    </view>
  </view>

  <view class="form-group">
    <view class="group-title">问题描述</view>
    <textarea 
        class="desc-input" 
        placeholder="请详细描述您遇到的问题，以便我们尽快为您解决" 
        bindinput="onInputDesc"
        value="{{description}}"
        maxlength="200"
    ></textarea>
    <view class="word-count">{{description.length}}/200</view>
  </view>

  <view class="form-group">
    <view class="group-title">上传照片 ({{photos.length}}/9)</view>
    <view class="photo-grid">
        <block wx:for="{{photos}}" wx:key="*this">
            <view class="photo-item">
                <image src="{{item}}" mode="aspectFill" bindtap="previewImage" data-url="{{item}}"></image>
                <view class="delete-btn" catchtap="deletePhoto" data-index="{{index}}">×</view>
            </view>
        </block>
        <view class="photo-add" bindtap="chooseImage" wx:if="{{photos.length < 9}}">
            <view class="add-icon">+</view>
        </view>
    </view>
  </view>

  <view class="footer">
    <button class="submit-btn" bindtap="onSubmit" disabled="{{submitting}}">提交申请</button>
  </view>
</view>
