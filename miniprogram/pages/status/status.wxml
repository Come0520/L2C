<!--pages/status/status.wxml-->
<view class="container">
  <!-- 液态流体背景 -->
  <view class="liquid-bg">
    <view class="blob blob-1"></view>
    <view class="blob blob-2"></view>
    <view class="blob blob-3"></view>
    <view class="noise-overlay"></view>
  </view>

  <scroll-view class="content-wrapper" scroll-y="true" enhanced="true" show-scrollbar="false">
    <!-- 状态卡片 -->
    <view class="glass-card status-card animate-slide-up">
      <!-- 待审批 -->
      <view wx:if="{{status === 'pending_approval'}}" class="status-content">
        <view class="status-icon-box orange">
          <view class="status-icon pending">⏳</view>
        </view>
        <view class="status-title">审批中</view>
        <view class="status-desc">
          您的企业入驻申请正在审核中
          <view class="status-highlight">预计1-3个工作日完成审核</view>
        </view>
        <view class="status-timeline">
          <view class="timeline-item completed">
            <view class="dot"></view>
            <view class="text">提交申请 ({{submitTime}})</view>
          </view>
          <view class="timeline-line"></view>
          <view class="timeline-item active">
            <view class="dot pulse"></view>
            <view class="text">平台审核中</view>
          </view>
          <view class="timeline-line dashed"></view>
          <view class="timeline-item">
            <view class="dot"></view>
            <view class="text">审核结果</view>
          </view>
        </view>
      </view>

      <!-- 已通过 -->
      <view wx:elif="{{status === 'active'}}" class="status-content">
        <view class="status-icon-box green">
          <view class="status-icon success">✅</view>
        </view>
        <view class="status-title">审批通过</view>
        <view class="status-desc">
          恭喜！您的企业已成功入驻 L2C 销售管理系统
        </view>
        <view class="status-time">通过时间：{{reviewTime}}</view>
        
        <button class="primary-btn mt-32" bindtap="goToInvite" hover-class="btn-hover">
          <text>开始邀请员工</text>
          <text class="btn-arrow">→</text>
        </button>
      </view>

      <!-- 已拒绝 -->
      <view wx:elif="{{status === 'rejected'}}" class="status-content">
        <view class="status-icon-box red">
          <view class="status-icon error">❌</view>
        </view>
        <view class="status-title">审批未通过</view>
        <view class="error-box">
          <text class="error-label">拒绝原因：</text>
          <text class="error-text">{{rejectReason || '详情请联系客服'}}</text>
        </view>
        <view class="status-time">审批时间：{{reviewTime}}</view>
        
        <button class="outline-btn mt-32" bindtap="reApply" hover-class="btn-hover">
          重新申请
        </button>
      </view>

      <!-- 未申请 -->
      <view wx:else class="status-content">
        <view class="status-icon-box blue">
          <view class="status-icon">📋</view>
        </view>
        <view class="status-title">尚未申请</view>
        <view class="status-desc">您还没有提交企业入驻申请</view>
        
        <button class="primary-btn mt-32" bindtap="goToRegister" hover-class="btn-hover">
          <text>立即申请入驻</text>
          <text class="btn-arrow">→</text>
        </button>
      </view>
    </view>

    <!-- 企业信息 (Glassmorphism) -->
    <view wx:if="{{tenantInfo}}" class="glass-card info-card animate-slide-up" style="animation-delay: 0.1s;">
      <view class="card-header">
        <view class="header-icon">🏢</view>
        <view class="header-title">企业信息</view>
      </view>
      <view class="info-list">
        <view class="info-item">
          <text class="info-label">企业名称</text>
          <text class="info-value">{{tenantInfo.name}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">企业代码</text>
          <text class="info-value code">{{tenantInfo.code}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">联系人</text>
          <text class="info-value">{{tenantInfo.applicantName}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">联系电话</text>
          <text class="info-value">{{tenantInfo.applicantPhone}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">所在地区</text>
          <text class="info-value">{{tenantInfo.region}}</text>
        </view>
      </view>
    </view>

    <!-- 订阅提醒 (Glassmorphism) -->
    <view class="glass-card subscribe-card animate-slide-up" wx:if="{{status === 'pending_approval'}}" style="animation-delay: 0.2s;">
      <view class="subscribe-content">
        <view class="subscribe-icon-box">
          <text>🔔</text>
        </view>
        <view class="subscribe-text">
          <view class="subscribe-title">开启审批通知</view>
          <view class="subscribe-desc">审批结果将第一时间推送给您</view>
        </view>
      </view>
      <button class="small-btn" bindtap="subscribeNotification" hover-class="btn-hover">
        订阅通知
      </button>
    </view>
  </scroll-view>
</view>
