<!-- 个人中心 -->
<view class="container profile-page">
  <!-- 用户信息卡片 -->
  <view class="card user-card animate-fade-in">
    <view class="user-info" bindtap="navigateToEdit">
      <image class="avatar" src="{{userInfo.avatarUrl || '/assets/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-meta">
        <view class="user-name">{{userInfo.name || '未登录'}}</view>
        <view class="user-role">
          <text class="role-tag">{{userInfo.displayRole || '用户'}}</text>
          <text class="badge badge-info" wx:if="{{userInfo.role === 'admin' || userInfo.role === 'boss'}}">管理员</text>
        </view>
      </view>
      <view class="edit-icon">
        <text class="arrow-icon">›</text>
      </view>
    </view>
  </view>

  <!-- 数据统计 -->
  <view class="card stats-card animate-slide-up" style="animation-delay: 0.1s;">
    <view class="stat-item">
      <text class="stat-value primary">{{stats.monthlySales || '0'}}</text>
      <text class="stat-label">本月业绩(万)</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.monthlyOrders || '0'}}</text>
      <text class="stat-label">本月签单</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.conversionRate || '0'}}%</text>
      <text class="stat-label">转化率</text>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="card menu-card animate-slide-up" style="animation-delay: 0.15s;">
    <!-- 管理菜单 -->
    <view class="menu-item" wx:if="{{userInfo.role === 'admin' || userInfo.role === 'BOSS'}}" bindtap="navigateToPaymentSettings">
      <view class="menu-left">
        <view class="menu-icon-box blue">
          <image class="menu-icon" src="/assets/icons/payment-active.svg" />
        </view>
        <text class="menu-label">支付设置</text>
      </view>
      <text class="menu-arrow">›</text>
    </view>

    <view class="menu-item" wx:if="{{userInfo.role === 'admin' || userInfo.role === 'boss' || userInfo.role === 'manager'}}" bindtap="navigateToInvite">
      <view class="menu-left">
        <view class="menu-icon-box green">
          <image class="menu-icon" src="/assets/icons/invite-active.svg" />
        </view>
        <text class="menu-label">邀请成员</text>
      </view>
      <text class="menu-arrow">›</text>
    </view>

    <!-- 通用菜单 -->
    <view class="menu-item" bindtap="navigateToServiceList">
      <view class="menu-left">
        <view class="menu-icon-box orange">
          <image class="menu-icon" src="/assets/icons/support-active.svg" />
        </view>
        <text class="menu-label">售后记录</text>
      </view>
      <text class="menu-arrow">›</text>
    </view>

    <view class="menu-item">
      <view class="menu-left">
        <view class="menu-icon-box purple">
          <image class="menu-icon" src="/assets/icons/support-active.svg" />
        </view>
        <text class="menu-label">联系客服</text>
      </view>
      <text class="menu-arrow">›</text>
    </view>
  </view>

  <!-- 分享按钮 -->
  <view class="card share-card animate-slide-up" style="animation-delay: 0.2s;">
    <button class="share-btn" open-type="share">
      <image class="share-icon" src="/assets/icons/share-active.svg" />
      <text>分享给好友</text>
    </button>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section animate-slide-up" style="animation-delay: 0.25s;">
    <button class="btn-logout" bindtap="handleLogout">退出登录</button>
  </view>
</view>
