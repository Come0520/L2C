{"numTotalTestSuites":1203,"numPassedTestSuites":1136,"numFailedTestSuites":67,"numPendingTestSuites":0,"numTotalTests":2032,"numPassedTests":1986,"numFailedTests":26,"numPendingTests":20,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":1,"total":1,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772266786446,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["app.ts request"],"fullName":"app.ts request request 应在 Header 中包含 Authorization Token","status":"passed","title":"request 应在 Header 中包含 Authorization Token","duration":7.990699999999379,"failureMessages":[],"meta":{}},{"ancestorTitles":["app.ts request"],"fullName":"app.ts request request 遇到 401 应自动退出并重定向","status":"passed","title":"request 遇到 401 应自动退出并重定向","duration":2.7559000000001106,"failureMessages":[],"meta":{}},{"ancestorTitles":["app.ts request"],"fullName":"app.ts request request 成功时应返回 data","status":"passed","title":"request 成功时应返回 data","duration":0.8245999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["app.ts request"],"fullName":"app.ts request request 失败时应 reject","status":"passed","title":"request 失败时应 reject","duration":2.3895999999995183,"failureMessages":[],"meta":{}}],"startTime":1772266861035,"endTime":1772266861049.3896,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/app.test.ts"},{"assertionResults":[{"ancestorTitles":["AuthStore"],"fullName":"AuthStore 初始化时应从存储中加载数据","status":"passed","title":"初始化时应从存储中加载数据","duration":7.114600000000792,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore setLogin 应更新状态并持久化","status":"passed","title":"setLogin 应更新状态并持久化","duration":4.7453999999997905,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore logout 应清除状态和持久化","status":"passed","title":"logout 应清除状态和持久化","duration":2.458599999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore updateRole 应更新角色并同步存储","status":"passed","title":"updateRole 应更新角色并同步存储","duration":4.425199999999677,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore subscribe 应在状态变更时通知","status":"passed","title":"subscribe 应在状态变更时通知","duration":1.567300000000614,"failureMessages":[],"meta":{}}],"startTime":1772266854271,"endTime":1772266854291.5674,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/auth-store.test.ts"},{"assertionResults":[{"ancestorTitles":["custom-tab-bar"],"fullName":"custom-tab-bar 访客 (Guest) 应看到基础 Tabs","status":"passed","title":"访客 (Guest) 应看到基础 Tabs","duration":52.92590000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["custom-tab-bar"],"fullName":"custom-tab-bar 管理员 (Admin) 应看到管理 Tabs","status":"passed","title":"管理员 (Admin) 应看到管理 Tabs","duration":2.104299999999057,"failureMessages":[],"meta":{}},{"ancestorTitles":["custom-tab-bar"],"fullName":"custom-tab-bar 安装工 (Installer) 应看到任务 Tabs","status":"passed","title":"安装工 (Installer) 应看到任务 Tabs","duration":1.8533000000006723,"failureMessages":[],"meta":{}},{"ancestorTitles":["custom-tab-bar"],"fullName":"custom-tab-bar 点击 switchTab 应调用 wx.switchTab","status":"passed","title":"点击 switchTab 应调用 wx.switchTab","duration":4.943499999999403,"failureMessages":[],"meta":{}}],"startTime":1772266824208,"endTime":1772266824269.9436,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/tabbar.test.ts"},{"assertionResults":[{"ancestorTitles":["utils/util"],"fullName":"utils/util formatTime 应能正确格式化日期","status":"passed","title":"formatTime 应能正确格式化日期","duration":2.7433999999998377,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils/util"],"fullName":"utils/util formatTime 应处理个位数月份和日期","status":"passed","title":"formatTime 应处理个位数月份和日期","duration":0.7651999999998225,"failureMessages":[],"meta":{}}],"startTime":1772266869632,"endTime":1772266869635.7651,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/util.test.ts"},{"assertionResults":[{"ancestorTitles":["Health Check"],"fullName":"Health Check should pass a simple truthy test","status":"passed","title":"should pass a simple truthy test","duration":2.501499999999396,"failureMessages":[],"meta":{}},{"ancestorTitles":["Health Check"],"fullName":"Health Check should have access to JSDOM","status":"passed","title":"should have access to JSDOM","duration":8.516700000000128,"failureMessages":[],"meta":{}}],"startTime":1772266864988,"endTime":1772266864999.5166,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/test/health-check.test.ts"},{"assertionResults":[{"ancestorTitles":["Login Page"],"fullName":"Login Page 初始化状态正确","status":"passed","title":"初始化状态正确","duration":46.64249999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Login Page"],"fullName":"Login Page 输入校验 - 账号为空","status":"passed","title":"输入校验 - 账号为空","duration":1.163300000000163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Login Page"],"fullName":"Login Page 输入校验 - 密码为空","status":"passed","title":"输入校验 - 密码为空","duration":1.2677999999996246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Login Page"],"fullName":"Login Page 登录成功后的处理","status":"passed","title":"登录成功后的处理","duration":6.29359999999906,"failureMessages":[],"meta":{}},{"ancestorTitles":["Login Page"],"fullName":"Login Page 登录失败后的错误显示","status":"passed","title":"登录失败后的错误显示","duration":0.9369000000006054,"failureMessages":[],"meta":{}}],"startTime":1772266828836,"endTime":1772266828892.937,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/pages/login.test.ts"},{"assertionResults":[{"ancestorTitles":["Workbench Page"],"fullName":"Workbench Page 进入页面应触发数据加载","status":"passed","title":"进入页面应触发数据加载","duration":91.71080000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench Page"],"fullName":"Workbench Page 加载状态控制","status":"passed","title":"加载状态控制","duration":1.0002000000004045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench Page"],"fullName":"Workbench Page 快捷操作跳转 - 创建报价","status":"passed","title":"快捷操作跳转 - 创建报价","duration":5.237600000000384,"failureMessages":[],"meta":{}}],"startTime":1772266821252,"endTime":1772266821350.2375,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/pages/workbench.test.ts"},{"assertionResults":[{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should be a singleton (exported instance)","status":"passed","title":"should be a singleton (exported instance)","duration":4.705299999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should initialize with empty values by default","status":"passed","title":"should initialize with empty values by default","duration":1.1041000000004715,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should save login data and notify listeners","status":"passed","title":"should save login data and notify listeners","duration":4.7534999999998035,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should handle logout correctly","status":"passed","title":"should handle logout correctly","duration":1.1563999999998487,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should update role correctly","status":"passed","title":"should update role correctly","duration":0.76759999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthStore"],"fullName":"AuthStore should allow unsubscribing from updates","status":"passed","title":"should allow unsubscribing from updates","duration":0.7510000000002037,"failureMessages":[],"meta":{}}],"startTime":1772266864073,"endTime":1772266864086.751,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/stores/auth-store.test.ts"},{"assertionResults":[{"ancestorTitles":["Signature Component"],"fullName":"Signature Component should calculate sizes dynamically via createSelectorQuery mock","status":"passed","title":"should calculate sizes dynamically via createSelectorQuery mock","duration":4.0263999999997395,"failureMessages":[],"meta":{}},{"ancestorTitles":["Signature Component"],"fullName":"Signature Component should update state during touch gestures","status":"passed","title":"should update state during touch gestures","duration":1.3191999999999098,"failureMessages":[],"meta":{}},{"ancestorTitles":["Signature Component"],"fullName":"Signature Component should clear canvas successfully","status":"passed","title":"should clear canvas successfully","duration":3.6691000000000713,"failureMessages":[],"meta":{}}],"startTime":1772266863949,"endTime":1772266863958.6692,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/components/signature.test.ts"},{"assertionResults":[{"ancestorTitles":["ErrorReporter"],"fullName":"ErrorReporter should capture JS errors","status":"passed","title":"should capture JS errors","duration":10.800699999999779,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorReporter"],"fullName":"ErrorReporter should capture Promise rejections","status":"passed","title":"should capture Promise rejections","duration":2.8060000000004948,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorReporter"],"fullName":"ErrorReporter should flush errors after timeout","status":"passed","title":"should flush errors after timeout","duration":9.626200000000608,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorReporter"],"fullName":"ErrorReporter should flush errors immediately when queue is full","status":"passed","title":"should flush errors immediately when queue is full","duration":3.3596999999999753,"failureMessages":[],"meta":{}}],"startTime":1772266841201,"endTime":1772266841228.3596,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/utils/error-reporter.test.ts"},{"assertionResults":[{"ancestorTitles":["NavigationGuard"],"fullName":"NavigationGuard should allow access to public pages without login","status":"passed","title":"should allow access to public pages without login","duration":9.138800000000629,"failureMessages":[],"meta":{}},{"ancestorTitles":["NavigationGuard"],"fullName":"NavigationGuard should redirect to landing if not logged in for private pages","status":"passed","title":"should redirect to landing if not logged in for private pages","duration":1.8487000000004628,"failureMessages":[],"meta":{}},{"ancestorTitles":["NavigationGuard"],"fullName":"NavigationGuard should allow access to private pages if logged in","status":"passed","title":"should allow access to private pages if logged in","duration":1.1985999999997148,"failureMessages":[],"meta":{}}],"startTime":1772266865530,"endTime":1772266865542.1985,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/miniprogram/__tests__/utils/navigation-guard.test.ts"},{"assertionResults":[{"ancestorTitles":["OrderService","haltOrder"],"fullName":"OrderService haltOrder should halt order successfully","status":"passed","title":"should halt order successfully","duration":5.161000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","haltOrder"],"fullName":"OrderService haltOrder should throw error if order not found or tenant check fails","status":"passed","title":"should throw error if order not found or tenant check fails","duration":3.933000000000902,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","haltOrder"],"fullName":"OrderService haltOrder should throw error if status does not allow halt","status":"passed","title":"should throw error if status does not allow halt","duration":1.2620000000006257,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","requestCancellation"],"fullName":"OrderService requestCancellation should submit approval for cancellation","status":"passed","title":"should submit approval for cancellation","duration":2.3822999999993044,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","requestCancellation"],"fullName":"OrderService requestCancellation should throw if status is not cancelable","status":"passed","title":"should throw if status is not cancelable","duration":1.0447999999996682,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","updateOrderStatus"],"fullName":"OrderService updateOrderStatus should update status successfully","status":"passed","title":"should update status successfully","duration":1.7011999999995169,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderService","updateOrderStatus"],"fullName":"OrderService updateOrderStatus should validate transition logic","status":"passed","title":"should validate transition logic","duration":1.0377000000007683,"failureMessages":[],"meta":{}}],"startTime":1772266856702,"endTime":1772266856720.0376,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/services/__tests__/order.service.test.ts"},{"assertionResults":[{"ancestorTitles":["WorkbenchService 综合测试","getUnifiedTodos (Task 1)"],"fullName":"WorkbenchService 综合测试 getUnifiedTodos (Task 1) 应该返回所有 6 个待办分类且元数据正确","status":"passed","title":"应该返回所有 6 个待办分类且元数据正确","duration":13.334199999999328,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getUnifiedTodos (Task 1)"],"fullName":"WorkbenchService 综合测试 getUnifiedTodos (Task 1) 计数器应该与返回的数据量一致","status":"passed","title":"计数器应该与返回的数据量一致","duration":2.393899999999121,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getUnifiedTodos (Task 1)"],"fullName":"WorkbenchService 综合测试 getUnifiedTodos (Task 1) 普通角色 (SALES) 应该应用 userId 权限过滤","status":"passed","title":"普通角色 (SALES) 应该应用 userId 权限过滤","duration":2.2106999999996333,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getUnifiedTodos (Task 1)"],"fullName":"WorkbenchService 综合测试 getUnifiedTodos (Task 1) 所有查询应该应用 limit: 50","status":"passed","title":"所有查询应该应用 limit: 50","duration":7.566999999999098,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getUnifiedTodos (Task 1)"],"fullName":"WorkbenchService 综合测试 getUnifiedTodos (Task 1) 子查询报错时应返回对应的空列表","status":"passed","title":"子查询报错时应返回对应的空列表","duration":3.3091999999996915,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getAlerts (Task 2)"],"fullName":"WorkbenchService 综合测试 getAlerts (Task 2) 应该正确识别线索超时、售后超时和采购延迟报警","status":"passed","title":"应该正确识别线索超时、售后超时和采购延迟报警","duration":3.9288999999989755,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getAlerts (Task 2)"],"fullName":"WorkbenchService 综合测试 getAlerts (Task 2) 空数据时不应产生报警条目","status":"passed","title":"空数据时不应产生报警条目","duration":1.7422999999998865,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkbenchService 综合测试","getAlerts (Task 2)"],"fullName":"WorkbenchService 综合测试 getAlerts (Task 2) 查询应该并行执行 (Promise.all)","status":"passed","title":"查询应该并行执行 (Promise.all)","duration":3.015000000001237,"failureMessages":[],"meta":{}}],"startTime":1772266843937,"endTime":1772266843975.015,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/services/__tests__/workbench.service.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"Failed to resolve import \"minimatch\" from \"servers/src/filesystem/__tests__/directory-tree.test.ts\". Does the file exist?","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/directory-tree.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"Failed to resolve import \"diff\" from \"servers/src/filesystem/lib.ts\". Does the file exist?","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/lib.test.ts"},{"assertionResults":[{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath leaves Unix paths unchanged","status":"passed","title":"leaves Unix paths unchanged","duration":3.2538000000004104,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath never converts WSL paths (they work correctly in WSL with Node.js fs)","status":"passed","title":"never converts WSL paths (they work correctly in WSL with Node.js fs)","duration":0.47220000000015716,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath converts Unix-style Windows paths only on Windows platform","status":"passed","title":"converts Unix-style Windows paths only on Windows platform","duration":0.34169999999994616,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath leaves Windows paths unchanged but ensures backslashes","status":"passed","title":"leaves Windows paths unchanged but ensures backslashes","duration":0.7076999999999316,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath handles Windows paths with spaces","status":"passed","title":"handles Windows paths with spaces","duration":0.5715000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","convertToWindowsPath"],"fullName":"Path Utilities convertToWindowsPath handles drive letter paths based on platform","status":"passed","title":"handles drive letter paths based on platform","duration":0.38850000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath preserves Unix paths","status":"passed","title":"preserves Unix paths","duration":1.3163000000004104,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath removes surrounding quotes","status":"passed","title":"removes surrounding quotes","duration":0.556800000000294,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath normalizes backslashes","status":"passed","title":"normalizes backslashes","duration":0.8092999999998938,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath converts forward slashes to backslashes on Windows","status":"passed","title":"converts forward slashes to backslashes on Windows","duration":0.3643000000001848,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath always preserves WSL paths (they work correctly in WSL)","status":"passed","title":"always preserves WSL paths (they work correctly in WSL)","duration":0.2710000000006403,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath handles Unix-style Windows paths","status":"passed","title":"handles Unix-style Windows paths","duration":0.2653999999993175,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath handles paths with spaces and mixed slashes","status":"passed","title":"handles paths with spaces and mixed slashes","duration":0.7038999999995212,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath preserves spaces in all path formats","status":"passed","title":"preserves spaces in all path formats","duration":0.3897999999999229,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath handles special characters in paths","status":"passed","title":"handles special characters in paths","duration":0.6243999999996959,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath capitalizes lowercase drive letters for Windows paths","status":"passed","title":"capitalizes lowercase drive letters for Windows paths","duration":0.3658999999997832,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath handles UNC paths correctly","status":"passed","title":"handles UNC paths correctly","duration":0.43540000000029977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","normalizePath"],"fullName":"Path Utilities normalizePath returns normalized non-Windows/WSL/Unix-style Windows paths as is after basic normalization","status":"passed","title":"returns normalized non-Windows/WSL/Unix-style Windows paths as is after basic normalization","duration":0.20800000000053842,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","expandHome"],"fullName":"Path Utilities expandHome expands ~ to home directory","status":"passed","title":"expands ~ to home directory","duration":0.8185999999996056,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","expandHome"],"fullName":"Path Utilities expandHome expands bare ~ to home directory","status":"passed","title":"expands bare ~ to home directory","duration":1.5016999999998006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","expandHome"],"fullName":"Path Utilities expandHome leaves other paths unchanged","status":"passed","title":"leaves other paths unchanged","duration":0.26890000000003056,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should NEVER convert WSL paths - they work correctly in WSL with Node.js fs","status":"passed","title":"should NEVER convert WSL paths - they work correctly in WSL with Node.js fs","duration":0.9239999999999782,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should also preserve WSL paths when running on Windows","status":"passed","title":"should also preserve WSL paths when running on Windows","duration":0.4360999999998967,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should convert Unix-style Windows paths (/c/) only when running on Windows (win32)","status":"passed","title":"should convert Unix-style Windows paths (/c/) only when running on Windows (win32)","duration":0.4246000000002823,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should NOT convert Unix-style paths (/c/) when running inside WSL (linux)","status":"passed","title":"should NOT convert Unix-style paths (/c/) when running inside WSL (linux)","duration":0.3686999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should preserve regular Unix paths on all platforms","status":"passed","title":"should preserve regular Unix paths on all platforms","duration":0.5011999999996988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) reproduces exact scenario from issue #2795","status":"passed","title":"reproduces exact scenario from issue #2795","duration":0.4944000000004962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Utilities","WSL path handling (issue #2795 fix)"],"fullName":"Path Utilities WSL path handling (issue #2795 fix) should handle relative path slash conversion based on platform","status":"passed","title":"should handle relative path slash conversion based on platform","duration":0.340900000000147,"failureMessages":[],"meta":{}}],"startTime":1772266856165,"endTime":1772266856185.4944,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/path-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["Path Validation"],"fullName":"Path Validation allows exact directory match","status":"passed","title":"allows exact directory match","duration":2.9351000000006024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation allows subdirectories","status":"passed","title":"allows subdirectories","duration":1.0082000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation blocks similar directory names (prefix vulnerability)","status":"passed","title":"blocks similar directory names (prefix vulnerability)","duration":0.9981000000007043,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation blocks paths outside allowed directories","status":"passed","title":"blocks paths outside allowed directories","duration":0.9020000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation handles multiple allowed directories","status":"passed","title":"handles multiple allowed directories","duration":0.6680999999998676,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation blocks parent and sibling directories","status":"passed","title":"blocks parent and sibling directories","duration":0.5092999999997119,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation"],"fullName":"Path Validation handles paths with special characters","status":"passed","title":"handles paths with special characters","duration":0.6595999999999549,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Input validation"],"fullName":"Path Validation Input validation rejects empty inputs","status":"passed","title":"rejects empty inputs","duration":0.36959999999999127,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Input validation"],"fullName":"Path Validation Input validation handles trailing separators correctly","status":"passed","title":"handles trailing separators correctly","duration":1.10320000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Input validation"],"fullName":"Path Validation Input validation skips empty directory entries in allowed list","status":"passed","title":"skips empty directory entries in allowed list","duration":0.5326999999997497,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Input validation"],"fullName":"Path Validation Input validation handles Windows paths with trailing separators","status":"passed","title":"handles Windows paths with trailing separators","duration":0.42109999999956926,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Error handling"],"fullName":"Path Validation Error handling normalizes relative paths to absolute","status":"passed","title":"normalizes relative paths to absolute","duration":0.42880000000059226,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Error handling"],"fullName":"Path Validation Error handling returns false for relative paths in allowed directories","status":"passed","title":"returns false for relative paths in allowed directories","duration":0.27480000000014115,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Error handling"],"fullName":"Path Validation Error handling handles null and undefined inputs gracefully","status":"passed","title":"handles null and undefined inputs gracefully","duration":0.32110000000011496,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Unicode and special characters"],"fullName":"Path Validation Unicode and special characters handles unicode characters in paths","status":"passed","title":"handles unicode characters in paths","duration":0.3923000000004322,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Unicode and special characters"],"fullName":"Path Validation Unicode and special characters handles paths with spaces correctly","status":"passed","title":"handles paths with spaces correctly","duration":0.39949999999953434,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Overlapping allowed directories"],"fullName":"Path Validation Overlapping allowed directories handles nested allowed directories correctly","status":"passed","title":"handles nested allowed directories correctly","duration":0.4111000000002605,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Overlapping allowed directories"],"fullName":"Path Validation Overlapping allowed directories handles root directory as allowed","status":"passed","title":"handles root directory as allowed","duration":0.5679000000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Cross-platform behavior"],"fullName":"Path Validation Cross-platform behavior handles Windows-style paths on Windows","status":"passed","title":"handles Windows-style paths on Windows","duration":0.5002999999996973,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Cross-platform behavior"],"fullName":"Path Validation Cross-platform behavior handles Unix-style paths on Unix","status":"passed","title":"handles Unix-style paths on Unix","duration":0.1346000000003187,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Path Traversal"],"fullName":"Path Validation Validation Tests - Path Traversal blocks path traversal attempts","status":"passed","title":"blocks path traversal attempts","duration":0.4488000000001193,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Path Traversal"],"fullName":"Path Validation Validation Tests - Path Traversal blocks traversal in allowed directories","status":"passed","title":"blocks traversal in allowed directories","duration":0.20610000000033324,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Path Traversal"],"fullName":"Path Validation Validation Tests - Path Traversal handles complex traversal patterns","status":"passed","title":"handles complex traversal patterns","duration":0.3577999999997701,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Null Bytes"],"fullName":"Path Validation Validation Tests - Null Bytes rejects paths with null bytes","status":"passed","title":"rejects paths with null bytes","duration":0.3326999999999316,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Null Bytes"],"fullName":"Path Validation Validation Tests - Null Bytes rejects allowed directories with null bytes","status":"passed","title":"rejects allowed directories with null bytes","duration":0.20859999999993306,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Special Characters"],"fullName":"Path Validation Validation Tests - Special Characters allows percent signs in filenames","status":"passed","title":"allows percent signs in filenames","duration":0.37489999999979773,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Validation Tests - Special Characters"],"fullName":"Path Validation Validation Tests - Special Characters handles percent signs in allowed directories","status":"passed","title":"handles percent signs in allowed directories","duration":0.1959999999999127,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Normalization"],"fullName":"Path Validation Path Normalization normalizes paths before comparison","status":"passed","title":"normalizes paths before comparison","duration":0.5117999999993117,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Normalization"],"fullName":"Path Validation Path Normalization handles mixed separators correctly","status":"passed","title":"handles mixed separators correctly","duration":0.29020000000036816,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Edge Cases"],"fullName":"Path Validation Edge Cases rejects non-string inputs safely","status":"passed","title":"rejects non-string inputs safely","duration":0.43150000000059663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Edge Cases"],"fullName":"Path Validation Edge Cases handles very long paths","status":"passed","title":"handles very long paths","duration":0.5563000000001921,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Additional Coverage"],"fullName":"Path Validation Additional Coverage handles allowed directories with traversal that normalizes safely","status":"passed","title":"handles allowed directories with traversal that normalizes safely","duration":0.22380000000066502,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Additional Coverage"],"fullName":"Path Validation Additional Coverage handles symbolic dots in filenames","status":"passed","title":"handles symbolic dots in filenames","duration":0.29689999999936845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Additional Coverage"],"fullName":"Path Validation Additional Coverage handles UNC paths on Windows","status":"passed","title":"handles UNC paths on Windows","duration":0.37290000000029977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Symlink Tests"],"fullName":"Path Validation Symlink Tests validates symlink handling","status":"passed","title":"validates symlink handling","duration":22.355900000000474,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Symlink Tests"],"fullName":"Path Validation Symlink Tests handles non-existent paths correctly","status":"passed","title":"handles non-existent paths correctly","duration":12.139299999999821,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Symlink Tests"],"fullName":"Path Validation Symlink Tests validates symlinked files consistently between path and resolved forms","status":"passed","title":"validates symlinked files consistently between path and resolved forms","duration":12.15139999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Symlink Tests"],"fullName":"Path Validation Symlink Tests validates paths correctly when allowed directory is resolved from symlink","status":"passed","title":"validates paths correctly when allowed directory is resolved from symlink","duration":18.438999999999396,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Symlink Tests"],"fullName":"Path Validation Symlink Tests resolves nested symlink chains completely","status":"passed","title":"resolves nested symlink chains completely","duration":335.1342000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests validates non-existent file paths based on parent directory","status":"passed","title":"validates non-existent file paths based on parent directory","duration":630.6445000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests demonstrates symlink race condition allows writing outside allowed directories","status":"passed","title":"demonstrates symlink race condition allows writing outside allowed directories","duration":1204.5301,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests shows timing differences between validation approaches","status":"passed","title":"shows timing differences between validation approaches","duration":162.8687000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests validates directory creation timing","status":"passed","title":"validates directory creation timing","duration":15.542199999999866,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests demonstrates exclusive file creation behavior","status":"passed","title":"demonstrates exclusive file creation behavior","duration":11.659499999999753,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests should use resolved parent paths for non-existent files","status":"passed","title":"should use resolved parent paths for non-existent files","duration":12.56880000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests demonstrates parent directory symlink traversal","status":"passed","title":"demonstrates parent directory symlink traversal","duration":11.242299999999886,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests should prevent race condition between validatePath and file operation","status":"passed","title":"should prevent race condition between validatePath and file operation","duration":15.969900000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests should allow overwrites to legitimate files within allowed directories","status":"passed","title":"should allow overwrites to legitimate files within allowed directories","duration":22.53019999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests should handle symlinks that point within allowed directories","status":"passed","title":"should handle symlinks that point within allowed directories","duration":11.818199999999706,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests should prevent overwriting files through symlinks pointing outside allowed directories","status":"passed","title":"should prevent overwriting files through symlinks pointing outside allowed directories","duration":10.746099999998478,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests demonstrates race condition in read operations","status":"passed","title":"demonstrates race condition in read operations","duration":557.9344000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Path Validation","Path Validation Race Condition Tests"],"fullName":"Path Validation Path Validation Race Condition Tests verifies rename does not follow symlinks","status":"passed","title":"verifies rename does not follow symlinks","duration":289.8248000000003,"failureMessages":[],"meta":{}}],"startTime":1772266812195,"endTime":1772266815575.8247,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/path-validation.test.ts"},{"assertionResults":[{"ancestorTitles":["getValidRootDirectories","valid directory processing"],"fullName":"getValidRootDirectories valid directory processing should process all URI formats and edge cases","status":"passed","title":"should process all URI formats and edge cases","duration":19.895399999999427,"failureMessages":[],"meta":{}},{"ancestorTitles":["getValidRootDirectories","valid directory processing"],"fullName":"getValidRootDirectories valid directory processing should normalize complex paths","status":"passed","title":"should normalize complex paths","duration":9.162099999999555,"failureMessages":[],"meta":{}},{"ancestorTitles":["getValidRootDirectories","error handling"],"fullName":"getValidRootDirectories error handling should handle various error types","status":"passed","title":"should handle various error types","duration":20.364400000000387,"failureMessages":[],"meta":{}}],"startTime":1772266829690,"endTime":1772266829740.3645,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/roots-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["structuredContent schema compliance","directory_tree"],"fullName":"structuredContent schema compliance directory_tree should return structuredContent.content as a string, not an array","status":"failed","title":"should return structuredContent.content as a string, not an array","duration":625.4778999999999,"failureMessages":["McpError: MCP error -32000: Connection closed\n    at Function.fromError (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js:2035:16)\n    at Client._onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:259:32)\n    at StdioClientTransport._transport.onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:223:18)\n    at ChildProcess.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/client/stdio.js:85:31)\n    at ChildProcess.emit (node:events:519:28)\n    at ChildProcess.cp.emit (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\cross-spawn@7.0.6\\node_modules\\cross-spawn\\lib\\enoent.js:34:29)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:304:5)"],"meta":{}},{"ancestorTitles":["structuredContent schema compliance","list_directory_with_sizes"],"fullName":"structuredContent schema compliance list_directory_with_sizes should return structuredContent.content as a string, not an array","status":"failed","title":"should return structuredContent.content as a string, not an array","duration":434.0026999999991,"failureMessages":["McpError: MCP error -32000: Connection closed\n    at Function.fromError (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js:2035:16)\n    at Client._onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:259:32)\n    at StdioClientTransport._transport.onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:223:18)\n    at ChildProcess.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/client/stdio.js:85:31)\n    at ChildProcess.emit (node:events:519:28)\n    at ChildProcess.cp.emit (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\cross-spawn@7.0.6\\node_modules\\cross-spawn\\lib\\enoent.js:34:29)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:304:5)"],"meta":{}},{"ancestorTitles":["structuredContent schema compliance","move_file"],"fullName":"structuredContent schema compliance move_file should return structuredContent.content as a string, not an array","status":"failed","title":"should return structuredContent.content as a string, not an array","duration":237.16369999999915,"failureMessages":["McpError: MCP error -32000: Connection closed\n    at Function.fromError (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js:2035:16)\n    at Client._onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:259:32)\n    at StdioClientTransport._transport.onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:223:18)\n    at ChildProcess.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/client/stdio.js:85:31)\n    at ChildProcess.emit (node:events:519:28)\n    at ChildProcess.cp.emit (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\cross-spawn@7.0.6\\node_modules\\cross-spawn\\lib\\enoent.js:34:29)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:304:5)"],"meta":{}},{"ancestorTitles":["structuredContent schema compliance","list_directory (control - already working)"],"fullName":"structuredContent schema compliance list_directory (control - already working) should return structuredContent.content as a string","status":"failed","title":"should return structuredContent.content as a string","duration":255.11679999999978,"failureMessages":["McpError: MCP error -32000: Connection closed\n    at Function.fromError (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js:2035:16)\n    at Client._onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:259:32)\n    at StdioClientTransport._transport.onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:223:18)\n    at ChildProcess.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/client/stdio.js:85:31)\n    at ChildProcess.emit (node:events:519:28)\n    at ChildProcess.cp.emit (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\cross-spawn@7.0.6\\node_modules\\cross-spawn\\lib\\enoent.js:34:29)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:304:5)"],"meta":{}},{"ancestorTitles":["structuredContent schema compliance","search_files (control - already working)"],"fullName":"structuredContent schema compliance search_files (control - already working) should return structuredContent.content as a string","status":"failed","title":"should return structuredContent.content as a string","duration":647.0406999999996,"failureMessages":["McpError: MCP error -32000: Connection closed\n    at Function.fromError (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js:2035:16)\n    at Client._onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:259:32)\n    at StdioClientTransport._transport.onclose (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js:223:18)\n    at ChildProcess.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@modelcontextprotocol+sdk@1.26.0_zod@4.3.4/node_modules/@modelcontextprotocol/sdk/dist/esm/client/stdio.js:85:31)\n    at ChildProcess.emit (node:events:519:28)\n    at ChildProcess.cp.emit (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\cross-spawn@7.0.6\\node_modules\\cross-spawn\\lib\\enoent.js:34:29)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:304:5)"],"meta":{}}],"startTime":1772266797274,"endTime":1772266799474.0408,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/filesystem/__tests__/structured-content.test.ts"},{"assertionResults":[{"ancestorTitles":["ensureMemoryFilePath","with MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath with MEMORY_FILE_PATH environment variable should return absolute path when MEMORY_FILE_PATH is absolute","status":"passed","title":"should return absolute path when MEMORY_FILE_PATH is absolute","duration":4.778500000000349,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","with MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath with MEMORY_FILE_PATH environment variable should convert relative path to absolute when MEMORY_FILE_PATH is relative","status":"passed","title":"should convert relative path to absolute when MEMORY_FILE_PATH is relative","duration":62.438100000001214,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","with MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath with MEMORY_FILE_PATH environment variable should handle Windows absolute paths","status":"passed","title":"should handle Windows absolute paths","duration":35.71090000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","without MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath without MEMORY_FILE_PATH environment variable should return default path when no files exist","status":"passed","title":"should return default path when no files exist","duration":80.97270000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","without MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath without MEMORY_FILE_PATH environment variable should migrate from memory.json to memory.jsonl when only old file exists","status":"passed","title":"should migrate from memory.json to memory.jsonl when only old file exists","duration":44.17239999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","without MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath without MEMORY_FILE_PATH environment variable should use new file when both old and new files exist","status":"passed","title":"should use new file when both old and new files exist","duration":7.593800000000556,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","without MEMORY_FILE_PATH environment variable"],"fullName":"ensureMemoryFilePath without MEMORY_FILE_PATH environment variable should preserve file content during migration","status":"passed","title":"should preserve file content during migration","duration":13.965099999999438,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","defaultMemoryPath"],"fullName":"ensureMemoryFilePath defaultMemoryPath should end with memory.jsonl","status":"passed","title":"should end with memory.jsonl","duration":1.1263999999991938,"failureMessages":[],"meta":{}},{"ancestorTitles":["ensureMemoryFilePath","defaultMemoryPath"],"fullName":"ensureMemoryFilePath defaultMemoryPath should be an absolute path","status":"passed","title":"should be an absolute path","duration":1.1701000000011845,"failureMessages":[],"meta":{}}],"startTime":1772266815027,"endTime":1772266815281.1702,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/memory/__tests__/file-path.test.ts"},{"assertionResults":[{"ancestorTitles":["KnowledgeGraphManager","createEntities"],"fullName":"KnowledgeGraphManager createEntities should create new entities","status":"passed","title":"should create new entities","duration":175.03829999999834,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","createEntities"],"fullName":"KnowledgeGraphManager createEntities should not create duplicate entities","status":"passed","title":"should not create duplicate entities","duration":633.3534,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","createEntities"],"fullName":"KnowledgeGraphManager createEntities should handle empty entity arrays","status":"passed","title":"should handle empty entity arrays","duration":186.40010000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","createRelations"],"fullName":"KnowledgeGraphManager createRelations should create new relations","status":"passed","title":"should create new relations","duration":489.0083999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","createRelations"],"fullName":"KnowledgeGraphManager createRelations should not create duplicate relations","status":"passed","title":"should not create duplicate relations","duration":17.81080000000111,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","createRelations"],"fullName":"KnowledgeGraphManager createRelations should handle empty relation arrays","status":"passed","title":"should handle empty relation arrays","duration":2.920399999999063,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","addObservations"],"fullName":"KnowledgeGraphManager addObservations should add observations to existing entities","status":"passed","title":"should add observations to existing entities","duration":18.601199999999153,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","addObservations"],"fullName":"KnowledgeGraphManager addObservations should not add duplicate observations","status":"passed","title":"should not add duplicate observations","duration":24.263600000000224,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","addObservations"],"fullName":"KnowledgeGraphManager addObservations should throw error for non-existent entity","status":"passed","title":"should throw error for non-existent entity","duration":4.898000000001048,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteEntities"],"fullName":"KnowledgeGraphManager deleteEntities should delete entities","status":"passed","title":"should delete entities","duration":15.426699999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteEntities"],"fullName":"KnowledgeGraphManager deleteEntities should cascade delete relations when deleting entities","status":"passed","title":"should cascade delete relations when deleting entities","duration":21.14389999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteEntities"],"fullName":"KnowledgeGraphManager deleteEntities should handle deleting non-existent entities","status":"passed","title":"should handle deleting non-existent entities","duration":5.706099999999424,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteObservations"],"fullName":"KnowledgeGraphManager deleteObservations should delete observations from entities","status":"passed","title":"should delete observations from entities","duration":45.75929999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteObservations"],"fullName":"KnowledgeGraphManager deleteObservations should handle deleting from non-existent entities","status":"passed","title":"should handle deleting from non-existent entities","duration":348.4922999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","deleteRelations"],"fullName":"KnowledgeGraphManager deleteRelations should delete specific relations","status":"passed","title":"should delete specific relations","duration":16.10319999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","readGraph"],"fullName":"KnowledgeGraphManager readGraph should return empty graph when file does not exist","status":"passed","title":"should return empty graph when file does not exist","duration":1.3154999999987922,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","readGraph"],"fullName":"KnowledgeGraphManager readGraph should return complete graph with entities and relations","status":"passed","title":"should return complete graph with entities and relations","duration":12.65650000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should search by entity name","status":"passed","title":"should search by entity name","duration":12.127399999999398,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should search by entity type","status":"passed","title":"should search by entity type","duration":12.338399999998728,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should search by observation content","status":"passed","title":"should search by observation content","duration":10.553200000000288,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should be case insensitive","status":"passed","title":"should be case insensitive","duration":11.784100000000763,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should include relations between matched entities","status":"passed","title":"should include relations between matched entities","duration":10.576399999999921,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","searchNodes"],"fullName":"KnowledgeGraphManager searchNodes should return empty graph for no matches","status":"passed","title":"should return empty graph for no matches","duration":10.982500000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","openNodes"],"fullName":"KnowledgeGraphManager openNodes should open specific nodes by name","status":"passed","title":"should open specific nodes by name","duration":15.531699999999546,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","openNodes"],"fullName":"KnowledgeGraphManager openNodes should include relations between opened nodes","status":"passed","title":"should include relations between opened nodes","duration":197.9520999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","openNodes"],"fullName":"KnowledgeGraphManager openNodes should exclude relations to unopened nodes","status":"passed","title":"should exclude relations to unopened nodes","duration":691.634,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","openNodes"],"fullName":"KnowledgeGraphManager openNodes should handle opening non-existent nodes","status":"passed","title":"should handle opening non-existent nodes","duration":948.4264000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","openNodes"],"fullName":"KnowledgeGraphManager openNodes should handle empty node list","status":"passed","title":"should handle empty node list","duration":941.3071000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","file persistence"],"fullName":"KnowledgeGraphManager file persistence should persist data across manager instances","status":"passed","title":"should persist data across manager instances","duration":6.668999999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","file persistence"],"fullName":"KnowledgeGraphManager file persistence should handle JSONL format correctly","status":"passed","title":"should handle JSONL format correctly","duration":27.41870000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","file persistence"],"fullName":"KnowledgeGraphManager file persistence should strip type field from entities when loading from file","status":"passed","title":"should strip type field from entities when loading from file","duration":29.050499999999374,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","file persistence"],"fullName":"KnowledgeGraphManager file persistence should strip type field from searchNodes results","status":"passed","title":"should strip type field from searchNodes results","duration":21.648999999999432,"failureMessages":[],"meta":{}},{"ancestorTitles":["KnowledgeGraphManager","file persistence"],"fullName":"KnowledgeGraphManager file persistence should strip type field from openNodes results","status":"passed","title":"should strip type field from openNodes results","duration":19.831200000000536,"failureMessages":[],"meta":{}}],"startTime":1772266814359,"endTime":1772266819349.8313,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/memory/__tests__/knowledge-graph.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"Failed to resolve import \"chalk\" from \"servers/src/sequentialthinking/lib.ts\". Does the file exist?","name":"C:/Users/bigey/Documents/Antigravity/L2C/servers/src/sequentialthinking/__tests__/lib.test.ts"},{"assertionResults":[{"ancestorTitles":["MobileLayout"],"fullName":"MobileLayout should render header and children correctly","status":"passed","title":"should render header and children correctly","duration":105.11520000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileLayout"],"fullName":"MobileLayout should show bottom nav on non-login pages","status":"passed","title":"should show bottom nav on non-login pages","duration":18.519000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileLayout"],"fullName":"MobileLayout should hide bottom nav on login page","status":"passed","title":"should hide bottom nav on login page","duration":7.959100000000035,"failureMessages":[],"meta":{}}],"startTime":1772266824355,"endTime":1772266824486.959,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/mobile/__tests__/layout.test.tsx"},{"assertionResults":[{"ancestorTitles":["After Sales Utils","escapeLikePattern"],"fullName":"After Sales Utils escapeLikePattern should escape percent sign","status":"passed","title":"should escape percent sign","duration":3.584200000000237,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Utils","escapeLikePattern"],"fullName":"After Sales Utils escapeLikePattern should escape underscore","status":"passed","title":"should escape underscore","duration":0.48469999999997526,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Utils","escapeLikePattern"],"fullName":"After Sales Utils escapeLikePattern should escape backslash","status":"passed","title":"should escape backslash","duration":0.38009999999985666,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Utils","escapeLikePattern"],"fullName":"After Sales Utils escapeLikePattern should not change normal strings","status":"passed","title":"should not change normal strings","duration":0.9492000000000189,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Utils","escapeLikePattern"],"fullName":"After Sales Utils escapeLikePattern should handle complex patterns","status":"passed","title":"should handle complex patterns","duration":0.5172000000002299,"failureMessages":[],"meta":{}}],"startTime":1772266871452,"endTime":1772266871458.517,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["After-Sales Analytics Actions"],"fullName":"After-Sales Analytics Actions should return correct report structure and data (snapshot)","status":"passed","title":"should return correct report structure and data (snapshot)","duration":14.83849999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Analytics Actions"],"fullName":"After-Sales Analytics Actions should handle empty analytics data","status":"passed","title":"should handle empty analytics data","duration":4.203199999999924,"failureMessages":[],"meta":{}}],"startTime":1772266862582,"endTime":1772266862602.2031,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/analytics.test.ts"},{"assertionResults":[{"ancestorTitles":["After-Sales Cost Closure (成本结案验证)"],"fullName":"After-Sales Cost Closure (成本结案验证) 场景1：正常结案，计算并记录内部损失","status":"passed","title":"场景1：正常结案，计算并记录内部损失","duration":11.701199999999517,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Cost Closure (成本结案验证)"],"fullName":"After-Sales Cost Closure (成本结案验证) 场景2：工单不存在时返回错误","status":"passed","title":"场景2：工单不存在时返回错误","duration":1.040100000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Cost Closure (成本结案验证)"],"fullName":"After-Sales Cost Closure (成本结案验证) 场景3：处理数据库异常","status":"passed","title":"场景3：处理数据库异常","duration":11.023600000000442,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Cost Closure (成本结案验证)"],"fullName":"After-Sales Cost Closure (成本结案验证) 场景4：无费用时的结案处理","status":"passed","title":"场景4：无费用时的结案处理","duration":2.775500000001557,"failureMessages":[],"meta":{}}],"startTime":1772266844314,"endTime":1772266844340.7754,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/cost-closure.test.ts"},{"assertionResults":[{"ancestorTitles":["Deduction Safety Logic (Optimized)","getDeductionLedger"],"fullName":"Deduction Safety Logic (Optimized) getDeductionLedger should return null if summary has no data","status":"passed","title":"should return null if summary has no data","duration":5.129100000000108,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","getDeductionLedger"],"fullName":"Deduction Safety Logic (Optimized) getDeductionLedger should calculate pending amount correctly","status":"passed","title":"should calculate pending amount correctly","duration":1.886000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","getDeductionLedger"],"fullName":"Deduction Safety Logic (Optimized) getDeductionLedger should handle WARNING status","status":"passed","title":"should handle WARNING status","duration":1.0832000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","getAllDeductionLedgers"],"fullName":"Deduction Safety Logic (Optimized) getAllDeductionLedgers should batch process multiple ledgers efficiently","status":"passed","title":"should batch process multiple ledgers efficiently","duration":2.9817999999995664,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","checkDeductionAllowed"],"fullName":"Deduction Safety Logic (Optimized) checkDeductionAllowed should respect limits","status":"passed","title":"should respect limits","duration":1.5069000000003143,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","checkDeductionAllowed"],"fullName":"Deduction Safety Logic (Optimized) checkDeductionAllowed should allow if new deduction is within limit for new party","status":"passed","title":"should allow if new deduction is within limit for new party","duration":0.7334000000000742,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","checkDeductionAllowed"],"fullName":"Deduction Safety Logic (Optimized) checkDeductionAllowed should block if new deduction exceeds limit for new party","status":"passed","title":"should block if new deduction exceeds limit for new party","duration":0.6203999999997905,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","checkDeductionAllowed"],"fullName":"Deduction Safety Logic (Optimized) checkDeductionAllowed should warn if new total approaches limit","status":"passed","title":"should warn if new total approaches limit","duration":0.6245000000008076,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","Tenant Context & Other Party Types"],"fullName":"Deduction Safety Logic (Optimized) Tenant Context & Other Party Types should return null/empty if no tenant session","status":"passed","title":"should return null/empty if no tenant session","duration":2.156500000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deduction Safety Logic (Optimized)","Tenant Context & Other Party Types"],"fullName":"Deduction Safety Logic (Optimized) Tenant Context & Other Party Types should correctly configure limits for MEASURER, LOGISTICS, CUSTOMER, COMPANY","status":"passed","title":"should correctly configure limits for MEASURER, LOGISTICS, CUSTOMER, COMPANY","duration":1.905399999999645,"failureMessages":[],"meta":{}}],"startTime":1772266852520,"endTime":1772266852539.9055,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/deduction-safety.test.ts"},{"assertionResults":[{"ancestorTitles":["Liability Notice Actions","createLiabilityNotice"],"fullName":"Liability Notice Actions createLiabilityNotice should create a liability notice successfully","status":"passed","title":"should create a liability notice successfully","duration":12.617400000000998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Liability Notice Actions","createLiabilityNotice"],"fullName":"Liability Notice Actions createLiabilityNotice should fail if ticket is closed","status":"passed","title":"should fail if ticket is closed","duration":8.970400000000154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Liability Notice Actions","confirmLiabilityNotice"],"fullName":"Liability Notice Actions confirmLiabilityNotice should confirm notice and update ticket deduction","status":"passed","title":"should confirm notice and update ticket deduction","duration":13.53729999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Liability Notice Actions","confirmLiabilityNotice"],"fullName":"Liability Notice Actions confirmLiabilityNotice should handle finance sync failure gracefully","status":"passed","title":"should handle finance sync failure gracefully","duration":6.492799999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Liability Notice Actions","disputeLiabilityNotice"],"fullName":"Liability Notice Actions disputeLiabilityNotice should set status to DISPUTED","status":"passed","title":"should set status to DISPUTED","duration":2.466500000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["Liability Notice Actions","arbitrateLiabilityNotice"],"fullName":"Liability Notice Actions arbitrateLiabilityNotice should set status to ARBITRATED","status":"passed","title":"should set status to ARBITRATED","duration":2.805000000000291,"failureMessages":[],"meta":{}}],"startTime":1772266830693,"endTime":1772266830740.805,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/liability-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["After-Sales Reconciliation (跨域对账保障)"],"fullName":"After-Sales Reconciliation (跨域对账保障) 场景1：财务同步成功时，定责单状态标记为 SYNCED","status":"passed","title":"场景1：财务同步成功时，定责单状态标记为 SYNCED","duration":18.767299999999523,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Reconciliation (跨域对账保障)"],"fullName":"After-Sales Reconciliation (跨域对账保障) 场景2：财务系统调用异常时，定责单状态标记为 FAILED","status":"passed","title":"场景2：财务系统调用异常时，定责单状态标记为 FAILED","duration":11.333000000000538,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Reconciliation (跨域对账保障)"],"fullName":"After-Sales Reconciliation (跨域对账保障) 场景3：checkTicketFinancialClosure 应准确识别未同步的定责单","status":"passed","title":"场景3：checkTicketFinancialClosure 应准确识别未同步的定责单","duration":1.0564999999987776,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Reconciliation (跨域对账保障)"],"fullName":"After-Sales Reconciliation (跨域对账保障) 场景4：非工厂责任方（如安装工）不触发财务对账单生成","status":"passed","title":"场景4：非工厂责任方（如安装工）不触发财务对账单生成","duration":2.9174000000002707,"failureMessages":[],"meta":{}}],"startTime":1772266836309,"endTime":1772266836342.9175,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/reconciliation.test.ts"},{"assertionResults":[{"ancestorTitles":["After-Sales State Machine","isValidTransition"],"fullName":"After-Sales State Machine isValidTransition should allow valid transitions from PENDING","status":"passed","title":"should allow valid transitions from PENDING","duration":3.0762000000004264,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isValidTransition"],"fullName":"After-Sales State Machine isValidTransition should allow valid transitions from INVESTIGATING","status":"passed","title":"should allow valid transitions from INVESTIGATING","duration":0.5474999999996726,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isValidTransition"],"fullName":"After-Sales State Machine isValidTransition should allow valid transitions from PROCESSING","status":"passed","title":"should allow valid transitions from PROCESSING","duration":0.3400999999994383,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isValidTransition"],"fullName":"After-Sales State Machine isValidTransition should not allow invalid transitions","status":"passed","title":"should not allow invalid transitions","duration":0.9241999999994732,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isValidTransition"],"fullName":"After-Sales State Machine isValidTransition should return false for unknown states","status":"passed","title":"should return false for unknown states","duration":0.4503999999997177,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","getAvailableTransitions"],"fullName":"After-Sales State Machine getAvailableTransitions should return correct targets for PENDING","status":"passed","title":"should return correct targets for PENDING","duration":2.161699999999655,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","getAvailableTransitions"],"fullName":"After-Sales State Machine getAvailableTransitions should return empty array for terminal states","status":"passed","title":"should return empty array for terminal states","duration":1.6455000000005384,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isTerminalState"],"fullName":"After-Sales State Machine isTerminalState should identify CLOSED and REJECTED as terminal","status":"passed","title":"should identify CLOSED and REJECTED as terminal","duration":0.5395000000007713,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","isTerminalState"],"fullName":"After-Sales State Machine isTerminalState should not identify other states as terminal","status":"passed","title":"should not identify other states as terminal","duration":0.7788000000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales State Machine","Data Integrity"],"fullName":"After-Sales State Machine Data Integrity should have all defined targets as keys (except terminal ones)","status":"passed","title":"should have all defined targets as keys (except terminal ones)","duration":0.9360999999998967,"failureMessages":[],"meta":{}}],"startTime":1772266858720,"endTime":1772266858732.936,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["After-Sales Ticket Actions","createAfterSalesTicket"],"fullName":"After-Sales Ticket Actions createAfterSalesTicket should create a ticket successfully","status":"failed","title":"should create a ticket successfully","duration":27.83230000000185,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ 'after-sales-analytics', 'default' ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[2m    \"after-sales-analytics\",\u001b[22m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/ticket-actions.test.ts:115:35\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","createAfterSalesTicket"],"fullName":"After-Sales Ticket Actions createAfterSalesTicket should fail if related order not found","status":"passed","title":"should fail if related order not found","duration":6.58640000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","createAfterSalesTicket"],"fullName":"After-Sales Ticket Actions createAfterSalesTicket should fail if unauthorized","status":"passed","title":"should fail if unauthorized","duration":0.5064000000020314,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","getTicketDetail"],"fullName":"After-Sales Ticket Actions getTicketDetail should return ticket detail and perform masking","status":"passed","title":"should return ticket detail and perform masking","duration":2.1353000000017346,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","getTicketDetail"],"fullName":"After-Sales Ticket Actions getTicketDetail should return failure if ticket not found","status":"passed","title":"should return failure if ticket not found","duration":0.9565000000002328,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","updateTicketStatus"],"fullName":"After-Sales Ticket Actions updateTicketStatus should update ticket status successfully","status":"failed","title":"should update ticket status successfully","duration":5.362499999999272,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ 'after-sales-analytics', 'default' ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   \"after-sales-analytics\",\u001b[90m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   \"after-sales-ticket-550e8400-e29b-41d4-a716-446655440006\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  2nd vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   \"after-sales-analytics\",\u001b[90m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   \"after-sales-list\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  3rd vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[2m    \"after-sales-analytics\",\u001b[22m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m3\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/ticket-actions.test.ts:202:35\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","updateTicketStatus"],"fullName":"After-Sales Ticket Actions updateTicketStatus should fail if ticket not found","status":"passed","title":"should fail if ticket not found","duration":0.8810000000012224,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","updateTicketStatus"],"fullName":"After-Sales Ticket Actions updateTicketStatus should fail for invalid status transition","status":"passed","title":"should fail for invalid status transition","duration":0.6572999999989406,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","getAfterSalesTickets"],"fullName":"After-Sales Ticket Actions getAfterSalesTickets should return ticket list","status":"passed","title":"should return ticket list","duration":1.6781000000009954,"failureMessages":[],"meta":{}},{"ancestorTitles":["After-Sales Ticket Actions","getAfterSalesTickets"],"fullName":"After-Sales Ticket Actions getAfterSalesTickets should handle search filters","status":"passed","title":"should handle search filters","duration":2.6106999999974505,"failureMessages":[],"meta":{}}],"startTime":1772266804604,"endTime":1772266804655.6106,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/ticket-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Virtual Cost Accounting Logic","getCompanyVirtualCosts"],"fullName":"Virtual Cost Accounting Logic getCompanyVirtualCosts should map notices to virtual cost records correctly","status":"passed","title":"should map notices to virtual cost records correctly","duration":5.469299999998839,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","getCompanyVirtualCosts"],"fullName":"Virtual Cost Accounting Logic getCompanyVirtualCosts should return empty array if no notices found","status":"passed","title":"should return empty array if no notices found","duration":2.0820999999996275,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","getVirtualCostSummary"],"fullName":"Virtual Cost Accounting Logic getVirtualCostSummary should aggregate costs by category and account","status":"passed","title":"should aggregate costs by category and account","duration":23.292300000000978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","exportVirtualCostReport"],"fullName":"Virtual Cost Accounting Logic exportVirtualCostReport should generate correct headers and rows","status":"passed","title":"should generate correct headers and rows","duration":3.324799999998504,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","getVirtualCostByDepartment"],"fullName":"Virtual Cost Accounting Logic getVirtualCostByDepartment should group costs by department and calculate percentages","status":"passed","title":"should group costs by department and calculate percentages","duration":1.90979999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","getVirtualCostByDepartment"],"fullName":"Virtual Cost Accounting Logic getVirtualCostByDepartment should handle empty costs gracefully and calculate 0 percentage","status":"passed","title":"should handle empty costs gracefully and calculate 0 percentage","duration":0.6843000000008033,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","Edge Cases and Mapping"],"fullName":"Virtual Cost Accounting Logic Edge Cases and Mapping should map unknown reasons to UNCLASSIFIED and OTHER department","status":"passed","title":"should map unknown reasons to UNCLASSIFIED and OTHER department","duration":1.7198000000007596,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","Edge Cases and Mapping"],"fullName":"Virtual Cost Accounting Logic Edge Cases and Mapping should generate empty export report when no data","status":"passed","title":"should generate empty export report when no data","duration":0.8207000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Virtual Cost Accounting Logic","Edge Cases and Mapping"],"fullName":"Virtual Cost Accounting Logic Edge Cases and Mapping should handle date ranges properly","status":"passed","title":"should handle date ranges properly","duration":1.3757000000005064,"failureMessages":[],"meta":{}}],"startTime":1772266833641,"endTime":1772266833683.3757,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/virtual-cost-accounting.test.ts"},{"assertionResults":[{"ancestorTitles":["Warranty Actions","checkWarrantyStatus"],"fullName":"Warranty Actions checkWarrantyStatus 应正确判定在保修期内（使用租户配置的 24 个月保修期）","status":"passed","title":"应正确判定在保修期内（使用租户配置的 24 个月保修期）","duration":8.443299999999908,"failureMessages":[],"meta":{}},{"ancestorTitles":["Warranty Actions","checkWarrantyStatus"],"fullName":"Warranty Actions checkWarrantyStatus 应正确判定已过保（默认 12 个月保修期）","status":"passed","title":"应正确判定已过保（默认 12 个月保修期）","duration":1.8032000000002881,"failureMessages":[],"meta":{}},{"ancestorTitles":["Warranty Actions","checkWarrantyStatus"],"fullName":"Warranty Actions checkWarrantyStatus 当订单不存在时应返回错误","status":"passed","title":"当订单不存在时应返回错误","duration":0.9395000000004075,"failureMessages":[],"meta":{}}],"startTime":1772266863751,"endTime":1772266863762.9395,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/after-sales/__tests__/warranty.test.ts"},{"assertionResults":[{"ancestorTitles":["Admin 模块安全测试","getWorkers"],"fullName":"Admin 模块安全测试 getWorkers 已授权应返回师傅列表","status":"passed","title":"已授权应返回师傅列表","duration":9.721599999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块安全测试","getWorkers"],"fullName":"Admin 模块安全测试 getWorkers TenantId 隔离 - 使用 session.tenantId 过滤","status":"passed","title":"TenantId 隔离 - 使用 session.tenantId 过滤","duration":1.7916000000004715,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块安全测试","getWorkerById"],"fullName":"Admin 模块安全测试 getWorkerById 不存在的工人应抛出错误","status":"passed","title":"不存在的工人应抛出错误","duration":3.8395000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块安全测试","updateWorker"],"fullName":"Admin 模块安全测试 updateWorker 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.5835000000006403,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块安全测试","updateWorker"],"fullName":"Admin 模块安全测试 updateWorker Zod 校验 - 缺少 id 应失败","status":"passed","title":"Zod 校验 - 缺少 id 应失败","duration":3.4243999999998778,"failureMessages":[],"meta":{}}],"startTime":1772266860306,"endTime":1772266860327.4243,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkers 分页安全"],"fullName":"Admin 模块 L5 安全测试 getWorkers 分页安全 正常分页参数应成功","status":"passed","title":"正常分页参数应成功","duration":7.501599999999598,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkers 分页安全"],"fullName":"Admin 模块 L5 安全测试 getWorkers 分页安全 pageSize 超过 100 应抛出校验错误","status":"passed","title":"pageSize 超过 100 应抛出校验错误","duration":5.1115999999983615,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkers 分页安全"],"fullName":"Admin 模块 L5 安全测试 getWorkers 分页安全 pageSize 为 0 应抛出校验错误","status":"passed","title":"pageSize 为 0 应抛出校验错误","duration":1.7834000000002561,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkers 分页安全"],"fullName":"Admin 模块 L5 安全测试 getWorkers 分页安全 page 为 0 应抛出校验错误","status":"passed","title":"page 为 0 应抛出校验错误","duration":1.8954999999987194,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkers 分页安全"],"fullName":"Admin 模块 L5 安全测试 getWorkers 分页安全 非管理员无权限应被拒绝","status":"passed","title":"非管理员无权限应被拒绝","duration":1.555500000000393,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkerById 安全"],"fullName":"Admin 模块 L5 安全测试 getWorkerById 安全 不存在的师傅应抛出错误","status":"passed","title":"不存在的师傅应抛出错误","duration":1.2623999999996158,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","getWorkerById 安全"],"fullName":"Admin 模块 L5 安全测试 getWorkerById 安全 返回的数据不应包含 passwordHash","status":"passed","title":"返回的数据不应包含 passwordHash","duration":2.399600000000646,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.7332999999998719,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 缺少 id 应返回验证失败","status":"passed","title":"缺少 id 应返回验证失败","duration":2.6825000000008004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 无效 UUID 格式应被拒绝","status":"passed","title":"无效 UUID 格式应被拒绝","duration":1.6314000000002125,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 name 超过 50 字符应被拒绝","status":"passed","title":"name 超过 50 字符应被拒绝","duration":1.0102999999999156,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 phone 非手机号格式应被拒绝","status":"passed","title":"phone 非手机号格式应被拒绝","duration":0.855199999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 avatarUrl 非 URL 格式应被拒绝","status":"passed","title":"avatarUrl 非 URL 格式应被拒绝","duration":1.4502000000011321,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker Zod 严格校验"],"fullName":"Admin 模块 L5 安全测试 updateWorker Zod 严格校验 合法手机号应通过校验","status":"passed","title":"合法手机号应通过校验","duration":1.8585999999995693,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker 安全防护"],"fullName":"Admin 模块 L5 安全测试 updateWorker 安全防护 自禁保护 - 禁用自己应返回错误","status":"passed","title":"自禁保护 - 禁用自己应返回错误","duration":1.2277999999987514,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker 安全防护"],"fullName":"Admin 模块 L5 安全测试 updateWorker 安全防护 禁用其他用户应成功","status":"passed","title":"禁用其他用户应成功","duration":1.2767000000003463,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker 安全防护"],"fullName":"Admin 模块 L5 安全测试 updateWorker 安全防护 启用用户时审计 action 应为 ENABLE_WORKER","status":"passed","title":"启用用户时审计 action 应为 ENABLE_WORKER","duration":6.766100000000733,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker 安全防护"],"fullName":"Admin 模块 L5 安全测试 updateWorker 安全防护 禁用用户时审计 action 应为 DISABLE_WORKER","status":"passed","title":"禁用用户时审计 action 应为 DISABLE_WORKER","duration":1.7322000000003754,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateWorker 安全防护"],"fullName":"Admin 模块 L5 安全测试 updateWorker 安全防护 AuditService.log 应包含旧值和新值","status":"passed","title":"AuditService.log 应包含旧值和新值","duration":1.8544000000001688,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","createRole 安全"],"fullName":"Admin 模块 L5 安全测试 createRole 安全 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.0851999999995314,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","createRole 安全"],"fullName":"Admin 模块 L5 安全测试 createRole 安全 使用无效权限字符串应被拒绝（权限白名单）","status":"passed","title":"使用无效权限字符串应被拒绝（权限白名单）","duration":3.0777000000016415,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","createRole 安全"],"fullName":"Admin 模块 L5 安全测试 createRole 安全 使用合法权限应创建成功","status":"passed","title":"使用合法权限应创建成功","duration":2.570499999999811,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","createRole 安全"],"fullName":"Admin 模块 L5 安全测试 createRole 安全 重名角色应被拒绝","status":"passed","title":"重名角色应被拒绝","duration":6.564199999998891,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateRolePermissions 安全"],"fullName":"Admin 模块 L5 安全测试 updateRolePermissions 安全 系统角色不可修改权限","status":"passed","title":"系统角色不可修改权限","duration":2.226300000000265,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateRolePermissions 安全"],"fullName":"Admin 模块 L5 安全测试 updateRolePermissions 安全 非系统角色应可修改权限","status":"passed","title":"非系统角色应可修改权限","duration":0.9361000000008062,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","updateRolePermissions 安全"],"fullName":"Admin 模块 L5 安全测试 updateRolePermissions 安全 无效 roleId 格式应被拒绝","status":"passed","title":"无效 roleId 格式应被拒绝","duration":0.9209000000009837,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","deleteRole 安全"],"fullName":"Admin 模块 L5 安全测试 deleteRole 安全 系统角色不可删除","status":"passed","title":"系统角色不可删除","duration":1.4231999999992695,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","deleteRole 安全"],"fullName":"Admin 模块 L5 安全测试 deleteRole 安全 有活跃用户的角色不可删除","status":"passed","title":"有活跃用户的角色不可删除","duration":0.780800000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","deleteRole 安全"],"fullName":"Admin 模块 L5 安全测试 deleteRole 安全 无活跃用户的非系统角色应可删除","status":"passed","title":"无活跃用户的非系统角色应可删除","duration":0.7420000000001892,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin 模块 L5 安全测试","deleteRole 安全"],"fullName":"Admin 模块 L5 安全测试 deleteRole 安全 删除角色时应记录审计日志","status":"passed","title":"删除角色时应记录审计日志","duration":1.3384000000005472,"failureMessages":[],"meta":{}}],"startTime":1772266827879,"endTime":1772266827948.3384,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/admin-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Audit Automation - 自动化审计日志校验"],"fullName":"Audit Automation - 自动化审计日志校验 修改角色权限时，应当触发详细的审计日志","status":"passed","title":"修改角色权限时，应当触发详细的审计日志","duration":19.551800000000185,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Automation - 自动化审计日志校验"],"fullName":"Audit Automation - 自动化审计日志校验 禁用师傅账号时，应当记录旧状态和新状态","status":"passed","title":"禁用师傅账号时，应当记录旧状态和新状态","duration":5.05580000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Automation - 自动化审计日志校验"],"fullName":"Audit Automation - 自动化审计日志校验 修改租户 MFA 配置时，应当记录安全策略变更","status":"passed","title":"修改租户 MFA 配置时，应当记录安全策略变更","duration":4.19800000000032,"failureMessages":[],"meta":{}}],"startTime":1772266850021,"endTime":1772266850050.198,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/audit-automation.test.ts"},{"assertionResults":[{"ancestorTitles":["PolicyEngine - 策略引擎单元测试"],"fullName":"PolicyEngine - 策略引擎单元测试 如果没有注册规则，默认应该允许访问","status":"passed","title":"如果没有注册规则，默认应该允许访问","duration":3.4143000000003667,"failureMessages":[],"meta":{}},{"ancestorTitles":["PolicyEngine - 策略引擎单元测试"],"fullName":"PolicyEngine - 策略引擎单元测试 能够正确注册并执行规则","status":"passed","title":"能够正确注册并执行规则","duration":4.15519999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["PolicyEngine - 策略引擎单元测试"],"fullName":"PolicyEngine - 策略引擎单元测试 一票否决制：只要有一个规则拒绝，整体就拒绝","status":"passed","title":"一票否决制：只要有一个规则拒绝，整体就拒绝","duration":1.532799999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["PolicyEngine - 策略引擎单元测试","WorkingHoursPolicy - 工作时间策略测试"],"fullName":"PolicyEngine - 策略引擎单元测试 WorkingHoursPolicy - 工作时间策略测试 在工作时间内（10:00）应该允许访问","status":"passed","title":"在工作时间内（10:00）应该允许访问","duration":1.0718999999999141,"failureMessages":[],"meta":{}},{"ancestorTitles":["PolicyEngine - 策略引擎单元测试","WorkingHoursPolicy - 工作时间策略测试"],"fullName":"PolicyEngine - 策略引擎单元测试 WorkingHoursPolicy - 工作时间策略测试 在非工作时间（深夜 23:30）应该拒绝访问","status":"passed","title":"在非工作时间（深夜 23:30）应该拒绝访问","duration":1.0258000000003449,"failureMessages":[],"meta":{}},{"ancestorTitles":["PolicyEngine - 策略引擎单元测试","WorkingHoursPolicy - 工作时间策略测试"],"fullName":"PolicyEngine - 策略引擎单元测试 WorkingHoursPolicy - 工作时间策略测试 在非工作时间（凌晨 01:00）应该拒绝访问","status":"passed","title":"在非工作时间（凌晨 01:00）应该拒绝访问","duration":0.5943000000006577,"failureMessages":[],"meta":{}}],"startTime":1772266862742,"endTime":1772266862754.5942,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/policy-engine.test.ts"},{"assertionResults":[{"ancestorTitles":["Security Governance - 安全治理专项测试","AdminRateLimiter - 速率限制测试"],"fullName":"Security Governance - 安全治理专项测试 AdminRateLimiter - 速率限制测试 应当允许在阈值内的操作","status":"passed","title":"应当允许在阈值内的操作","duration":9.409700000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","AdminRateLimiter - 速率限制测试"],"fullName":"Security Governance - 安全治理专项测试 AdminRateLimiter - 速率限制测试 应当拒绝超过阈值的操作","status":"passed","title":"应当拒绝超过阈值的操作","duration":3.5751000000000204,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","AdminRateLimiter - 速率限制测试"],"fullName":"Security Governance - 安全治理专项测试 AdminRateLimiter - 速率限制测试 滑动窗口重置后应当恢复可用","status":"passed","title":"滑动窗口重置后应当恢复可用","duration":1.8518000000003667,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","AdminRateLimiter - 速率限制测试"],"fullName":"Security Governance - 安全治理专项测试 AdminRateLimiter - 速率限制测试 不同操作类型的速率限制应当相互独立","status":"passed","title":"不同操作类型的速率限制应当相互独立","duration":1.7714000000005399,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","QuotaManager - 资源配额测试"],"fullName":"Security Governance - 安全治理专项测试 QuotaManager - 资源配额测试 当角色数量未达上限时应当允许创建","status":"passed","title":"当角色数量未达上限时应当允许创建","duration":1.237199999999575,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","QuotaManager - 资源配额测试"],"fullName":"Security Governance - 安全治理专项测试 QuotaManager - 资源配额测试 当角色数量达到上限时应当拒绝创建","status":"passed","title":"当角色数量达到上限时应当拒绝创建","duration":1.0762999999997191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Governance - 安全治理专项测试","QuotaManager - 资源配额测试"],"fullName":"Security Governance - 安全治理专项测试 QuotaManager - 资源配额测试 租户之间的配额应当相互隔离 (多租户隔离验证)","status":"passed","title":"租户之间的配额应当相互隔离 (多租户隔离验证)","duration":1.1028000000005704,"failureMessages":[],"meta":{}}],"startTime":1772266848940,"endTime":1772266848961.1028,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/security-governance.test.ts"},{"assertionResults":[{"ancestorTitles":["Tenant Settings 模块测试","getTenantInfo"],"fullName":"Tenant Settings 模块测试 getTenantInfo 应成功返回租户基本信息","status":"passed","title":"应成功返回租户基本信息","duration":4.959100000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getTenantInfo"],"fullName":"Tenant Settings 模块测试 getTenantInfo 租户不存在应返回错误","status":"passed","title":"租户不存在应返回错误","duration":1.149199999999837,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getTenantInfo"],"fullName":"Tenant Settings 模块测试 getTenantInfo 无权限应返回错误","status":"passed","title":"无权限应返回错误","duration":0.7710000000006403,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getTenantInfo"],"fullName":"Tenant Settings 模块测试 getTenantInfo 返回数据应包含所有必要字段","status":"passed","title":"返回数据应包含所有必要字段","duration":2.254799999998795,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getMfaConfig"],"fullName":"Tenant Settings 模块测试 getMfaConfig 应返回已配置的 MFA 信息","status":"passed","title":"应返回已配置的 MFA 信息","duration":2.2814999999991414,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getMfaConfig"],"fullName":"Tenant Settings 模块测试 getMfaConfig settings 为 null 时应返回默认值","status":"passed","title":"settings 为 null 时应返回默认值","duration":0.7093999999997322,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getMfaConfig"],"fullName":"Tenant Settings 模块测试 getMfaConfig settings.mfa 不存在时应返回默认值","status":"passed","title":"settings.mfa 不存在时应返回默认值","duration":0.6309999999994034,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getMfaConfig"],"fullName":"Tenant Settings 模块测试 getMfaConfig 租户不存在应返回错误","status":"passed","title":"租户不存在应返回错误","duration":0.47330000000147265,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","getMfaConfig"],"fullName":"Tenant Settings 模块测试 getMfaConfig 无权限应返回错误","status":"passed","title":"无权限应返回错误","duration":0.8268000000007305,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.6507999999994354,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 合法参数应成功更新","status":"passed","title":"合法参数应成功更新","duration":4.581699999998818,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 更新后应记录审计日志","status":"passed","title":"更新后应记录审计日志","duration":6.404099999999744,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo name 超过 100 字符应被拒绝","status":"passed","title":"name 超过 100 字符应被拒绝","duration":1.6082000000005792,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo name 为空字符串应被拒绝","status":"passed","title":"name 为空字符串应被拒绝","duration":0.6427000000003318,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 手机号格式错误应被拒绝","status":"passed","title":"手机号格式错误应被拒绝","duration":1.249599999999191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 合法手机号应通过校验","status":"passed","title":"合法手机号应通过校验","duration":1.031699999999546,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo 邮箱格式错误应被拒绝","status":"passed","title":"邮箱格式错误应被拒绝","duration":1.0091000000011263,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateTenantInfo"],"fullName":"Tenant Settings 模块测试 updateTenantInfo logoUrl 非 URL 格式应被拒绝","status":"passed","title":"logoUrl 非 URL 格式应被拒绝","duration":1.048399999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.4135000000005675,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 启用 MFA 应成功","status":"passed","title":"启用 MFA 应成功","duration":2.2091999999993277,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 禁用 MFA 应成功","status":"passed","title":"禁用 MFA 应成功","duration":0.7120999999988271,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 更新 MFA 应记录审计日志","status":"passed","title":"更新 MFA 应记录审计日志","duration":1.4359999999996944,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 审计日志应包含旧值和新值","status":"passed","title":"审计日志应包含旧值和新值","duration":2.1561000000001513,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig method 不在枚举范围内应被拒绝","status":"passed","title":"method 不在枚举范围内应被拒绝","duration":1.1244000000006054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig settings 为 null 时应能合并新 MFA 配置","status":"passed","title":"settings 为 null 时应能合并新 MFA 配置","duration":0.9236000000000786,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Settings 模块测试","updateMfaConfig"],"fullName":"Tenant Settings 模块测试 updateMfaConfig 租户不存在应返回错误","status":"passed","title":"租户不存在应返回错误","duration":0.5233000000007451,"failureMessages":[],"meta":{}}],"startTime":1772266834056,"endTime":1772266834100.5232,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/admin/__tests__/tenant-settings.test.ts"},{"assertionResults":[{"ancestorTitles":["Approval Enhancements"],"fullName":"Approval Enhancements should handle Parallel Approval (ANY)","status":"skipped","title":"should handle Parallel Approval (ANY)","failureMessages":[],"meta":{}},{"ancestorTitles":["Approval Enhancements"],"fullName":"Approval Enhancements should handle Parallel Approval (ALL)","status":"skipped","title":"should handle Parallel Approval (ALL)","failureMessages":[],"meta":{}},{"ancestorTitles":["Approval Enhancements"],"fullName":"Approval Enhancements should handle Delegation","status":"skipped","title":"should handle Delegation","failureMessages":[],"meta":{}},{"ancestorTitles":["Approval Enhancements"],"fullName":"Approval Enhancements should handle Withdraw","status":"skipped","title":"should handle Withdraw","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/approval/__tests__/approval-enhancements.test.ts"},{"assertionResults":[{"ancestorTitles":["Approval Integration Tests"],"fullName":"Approval Integration Tests should allow adding an approver (addApprover)","status":"skipped","title":"should allow adding an approver (addApprover)","failureMessages":[],"meta":{}},{"ancestorTitles":["Approval Integration Tests"],"fullName":"Approval Integration Tests should process approval (processApproval)","status":"skipped","title":"should process approval (processApproval)","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/approval/__tests__/approval-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Approval Lifecycle Integration Tests"],"fullName":"Approval Lifecycle Integration Tests should run full approval lifecycle (Submit -> Add Approver -> Majority Approve)","status":"skipped","title":"should run full approval lifecycle (Submit -> Add Approver -> Majority Approve)","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/approval/__tests__/approval-lifecycle.test.ts"},{"assertionResults":[{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should return true if conditions array is empty, null, or undefined","status":"passed","title":"should return true if conditions array is empty, null, or undefined","duration":3.633100000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate equality (eq)","status":"passed","title":"should evaluate equality (eq)","duration":1.1244000000006054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate inequality (ne)","status":"passed","title":"should evaluate inequality (ne)","duration":0.5057999999999083,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate strictly greater than (gt)","status":"passed","title":"should evaluate strictly greater than (gt)","duration":1.2354000000004817,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate strictly less than (lt)","status":"passed","title":"should evaluate strictly less than (lt)","duration":0.5957000000007611,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate inclusion (in)","status":"passed","title":"should evaluate inclusion (in)","duration":0.4193999999997686,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should return false when a field is missing in payload for standard operators","status":"passed","title":"should return false when a field is missing in payload for standard operators","duration":0.5555000000003929,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should return true if operator is completely unknown/default","status":"passed","title":"should return true if operator is completely unknown/default","duration":0.37520000000040454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Condition Evaluator (evaluateConditions)"],"fullName":"Condition Evaluator (evaluateConditions) should evaluate multiple conditions with logical AND behavior","status":"passed","title":"should evaluate multiple conditions with logical AND behavior","duration":1.034099999999853,"failureMessages":[],"meta":{}}],"startTime":1772266867689,"endTime":1772266867699.0342,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/approval/__tests__/condition-evaluator.test.ts"},{"assertionResults":[{"ancestorTitles":["Graph Utils - flattenApprovalGraph"],"fullName":"Graph Utils - flattenApprovalGraph should return empty array if no start node","status":"passed","title":"should return empty array if no start node","duration":3.9462000000003172,"failureMessages":[],"meta":{}},{"ancestorTitles":["Graph Utils - flattenApprovalGraph"],"fullName":"Graph Utils - flattenApprovalGraph should flatten a simple linear graph","status":"passed","title":"should flatten a simple linear graph","duration":2.799599999999373,"failureMessages":[],"meta":{}},{"ancestorTitles":["Graph Utils - flattenApprovalGraph"],"fullName":"Graph Utils - flattenApprovalGraph should handle condition nodes and attach conditions to next approver","status":"passed","title":"should handle condition nodes and attach conditions to next approver","duration":1.4637000000002445,"failureMessages":[],"meta":{}},{"ancestorTitles":["Graph Utils - flattenApprovalGraph"],"fullName":"Graph Utils - flattenApprovalGraph should handle cycles gracefully by ignoring back-edges","status":"passed","title":"should handle cycles gracefully by ignoring back-edges","duration":1.2646999999997206,"failureMessages":[],"meta":{}},{"ancestorTitles":["Graph Utils - flattenApprovalGraph"],"fullName":"Graph Utils - flattenApprovalGraph should parse various operators correctly","status":"passed","title":"should parse various operators correctly","duration":0.9655000000002474,"failureMessages":[],"meta":{}}],"startTime":1772266866865,"endTime":1772266866875.9656,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/approval/__tests__/graph-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["Analytics 模块安全测试","Auth 保护"],"fullName":"Analytics 模块安全测试 Auth 保护 getDashboardStats - 未登录应返回 success: false","status":"passed","title":"getDashboardStats - 未登录应返回 success: false","duration":3.800000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["Analytics 模块安全测试","Auth 保护"],"fullName":"Analytics 模块安全测试 Auth 保护 getSalesFunnel - 未登录应返回 success: false","status":"passed","title":"getSalesFunnel - 未登录应返回 success: false","duration":0.6370000000006257,"failureMessages":[],"meta":{}},{"ancestorTitles":["Analytics 模块安全测试","Auth 保护"],"fullName":"Analytics 模块安全测试 Auth 保护 getLeaderboard - 未登录应返回 success: false","status":"passed","title":"getLeaderboard - 未登录应返回 success: false","duration":0.44059999999990396,"failureMessages":[],"meta":{}},{"ancestorTitles":["Analytics 模块安全测试","正常访问"],"fullName":"Analytics 模块安全测试 正常访问 getDashboardStats - 已登录应正常返回数据","status":"passed","title":"getDashboardStats - 已登录应正常返回数据","duration":6.654500000000553,"failureMessages":[],"meta":{}}],"startTime":1772266866059,"endTime":1772266866071.6545,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Auth 模块结构测试"],"fullName":"Auth 模块结构测试 LoginForm 组件应可导入","status":"passed","title":"LoginForm 组件应可导入","duration":4075.1317,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth 模块结构测试"],"fullName":"Auth 模块结构测试 LoginForm 是一个 React 组件函数","status":"passed","title":"LoginForm 是一个 React 组件函数","duration":1.3192999999992026,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth 模块结构测试"],"fullName":"Auth 模块结构测试 模块不应导出任何 server action","status":"failed","title":"模块不应导出任何 server action","duration":13.527299999999741,"failureMessages":["AssertionError: expected [ 'actions', 'components', …(2) ] to not include 'actions'\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1252:15)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/actions.test.ts:49:29\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1772266796616,"endTime":1772266800706.5273,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["LoginForm"],"fullName":"LoginForm renders correctly","status":"passed","title":"renders correctly","duration":548.9545999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm shows error toast when submitting empty form (Zod validation)","status":"passed","title":"shows error toast when submitting empty form (Zod validation)","duration":34.475899999999456,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm toggles password visibility","status":"passed","title":"toggles password visibility","duration":175.90489999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm has a link to forgot password page","status":"passed","title":"has a link to forgot password page","duration":204.84629999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm submits form and handles successful login","status":"failed","title":"submits form and handles successful login","duration":1535.9075999999986,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ '/' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[39m\n  \u001b[36m<head />\u001b[39m\n  \u001b[36m<body>\u001b[39m\n    \u001b[36m<div>\u001b[39m\n      \u001b[36m<div\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"shadow-input mx-auto w-full max-w-md rounded-2xl border border-white/20 bg-white/10 p-8 backdrop-blur-xl transition-all duration-300 dark:bg-black/40\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<h2\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"text-center text-2xl font-bold text-neutral-800 dark:text-neutral-200\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0m欢迎回到 L2C 系统\u001b[0m\n        \u001b[36m</h2>\u001b[39m\n        \u001b[36m<p\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"mt-2 text-center text-sm text-neutral-600 dark:text-neutral-400\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0m线索到现金，一站式销售管理\u001b[0m\n        \u001b[36m</p>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"mt-8\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex w-full flex-col space-y-2 mb-4\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<label\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-neutral-700 dark:text-neutral-300\"\u001b[39m\n              \u001b[33mfor\u001b[39m=\u001b[32m\"username\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m手机号 / 邮箱\u001b[0m\n            \u001b[36m</label>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-mail absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-neutral-500\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<rect\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"16\"\u001b[39m\n                  \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"20\"\u001b[39m\n                  \u001b[33mx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<input\u001b[39m\n                \u001b[33maria-required\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mautocomplete\u001b[39m=\u001b[32m\"username\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-xl border border-white/20 bg-white/10 dark:bg-black/20 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-50 glass-input pl-10\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"username\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"请输入手机号或邮箱\"\u001b[39m\n                \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                \u001b[33mvalue\u001b[39m=\u001b[32m\"test@example.com\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex w-full flex-col space-y-2 mb-2\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<label\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-neutral-700 dark:text-neutral-300\"\u001b[39m\n              \u001b[33mfor\u001b[39m=\u001b[32m\"password\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m密码\u001b[0m\n            \u001b[36m</label>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-lock absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-neutral-500\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<rect\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                  \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mry\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                  \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                  \u001b[33my\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"M7 11V7a5 5 0 0 1 10 0v4\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<input\u001b[39m\n                \u001b[33maria-required\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mautocomplete\u001b[39m=\u001b[32m\"current-password\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-xl border border-white/20 bg-white/10 dark:bg-black/20 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-50 glass-input pr-10 pl-10\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"请输入密码\"\u001b[39m\n                \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[33mtype\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                \u001b[33mvalue\u001b[39m=\u001b[32m\"password123\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33maria-label\u001b[39m=\u001b[32m\"显示密码\"\u001b[39m\n                \u001b[33maria-pressed\u001b[39m=\u001b[32m\"false\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"absolute top-1/2 right-3 -translate-y-1/2 text-neutral-500 transition-colors hover:text-neutral-700 dark:hover:text-neutral-300\"\u001b[39m\n                \u001b[33mtabindex\u001b[39m=\u001b[32m\"-1\"\u001b[39m\n                \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-eye h-4 w-4\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6 flex justify-end\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<a\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 text-sm transition-colors\"\u001b[39m\n              \u001b[33mhref\u001b[39m=\u001b[32m\"/forgot-password\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m忘记密码？\u001b[0m\n            \u001b[36m</a>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-busy\u001b[39m=\u001b[32m\"false\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"group/btn from-primary-600 to-primary-700 shadow-primary-500/30 hover:from-primary-500 hover:to-primary-600 relative block h-11 w-full rounded-xl bg-linear-to-br font-medium text-white shadow-lg transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-50\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m登录\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<span\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-x-0 -bottom-px block h-px w-full bg-linear-to-r from-transparent via-cyan-500 to-transparent opacity-0 transition duration-500 group-hover/btn:opacity-100\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<span\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-x-10 -bottom-px mx-auto block h-px w-1/2 bg-linear-to-r from-transparent via-indigo-500 to-transparent opacity-0 blur-sm transition duration-500 group-hover/btn:opacity-100\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"my-6 flex items-center\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"h-px flex-1 bg-linear-to-r from-transparent via-neutral-300 to-transparent dark:via-neutral-700\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<span\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"px-4 text-sm text-neutral-500\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m或\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"h-px flex-1 bg-linear-to-r from-transparent via-neutral-300 to-transparent dark:via-neutral-700\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<p\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"text-center text-sm text-neutral-600 dark:text-neutral-400\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0m还没有账号？\u001b[0m\n            \u001b[0m \u001b[0m\n            \u001b[36m<a\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 font-medium underline-offset-4 transition-colors hover:underline\"\u001b[39m\n              \u001b[33mhref\u001b[39m=\u001b[32m\"/register/tenant\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m立即注册\u001b[0m\n            \u001b[36m</a>\u001b[39m\n          \u001b[36m</p>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</body>\u001b[39m\n\u001b[36m</html>\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/login-form.test.tsx:117:24\n    at runWithExpensiveErrorDiagnosticsDisabled (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\@testing-library+dom@10.4.1\\node_modules\\@testing-library\\dom\\dist\\config.js:47:12)\n    at checkCallback (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\@testing-library+dom@10.4.1\\node_modules\\@testing-library\\dom\\dist\\wait-for.js:124:77)\n    at Timeout.checkRealTimersCallback (C:\\Users\\bigey\\Documents\\Antigravity\\L2C\\node_modules\\.pnpm\\@testing-library+dom@10.4.1\\node_modules\\@testing-library\\dom\\dist\\wait-for.js:118:16)\n    at listOnTimeout (node:internal/timers:588:17)\n    at processTimers (node:internal/timers:523:7)"],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm handles login failure with error message","status":"passed","title":"handles login failure with error message","duration":89.99219999999877,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginForm"],"fullName":"LoginForm handles unexpected exceptions during login","status":"passed","title":"handles unexpected exceptions during login","duration":82.2533999999996,"failureMessages":[],"meta":{}}],"startTime":1772266800702,"endTime":1772266803375.2534,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/login-form.test.tsx"},{"assertionResults":[{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 1. 精确匹配 (Exact Match): 角色拥有具体权限放行","status":"passed","title":"1. 精确匹配 (Exact Match): 角色拥有具体权限放行","duration":4.190200000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 2. 精确匹配失败: 角色不拥有具体权限拦截","status":"passed","title":"2. 精确匹配失败: 角色不拥有具体权限拦截","duration":1.3171999999995023,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 3. 通配符匹配 (Wildcard Match): 拥有 * 的超级管理员直接放行","status":"passed","title":"3. 通配符匹配 (Wildcard Match): 拥有 * 的超级管理员直接放行","duration":0.5014000000001033,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 4. 通配符匹配 (Wildcard Match): 拥有 ** 同样放行","status":"passed","title":"4. 通配符匹配 (Wildcard Match): 拥有 ** 同样放行","duration":1.1555000000007567,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 5. 数据范围推导 (Implicit Scope): 校验 order.edit, 角色拥有 order.own.edit, 应隐形放行","status":"passed","title":"5. 数据范围推导 (Implicit Scope): 校验 order.edit, 角色拥有 order.own.edit, 应隐形放行","duration":1.0609000000004016,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 6. 数据范围推导 (Implicit Scope): 校验 order.edit, 角色拥有 order.all.edit, 应隐形放行","status":"failed","title":"6. 数据范围推导 (Implicit Scope): 校验 order.edit, 角色拥有 order.all.edit, 应隐形放行","duration":15.73909999999978,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/rbac.test.ts:131:24\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 7. 综合多角色合并测试","status":"passed","title":"7. 综合多角色合并测试","duration":0.8998000000001412,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 8. 极端边缘测试: 未绑定角色、无角色返回拦截","status":"passed","title":"8. 极端边缘测试: 未绑定角色、无角色返回拦截","duration":0.7304999999996653,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 9. ADMIN 魔术常量短路放行","status":"passed","title":"9. ADMIN 魔术常量短路放行","duration":1.2786999999998443,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC checkRolePermission Core Logic"],"fullName":"RBAC checkRolePermission Core Logic 10. 权限缓存命中验证: 连续两次检查应仅触发一次数据库查询","status":"passed","title":"10. 权限缓存命中验证: 连续两次检查应仅触发一次数据库查询","duration":0.9700000000002547,"failureMessages":[],"meta":{}}],"startTime":1772266795760,"endTime":1772266795788.97,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/auth/__tests__/rbac.test.ts"},{"assertionResults":[{"ancestorTitles":["Dashboard Actions 集成测试","getDashboardStats"],"fullName":"Dashboard Actions 集成测试 getDashboardStats 管理员应能获取全量统计数据","status":"passed","title":"管理员应能获取全量统计数据","duration":57.10030000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Actions 集成测试","getDashboardStats"],"fullName":"Dashboard Actions 集成测试 getDashboardStats 销售角色应获取个人统计数据","status":"passed","title":"销售角色应获取个人统计数据","duration":3.953400000000329,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Actions 集成测试","getDashboardStats"],"fullName":"Dashboard Actions 集成测试 getDashboardStats 数据库异常时应返回错误响应","status":"passed","title":"数据库异常时应返回错误响应","duration":13.472599999999147,"failureMessages":[],"meta":{}}],"startTime":1772266825399,"endTime":1772266825473.4727,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Dashboard Config Actions 集成测试","getDashboardConfigAction"],"fullName":"Dashboard Config Actions 集成测试 getDashboardConfigAction 应该调用 WorkbenchService 获取配置","status":"passed","title":"应该调用 WorkbenchService 获取配置","duration":6.34230000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Config Actions 集成测试","saveDashboardConfigAction"],"fullName":"Dashboard Config Actions 集成测试 saveDashboardConfigAction 应该保存配置并清除缓存","status":"failed","title":"应该保存配置并清除缓存","duration":24.04819999999745,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ 'dashboard-config:u1', 'default' ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[2m    \"dashboard-config:u1\",\u001b[22m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/config-actions.test.ts:85:35\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Dashboard Config Actions 集成测试","saveDashboardConfigAction"],"fullName":"Dashboard Config Actions 集成测试 saveDashboardConfigAction 保存失败时应返回错误响应","status":"passed","title":"保存失败时应返回错误响应","duration":6.532100000000355,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Config Actions 集成测试","resetDashboardConfigAction"],"fullName":"Dashboard Config Actions 集成测试 resetDashboardConfigAction 应该重置配置并清除缓存","status":"failed","title":"应该重置配置并清除缓存","duration":4.650400000002264,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ 'dashboard-config:u1', 'default' ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[2m    \"dashboard-config:u1\",\u001b[22m\n\u001b[32m-   \"default\",\u001b[90m\n\u001b[31m+   {},\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/config-actions.test.ts:104:35\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Dashboard Config Actions 集成测试","resetDashboardConfigAction"],"fullName":"Dashboard Config Actions 集成测试 resetDashboardConfigAction 重置失败时应返回错误响应","status":"passed","title":"重置失败时应返回错误响应","duration":2.957299999998213,"failureMessages":[],"meta":{}}],"startTime":1772266804435,"endTime":1772266804480.9573,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/config-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Dashboard 安全性测试","Auth 保护"],"fullName":"Dashboard 安全性测试 Auth 保护 getDashboardStats - 未登录应返回 success: false","status":"passed","title":"getDashboardStats - 未登录应返回 success: false","duration":4.307300000000396,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","Auth 保护"],"fullName":"Dashboard 安全性测试 Auth 保护 getDashboardConfigAction - 未登录应返回默认配置","status":"passed","title":"getDashboardConfigAction - 未登录应返回默认配置","duration":1.0441999999984546,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","Zod 校验"],"fullName":"Dashboard 安全性测试 Zod 校验 getDashboardStats - 传入非法额外字段应仍然通过（宽松 schema）","status":"passed","title":"getDashboardStats - 传入非法额外字段应仍然通过（宽松 schema）","duration":42.30689999999959,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","TenantId 隔离"],"fullName":"Dashboard 安全性测试 TenantId 隔离 getDashboardStats - 使用 session tenantId 过滤数据","status":"passed","title":"getDashboardStats - 使用 session tenantId 过滤数据","duration":1.922499999998763,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 ADMIN 角色应返回全量管理员卡片","status":"passed","title":"ADMIN 角色应返回全量管理员卡片","duration":1.831399999999121,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 MANAGER 角色应返回管理视图","status":"passed","title":"MANAGER 角色应返回管理视图","duration":1.0419000000001688,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 SALES 角色应返回销售个人卡片","status":"passed","title":"SALES 角色应返回销售个人卡片","duration":1.0484999999989668,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 WORKER 角色应返回工人任务卡片","status":"passed","title":"WORKER 角色应返回工人任务卡片","duration":0.7283000000006723,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 FINANCE 角色应返回默认欢迎卡片","status":"passed","title":"FINANCE 角色应返回默认欢迎卡片","duration":0.8749000000007072,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 DISPATCHER 角色应返回默认欢迎卡片","status":"passed","title":"DISPATCHER 角色应返回默认欢迎卡片","duration":1.5105000000003201,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","角色覆盖"],"fullName":"Dashboard 安全性测试 角色覆盖 UNKNOWN_ROLE 应回退到 GUEST 并返回欢迎卡片","status":"passed","title":"UNKNOWN_ROLE 应回退到 GUEST 并返回欢迎卡片","duration":1.0758000000005268,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","默认配置角色覆盖"],"fullName":"Dashboard 安全性测试 默认配置角色覆盖 每个角色都应返回有效的默认 Widget 配置","status":"passed","title":"每个角色都应返回有效的默认 Widget 配置","duration":1.1067000000002736,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","默认配置角色覆盖"],"fullName":"Dashboard 安全性测试 默认配置角色覆盖 ADMIN 应获得最多 Widget","status":"passed","title":"ADMIN 应获得最多 Widget","duration":0.3909000000003289,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard 安全性测试","默认配置角色覆盖"],"fullName":"Dashboard 安全性测试 默认配置角色覆盖 数据库异常时应返回错误","status":"passed","title":"数据库异常时应返回错误","duration":0.6747999999988679,"failureMessages":[],"meta":{}}],"startTime":1772266828813,"endTime":1772266828874.6748,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/security.test.ts"},{"assertionResults":[{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 SALES 应该返回 5 个默认 Widget","status":"passed","title":"角色 SALES 应该返回 5 个默认 Widget","duration":4.489999999999782,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 MANAGER 应该返回 8 个默认 Widget","status":"passed","title":"角色 MANAGER 应该返回 8 个默认 Widget","duration":0.8586000000004788,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 ADMIN 应该返回 8 个默认 Widget","status":"passed","title":"角色 ADMIN 应该返回 8 个默认 Widget","duration":0.5561999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 DISPATCHER 应该返回 3 个默认 Widget","status":"passed","title":"角色 DISPATCHER 应该返回 3 个默认 Widget","duration":0.8647000000000844,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 FINANCE 应该返回 4 个默认 Widget","status":"passed","title":"角色 FINANCE 应该返回 4 个默认 Widget","duration":0.664400000000569,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 角色 ANY_OTHER 应该返回 1 个默认 Widget","status":"passed","title":"角色 ANY_OTHER 应该返回 1 个默认 Widget","duration":0.3981999999996333,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig 所有默认 Widget 应该包含必需的布局属性","status":"passed","title":"所有默认 Widget 应该包含必需的布局属性","duration":2.2402000000001863,"failureMessages":[],"meta":{}},{"ancestorTitles":["getDefaultDashboardConfig"],"fullName":"getDefaultDashboardConfig ADMIN 和 MANAGER 应该共享相同的配置","status":"passed","title":"ADMIN 和 MANAGER 应该共享相同的配置","duration":2.1172999999998865,"failureMessages":[],"meta":{}}],"startTime":1772266864010,"endTime":1772266864022.1172,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/utils.test.ts"},{"assertionResults":[{"ancestorTitles":["Widget 注册表","注册表完整性"],"fullName":"Widget 注册表 注册表完整性 注册表应包含至少 10 个 Widget","status":"passed","title":"注册表应包含至少 10 个 Widget","duration":2.6934000000001106,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","注册表完整性"],"fullName":"Widget 注册表 注册表完整性 每个 Widget 类型 key 应与 meta.type 一致","status":"passed","title":"每个 Widget 类型 key 应与 meta.type 一致","duration":1.8459000000002561,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","注册表完整性"],"fullName":"Widget 注册表 注册表完整性 每个 Widget 应有 title、description、icon","status":"passed","title":"每个 Widget 应有 title、description、icon","duration":2.9812999999994645,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","注册表完整性"],"fullName":"Widget 注册表 注册表完整性 每个 Widget 应有 permissions 数组且非空","status":"passed","title":"每个 Widget 应有 permissions 数组且非空","duration":2.5781999999999243,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","注册表完整性"],"fullName":"Widget 注册表 注册表完整性 每个 Widget 的 defaultSize 应有正数 w 和 h","status":"passed","title":"每个 Widget 的 defaultSize 应有正数 w 和 h","duration":2.153600000001461,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) ADMIN 应能看到所有 Widget","status":"passed","title":"ADMIN 应能看到所有 Widget","duration":0.5252999999993335,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) SALES 角色应只能看到销售和通用 Widget","status":"passed","title":"SALES 角色应只能看到销售和通用 Widget","duration":3.058999999999287,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) FINANCE 角色应看到财务相关 Widget","status":"passed","title":"FINANCE 角色应看到财务相关 Widget","duration":1.2551000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) DISPATCHER 角色应看到派单相关 Widget","status":"passed","title":"DISPATCHER 角色应看到派单相关 Widget","duration":1.114900000000489,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) MANAGER 角色应看到管理层和部分其他 Widget","status":"passed","title":"MANAGER 角色应看到管理层和部分其他 Widget","duration":0.6797000000005937,"failureMessages":[],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) 无效角色不应看到任何 Widget","status":"failed","title":"无效角色不应看到任何 Widget","duration":14.70390000000043,"failureMessages":["AssertionError: expected 3 to be +0 // Object.is equality\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/widget-registry.test.ts:118:35\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)\n    at runTest (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:12)"],"meta":{}},{"ancestorTitles":["Widget 注册表","角色过滤 (getAvailableWidgets)"],"fullName":"Widget 注册表 角色过滤 (getAvailableWidgets) 空字符串角色不应看到任何 Widget","status":"failed","title":"空字符串角色不应看到任何 Widget","duration":1.9992999999994936,"failureMessages":["AssertionError: expected 3 to be +0 // Object.is equality\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/widget-registry.test.ts:123:35\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)\n    at runTest (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:12)"],"meta":{}}],"startTime":1772266798176,"endTime":1772266798212.9993,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/widget-registry.test.ts"},{"assertionResults":[{"ancestorTitles":["Workbench API 路由集成测试","GET /api/workbench/todos"],"fullName":"Workbench API 路由集成测试 GET /api/workbench/todos 未授权请求应返回 401","status":"passed","title":"未授权请求应返回 401","duration":4.801300000000083,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench API 路由集成测试","GET /api/workbench/todos"],"fullName":"Workbench API 路由集成测试 GET /api/workbench/todos 授权请求且 Service 正常时应返回 200 和数据","status":"passed","title":"授权请求且 Service 正常时应返回 200 和数据","duration":4.106099999999969,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench API 路由集成测试","GET /api/workbench/todos"],"fullName":"Workbench API 路由集成测试 GET /api/workbench/todos Service 抛错时应返回 500","status":"passed","title":"Service 抛错时应返回 500","duration":8.70889999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench API 路由集成测试","GET /api/workbench/alerts"],"fullName":"Workbench API 路由集成测试 GET /api/workbench/alerts 授权请求且 Service 正常时应返回报警数据","status":"passed","title":"授权请求且 Service 正常时应返回报警数据","duration":2.558700000000499,"failureMessages":[],"meta":{}},{"ancestorTitles":["Workbench API 路由集成测试","GET /api/workbench/alerts"],"fullName":"Workbench API 路由集成测试 GET /api/workbench/alerts 无租户 ID 时应返回 401","status":"passed","title":"无租户 ID 时应返回 401","duration":0.7575999999999112,"failureMessages":[],"meta":{}}],"startTime":1772266853755,"endTime":1772266853776.7576,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dashboard/__tests__/workbench-api.test.ts"},{"assertionResults":[{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 技能完全匹配应获得高分","status":"passed","title":"技能完全匹配应获得高分","duration":2.7219999999997526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 技能不匹配应返回 0 分","status":"passed","title":"技能不匹配应返回 0 分","duration":0.5884000000005472,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 高负载应降低得分","status":"passed","title":"高负载应降低得分","duration":0.38180000000011205,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 过载应扣分","status":"passed","title":"过载应扣分","duration":0.6709000000000742,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 无评分应给中间分","status":"passed","title":"无评分应给中间分","duration":0.43950000000040745,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 全能工应略低于专业工","status":"passed","title":"全能工应略低于专业工","duration":0.457300000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dispatch 模块 - 工人评分算法"],"fullName":"Dispatch 模块 - 工人评分算法 得分应限制在 0-100 范围内","status":"passed","title":"得分应限制在 0-100 范围内","duration":0.5700000000006185,"failureMessages":[],"meta":{}}],"startTime":1772266868169,"endTime":1772266868175.57,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dispatch/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["技能匹配评分"],"fullName":"技能匹配评分 精确技能匹配应得 50 分","status":"passed","title":"精确技能匹配应得 50 分","duration":2.8091999999996915,"failureMessages":[],"meta":{}},{"ancestorTitles":["技能匹配评分"],"fullName":"技能匹配评分 全能工(ALL)技能应得 40 分（比专业工低 10）","status":"passed","title":"全能工(ALL)技能应得 40 分（比专业工低 10）","duration":0.5788000000002285,"failureMessages":[],"meta":{}},{"ancestorTitles":["技能匹配评分"],"fullName":"技能匹配评分 技能不匹配应直接返回 0","status":"passed","title":"技能不匹配应直接返回 0","duration":0.4011000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["技能匹配评分"],"fullName":"技能匹配评分 WALL 品类任务应匹配 WALLCLOTH 技能","status":"passed","title":"WALL 品类任务应匹配 WALLCLOTH 技能","duration":0.8130000000001019,"failureMessages":[],"meta":{}},{"ancestorTitles":["负载均衡评分"],"fullName":"负载均衡评分 0 任务（空闲）应得 30 分负载分","status":"passed","title":"0 任务（空闲）应得 30 分负载分","duration":0.40599999999994907,"failureMessages":[],"meta":{}},{"ancestorTitles":["负载均衡评分"],"fullName":"负载均衡评分 1-2 任务（正常）应得 20 分负载分","status":"passed","title":"1-2 任务（正常）应得 20 分负载分","duration":0.3801999999996042,"failureMessages":[],"meta":{}},{"ancestorTitles":["负载均衡评分"],"fullName":"负载均衡评分 3-4 任务（忙碌）应得 10 分负载分","status":"passed","title":"3-4 任务（忙碌）应得 10 分负载分","duration":0.6432999999997264,"failureMessages":[],"meta":{}},{"ancestorTitles":["负载均衡评分"],"fullName":"负载均衡评分 ≥5 任务（过载）应扣 10 分","status":"passed","title":"≥5 任务（过载）应扣 10 分","duration":0.5365000000001601,"failureMessages":[],"meta":{}},{"ancestorTitles":["负载均衡评分"],"fullName":"负载均衡评分 不同负载的得分应按预期递减","status":"passed","title":"不同负载的得分应按预期递减","duration":0.9122999999999593,"failureMessages":[],"meta":{}},{"ancestorTitles":["服务评分权重计算"],"fullName":"服务评分权重计算 5 分评价应得满分服务分 20","status":"passed","title":"5 分评价应得满分服务分 20","duration":0.37080000000059954,"failureMessages":[],"meta":{}},{"ancestorTitles":["服务评分权重计算"],"fullName":"服务评分权重计算 4 分评价应按比例计算（16 分服务分）","status":"passed","title":"4 分评价应按比例计算（16 分服务分）","duration":0.24639999999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["服务评分权重计算"],"fullName":"服务评分权重计算 3 分评价应得 12 分服务分","status":"passed","title":"3 分评价应得 12 分服务分","duration":0.16679999999996653,"failureMessages":[],"meta":{}},{"ancestorTitles":["服务评分权重计算"],"fullName":"服务评分权重计算 无评价应给予默认中间分 10","status":"passed","title":"无评价应给予默认中间分 10","duration":0.15470000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["服务评分权重计算"],"fullName":"服务评分权重计算 评分更高的工人总分应更高","status":"passed","title":"评分更高的工人总分应更高","duration":0.17950000000018917,"failureMessages":[],"meta":{}},{"ancestorTitles":["综合评分排序"],"fullName":"综合评分排序 满分工人应排在首位","status":"passed","title":"满分工人应排在首位","duration":0.32040000000051805,"failureMessages":[],"meta":{}},{"ancestorTitles":["综合评分排序"],"fullName":"综合评分排序 技能不匹配的工人不应出现在有效候选中","status":"passed","title":"技能不匹配的工人不应出现在有效候选中","duration":1.803899999999885,"failureMessages":[],"meta":{}},{"ancestorTitles":["综合评分排序"],"fullName":"综合评分排序 calculateWorkerScore 返回值应在 0-100 区间","status":"passed","title":"calculateWorkerScore 返回值应在 0-100 区间","duration":0.6345000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 应返回匹配工人的排序列表（分高者先）","status":"passed","title":"应返回匹配工人的排序列表（分高者先）","duration":0.680699999999888,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 应过滤掉技能不匹配的工人","status":"passed","title":"应过滤掉技能不匹配的工人","duration":0.9772999999995591,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 空工人列表应返回空数组","status":"passed","title":"空工人列表应返回空数组","duration":1.3163999999997031,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 全部工人技能不匹配时返回空数组","status":"passed","title":"全部工人技能不匹配时返回空数组","duration":1.9297000000005937,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 无可用工人（传入空数组）时应妥善处理","status":"passed","title":"无可用工人（传入空数组）时应妥善处理","duration":0.2644000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 所有工人都处于严重超载（activeTaskCount >= 5）状态","status":"passed","title":"所有工人都处于严重超载（activeTaskCount >= 5）状态","duration":0.4614000000001397,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 所有工人都存在时间冲突并且排除了冲突 (excludeConflicts=true)","status":"passed","title":"所有工人都存在时间冲突并且排除了冲突 (excludeConflicts=true)","duration":0.429800000000796,"failureMessages":[],"meta":{}},{"ancestorTitles":["批量匹配 matchWorkersForTask"],"fullName":"批量匹配 matchWorkersForTask 全能工即使负载很高，也能返回（尽管分数较低）","status":"passed","title":"全能工即使负载很高，也能返回（尽管分数较低）","duration":0.480199999999968,"failureMessages":[],"meta":{}}],"startTime":1772266845187,"endTime":1772266845206.4802,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/dispatch/__tests__/scoring.test.ts"},{"assertionResults":[{"ancestorTitles":["客户模块 Audit Actions","addCustomerAddress"],"fullName":"客户模块 Audit Actions addCustomerAddress 应在创建地址后记录审计日志","status":"failed","title":"应在创建地址后记录审计日志","duration":5022.396199999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/__tests__/customer-audit.test.ts:105:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["客户模块 Audit Actions","updateCustomerAddress"],"fullName":"客户模块 Audit Actions updateCustomerAddress 应在更新地址后记录审计日志","status":"failed","title":"应在更新地址后记录审计日志","duration":8688.3601,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/__tests__/customer-audit.test.ts:137:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["客户模块 Audit Actions","deleteCustomerAddress"],"fullName":"客户模块 Audit Actions deleteCustomerAddress 应在删除地址后记录审计日志","status":"passed","title":"应在删除地址后记录审计日志","duration":121.31079999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户模块 Audit Actions","createActivity"],"fullName":"客户模块 Audit Actions createActivity 应在创建活动后记录审计日志","status":"passed","title":"应在创建活动后记录审计日志","duration":86.69720000000234,"failureMessages":[],"meta":{}}],"startTime":1772266795610,"endTime":1772266809529.6973,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/__tests__/customer-audit.test.ts"},{"assertionResults":[{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","customerSchema 基础字段"],"fullName":"Customer Schema 校验 (客户表单验证) customerSchema 基础字段 有效客户数据应通过","status":"passed","title":"有效客户数据应通过","duration":17.8746000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","customerSchema 基础字段"],"fullName":"Customer Schema 校验 (客户表单验证) customerSchema 基础字段 name 为空应失败","status":"passed","title":"name 为空应失败","duration":3.899800000000141,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","customerSchema 基础字段"],"fullName":"Customer Schema 校验 (客户表单验证) customerSchema 基础字段 phone 格式无效应失败","status":"passed","title":"phone 格式无效应失败","duration":2.1940999999997075,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","customerSchema 基础字段"],"fullName":"Customer Schema 校验 (客户表单验证) customerSchema 基础字段 source 不在枚举内仍可通过（source 是自由字符串）","status":"passed","title":"source 不在枚举内仍可通过（source 是自由字符串）","duration":1.29070000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","editableCustomerSchema 编辑字段"],"fullName":"Customer Schema 校验 (客户表单验证) editableCustomerSchema 编辑字段 有效编辑数据应通过","status":"passed","title":"有效编辑数据应通过","duration":4.310599999999795,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","activitySchema 活动校验"],"fullName":"Customer Schema 校验 (客户表单验证) activitySchema 活动校验 有效活动数据应通过","status":"passed","title":"有效活动数据应通过","duration":1.6369999999997162,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","activitySchema 活动校验"],"fullName":"Customer Schema 校验 (客户表单验证) activitySchema 活动校验 缺少 customerId 应失败","status":"passed","title":"缺少 customerId 应失败","duration":1.4632000000001426,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","activitySchema 活动校验"],"fullName":"Customer Schema 校验 (客户表单验证) activitySchema 活动校验 type 不在枚举内应失败","status":"passed","title":"type 不在枚举内应失败","duration":1.0974999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","mergeCustomersSchema 合并校验"],"fullName":"Customer Schema 校验 (客户表单验证) mergeCustomersSchema 合并校验 有效合并请求应通过","status":"passed","title":"有效合并请求应通过","duration":1.958599999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","mergeCustomersSchema 合并校验"],"fullName":"Customer Schema 校验 (客户表单验证) mergeCustomersSchema 合并校验 sourceCustomerIds 为空数组应失败","status":"passed","title":"sourceCustomerIds 为空数组应失败","duration":0.911300000000665,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","getCustomersSchema 查询参数校验"],"fullName":"Customer Schema 校验 (客户表单验证) getCustomersSchema 查询参数校验 空对象应通过（所有字段可选）","status":"passed","title":"空对象应通过（所有字段可选）","duration":1.634200000000419,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","getCustomersSchema 查询参数校验"],"fullName":"Customer Schema 校验 (客户表单验证) getCustomersSchema 查询参数校验 page 为负数仍可通过（coerce 无 min 限制）","status":"passed","title":"page 为负数仍可通过（coerce 无 min 限制）","duration":0.5815000000002328,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","getCustomersSchema 查询参数校验"],"fullName":"Customer Schema 校验 (客户表单验证) getCustomersSchema 查询参数校验 pageSize 超过 100 应失败","status":"passed","title":"pageSize 超过 100 应失败","duration":0.7073999999993248,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Schema 校验 (客户表单验证)","getCustomersSchema 查询参数校验"],"fullName":"Customer Schema 校验 (客户表单验证) getCustomersSchema 查询参数校验 有效查询参数应通过","status":"passed","title":"有效查询参数应通过","duration":0.35719999999946594,"failureMessages":[],"meta":{}}],"startTime":1772266837267,"endTime":1772266837309.3572,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/__tests__/schema.test.ts"},{"assertionResults":[{"ancestorTitles":["Customers Security (客户模块安全测试)","未授权访问拒绝"],"fullName":"Customers Security (客户模块安全测试) 未授权访问拒绝 getCustomers：未登录应抛出 Unauthorized","status":"passed","title":"getCustomers：未登录应抛出 Unauthorized","duration":2351.916299999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","未授权访问拒绝"],"fullName":"Customers Security (客户模块安全测试) 未授权访问拒绝 getCustomerDetail：未登录应抛出错误","status":"passed","title":"getCustomerDetail：未登录应抛出错误","duration":1.434400000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","权限检查拦截"],"fullName":"Customers Security (客户模块安全测试) 权限检查拦截 getCustomers：权限拒绝应抛出异常","status":"passed","title":"getCustomers：权限拒绝应抛出异常","duration":5.350500000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","隐私操作安全"],"fullName":"Customers Security (客户模块安全测试) 隐私操作安全 logPhoneView：未登录应抛出 Unauthorized","status":"passed","title":"logPhoneView：未登录应抛出 Unauthorized","duration":56.780800000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","隐私操作安全"],"fullName":"Customers Security (客户模块安全测试) 隐私操作安全 getPhoneViewLogs：未登录应抛出 Unauthorized","status":"passed","title":"getPhoneViewLogs：未登录应抛出 Unauthorized","duration":1.5236999999997352,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","活动操作安全"],"fullName":"Customers Security (客户模块安全测试) 活动操作安全 getActivities：未登录应返回 success: false","status":"passed","title":"getActivities：未登录应返回 success: false","duration":7.814000000000306,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Security (客户模块安全测试)","活动操作安全"],"fullName":"Customers Security (客户模块安全测试) 活动操作安全 createActivity：未登录应返回 success: false","status":"passed","title":"createActivity：未登录应返回 success: false","duration":1.244300000000294,"failureMessages":[],"meta":{}}],"startTime":1772266808039,"endTime":1772266810467.2444,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/__tests__/security-privacy.test.ts"},{"assertionResults":[{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should get supplier statements with permission","status":"passed","title":"should get supplier statements with permission","duration":9.151499999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should get single supplier statement detail","status":"passed","title":"should get single supplier statement detail","duration":5.700999999997293,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should get labor statements list","status":"passed","title":"should get labor statements list","duration":2.3335000000006403,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should get single labor statement detail","status":"passed","title":"should get single labor statement detail","duration":2.054999999996653,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should throw error when missing VIEW permission","status":"passed","title":"should throw error when missing VIEW permission","duration":3.5156000000024505,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","Queries (getAPSupplierStatements, getApStatementById, detail queries)"],"fullName":"AP Actions Queries (getAPSupplierStatements, getApStatementById, detail queries) should get by ID (supplier routing)","status":"passed","title":"should get by ID (supplier routing)","duration":2.5684999999975844,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","verifyPaymentBill"],"fullName":"AP Actions verifyPaymentBill should verify payment bill and deduct balance","status":"passed","title":"should verify payment bill and deduct balance","duration":14.01929999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","verifyPaymentBill"],"fullName":"AP Actions verifyPaymentBill should handle REJECTED status","status":"failed","title":"should handle REJECTED status","duration":22.991699999998673,"failureMessages":["AssertionError: expected undefined to deeply equal { success: true }\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/ap-actions.test.ts:205:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["AP Actions","verifyPaymentBill"],"fullName":"AP Actions verifyPaymentBill should update statement status to COMPLETED when fully paid","status":"passed","title":"should update statement status to COMPLETED when fully paid","duration":36.32690000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","verifyPaymentBill"],"fullName":"AP Actions verifyPaymentBill should fail if payment bill status is not auditable","status":"passed","title":"should fail if payment bill status is not auditable","duration":3.3125,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","generateLaborSettlement"],"fullName":"AP Actions generateLaborSettlement should combine tasks and deductions correctly","status":"passed","title":"should combine tasks and deductions correctly","duration":4.610099999998056,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","createSupplierLiabilityStatement"],"fullName":"AP Actions createSupplierLiabilityStatement should create liability statement for FACTORY","status":"passed","title":"should create liability statement for FACTORY","duration":4.27809999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","createSupplierLiabilityStatement"],"fullName":"AP Actions createSupplierLiabilityStatement should reject if not FACTORY","status":"passed","title":"should reject if not FACTORY","duration":2.1948000000011234,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","createSupplierRefundStatement"],"fullName":"AP Actions createSupplierRefundStatement 应成功创建退款红字对账单","status":"passed","title":"应成功创建退款红字对账单","duration":4.065599999998085,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","createSupplierRefundStatement"],"fullName":"AP Actions createSupplierRefundStatement 原对账单未付款时应拒绝退款","status":"passed","title":"原对账单未付款时应拒绝退款","duration":1.219199999999546,"failureMessages":[],"meta":{}},{"ancestorTitles":["AP Actions","createSupplierRefundStatement"],"fullName":"AP Actions createSupplierRefundStatement 退款金额超过已付款额时应拒绝","status":"passed","title":"退款金额超过已付款额时应拒绝","duration":0.9163000000007742,"failureMessages":[],"meta":{}}],"startTime":1772266804996,"endTime":1772266805119.9163,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/ap-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["[FN-20] verifyPaymentBill - 余额核销安全测试"],"fullName":"[FN-20] verifyPaymentBill - 余额核销安全测试 账户余额不足时应抛出错误，不允许负余额","status":"failed","title":"账户余额不足时应抛出错误，不允许负余额","duration":5101.238600000001,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/ap-security.test.ts:71:5\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26\n    at run (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:79:2)"],"meta":{}},{"ancestorTitles":["[FN-20] verifyPaymentBill - 余额核销安全测试"],"fullName":"[FN-20] verifyPaymentBill - 余额核销安全测试 Decimal.js 应精确计算余额扣减（避免浮点误差）","status":"passed","title":"Decimal.js 应精确计算余额扣减（避免浮点误差）","duration":5.089799999999741,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-20] verifyPaymentBill - 余额核销安全测试"],"fullName":"[FN-20] verifyPaymentBill - 余额核销安全测试 对账单状态应根据剩余金额正确设为 COMPLETED 或 PARTIAL","status":"passed","title":"对账单状态应根据剩余金额正确设为 COMPLETED 或 PARTIAL","duration":1.3452000000015687,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-20] verifyPaymentBill - 余额核销安全测试"],"fullName":"[FN-20] verifyPaymentBill - 余额核销安全测试 未登录时应拒绝核销操作","status":"passed","title":"未登录时应拒绝核销操作","duration":0.6171000000013009,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-20] verifyPaymentBill - 余额核销安全测试"],"fullName":"[FN-20] verifyPaymentBill - 余额核销安全测试 FN-13: 付款单 items 合计与 amount 不一致时应抛出错误","status":"passed","title":"FN-13: 付款单 items 合计与 amount 不一致时应抛出错误","duration":1.2309999999997672,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试"],"fullName":"[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试 多个任务费用应精确聚合（Decimal.js）","status":"passed","title":"多个任务费用应精确聚合（Decimal.js）","duration":0.7616999999991094,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试"],"fullName":"[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试 已有对账单时不应重复创建（幂等性防护）","status":"passed","title":"已有对账单时不应重复创建（幂等性防护）","duration":0.3250000000007276,"failureMessages":[],"meta":{}},{"ancestorTitles":["[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试"],"fullName":"[FN-21] generateLaborSettlement - 劳务结算聚合逻辑测试 负债项目应从总额中扣除","status":"passed","title":"负债项目应从总额中扣除","duration":0.412400000001071,"failureMessages":[],"meta":{}}],"startTime":1772266796119,"endTime":1772266801231.4124,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/ap-security.test.ts"},{"assertionResults":[{"ancestorTitles":["Finance AR Actions"],"fullName":"Finance AR Actions createPaymentOrder 正确传参给 FinanceService.createPaymentOrder","status":"passed","title":"createPaymentOrder 正确传参给 FinanceService.createPaymentOrder","duration":31.09150000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance AR Actions"],"fullName":"Finance AR Actions createPaymentOrder 未授权时应抛出错误","status":"passed","title":"createPaymentOrder 未授权时应抛出错误","duration":3.514100000000326,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance AR Actions"],"fullName":"Finance AR Actions createPaymentOrder 权限不足时应抛出错误","status":"passed","title":"createPaymentOrder 权限不足时应抛出错误","duration":0.8181000000004133,"failureMessages":[],"meta":{}}],"startTime":1772266846034,"endTime":1772266846069.818,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/ar-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["自动凭证引擎 (auto-journal-service)","generateEntryFromReceiptBill"],"fullName":"自动凭证引擎 (auto-journal-service) generateEntryFromReceiptBill 正常生成：应从收款单成功生成凭证","status":"passed","title":"正常生成：应从收款单成功生成凭证","duration":63.01510000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["自动凭证引擎 (auto-journal-service)","generateEntryFromReceiptBill"],"fullName":"自动凭证引擎 (auto-journal-service) generateEntryFromReceiptBill 防重测试：同一收款单不能重复生成凭证","status":"passed","title":"防重测试：同一收款单不能重复生成凭证","duration":1.5625999999992928,"failureMessages":[],"meta":{}},{"ancestorTitles":["自动凭证引擎 (auto-journal-service)","generateEntryFromReceiptBill"],"fullName":"自动凭证引擎 (auto-journal-service) generateEntryFromReceiptBill 缺少模板时应返回错误","status":"passed","title":"缺少模板时应返回错误","duration":0.859599999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["自动凭证引擎 (auto-journal-service)","generateEntryFromReceiptBill"],"fullName":"自动凭证引擎 (auto-journal-service) generateEntryFromReceiptBill 账期已关闭时应返回错误","status":"passed","title":"账期已关闭时应返回错误","duration":1.3716000000003987,"failureMessages":[],"meta":{}},{"ancestorTitles":["自动凭证引擎 (auto-journal-service)","generateEntryFromPaymentBill"],"fullName":"自动凭证引擎 (auto-journal-service) generateEntryFromPaymentBill 收款单不存在时应抛出错误","status":"passed","title":"收款单不存在时应抛出错误","duration":3.310300000001007,"failureMessages":[],"meta":{}}],"startTime":1772266832232,"endTime":1772266832303.3103,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/auto-journal.test.ts"},{"assertionResults":[{"ancestorTitles":["Finance Note Actions - Credit & Debit","Credit Notes"],"fullName":"Finance Note Actions - Credit & Debit Credit Notes createCreditNote should successfully create a pending credit note","status":"passed","title":"createCreditNote should successfully create a pending credit note","duration":10.777900000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Note Actions - Credit & Debit","Credit Notes"],"fullName":"Finance Note Actions - Credit & Debit Credit Notes approveCreditNote should approve and update related statement/balance","status":"passed","title":"approveCreditNote should approve and update related statement/balance","duration":3.9248999999999796,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Note Actions - Credit & Debit","Debit Notes"],"fullName":"Finance Note Actions - Credit & Debit Debit Notes createDebitNote should successfully create a pending debit note","status":"passed","title":"createDebitNote should successfully create a pending debit note","duration":2.588900000000649,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Note Actions - Credit & Debit","Debit Notes"],"fullName":"Finance Note Actions - Credit & Debit Debit Notes approveDebitNote should approve and update related statement","status":"passed","title":"approveDebitNote should approve and update related statement","duration":3.251100000000406,"failureMessages":[],"meta":{}}],"startTime":1772266854482,"endTime":1772266854503.2512,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/finance-additional.test.ts"},{"assertionResults":[{"ancestorTitles":["FinanceService","generateReceivables"],"fullName":"FinanceService generateReceivables should generate correct payment schedules based on ratios","status":"passed","title":"should generate correct payment schedules based on ratios","duration":11.07380000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","generateReceivables"],"fullName":"FinanceService generateReceivables should handle rounding for last installment","status":"passed","title":"should handle rounding for last installment","duration":1.821700000000419,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","validateDownPaymentRatio"],"fullName":"FinanceService validateDownPaymentRatio should return true if ratio is met","status":"passed","title":"should return true if ratio is met","duration":1.5504999999993743,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","validateDownPaymentRatio"],"fullName":"FinanceService validateDownPaymentRatio should return false if ratio is not met","status":"passed","title":"should return false if ratio is not met","duration":1.7364999999990687,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","validateDownPaymentRatio"],"fullName":"FinanceService validateDownPaymentRatio should return true if total amount is 0","status":"passed","title":"should return true if total amount is 0","duration":0.8195999999988999,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","createPaymentOrder"],"fullName":"FinanceService createPaymentOrder should create payment order within a transaction","status":"passed","title":"should create payment order within a transaction","duration":4.526700000000346,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","createPaymentOrder"],"fullName":"FinanceService createPaymentOrder should create payment order with items","status":"passed","title":"should create payment order with items","duration":1.8281999999999243,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","generateReceivables Edge Cases"],"fullName":"FinanceService generateReceivables Edge Cases should throw error if ratios do not sum to 1","status":"passed","title":"should throw error if ratios do not sum to 1","duration":3.41150000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) REBATE 模式：应按订单金额 * 费率计算佣金","status":"passed","title":"REBATE 模式：应按订单金额 * 费率计算佣金","duration":7.414099999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) REJECTED 状态：不应触发佣金计算","status":"passed","title":"REJECTED 状态：不应触发佣金计算","duration":2.0244999999995343,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) 无渠道 (channelId=null)：不应生成佣金记录","status":"passed","title":"无渠道 (channelId=null)：不应生成佣金记录","duration":1.9402000000009139,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) PARTIAL 状态：部分收款应更新 receivedAmount 并保持 PARTIAL 状态","status":"passed","title":"PARTIAL 状态：部分收款应更新 receivedAmount 并保持 PARTIAL 状态","duration":1.578300000001036,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) 小额差异处理：如果余款在允许范围内，状态应设为 PAID","status":"passed","title":"小额差异处理：如果余款在允许范围内，状态应设为 PAID","duration":1.2980999999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) BASE_PRICE 模式：应按 (成交价 - 结算底价) * 费率计算佣金","status":"passed","title":"BASE_PRICE 模式：应按 (成交价 - 结算底价) * 费率计算佣金","duration":2.384200000000419,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinanceService","verifyPaymentOrder (含佣金计算)"],"fullName":"FinanceService verifyPaymentOrder (含佣金计算) BASE_PRICE 模式：利润为负时不应生成佣金","status":"passed","title":"BASE_PRICE 模式：利润为负时不应生成佣金","duration":2.28650000000016,"failureMessages":[],"meta":{}}],"startTime":1772266833435,"endTime":1772266833482.2866,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/finance-service.test.ts"},{"assertionResults":[{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0.6% for WECHAT","status":"passed","title":"should return 0.6% for WECHAT","duration":2.891099999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0.6% for ALIPAY","status":"passed","title":"should return 0.6% for ALIPAY","duration":0.4796000000001186,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0.35% for POS","status":"passed","title":"should return 0.35% for POS","duration":0.3088999999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0 for BANK_TRANSFER","status":"passed","title":"should return 0 for BANK_TRANSFER","duration":0.7838999999999032,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0 for CASH","status":"passed","title":"should return 0 for CASH","duration":0.365099999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should be case-insensitive for payment method","status":"passed","title":"should be case-insensitive for payment method","duration":0.25939999999991414,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should return 0 for unknown method","status":"passed","title":"should return 0 for unknown method","duration":0.38239999999996144,"failureMessages":[],"meta":{}},{"ancestorTitles":["financeInternal","calculateFees"],"fullName":"financeInternal calculateFees should handle rounding with toFixed(2)","status":"passed","title":"should handle rounding with toFixed(2)","duration":0.2966999999998734,"failureMessages":[],"meta":{}}],"startTime":1772266868702,"endTime":1772266868708.2966,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/internal.test.ts"},{"assertionResults":[{"ancestorTitles":["validateLinesBalance"],"fullName":"validateLinesBalance 借贷平衡时返回 isValid = true","status":"passed","title":"借贷平衡时返回 isValid = true","duration":3.077400000000125,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateLinesBalance"],"fullName":"validateLinesBalance 借贷不平衡时返回 isValid = false","status":"passed","title":"借贷不平衡时返回 isValid = false","duration":0.48180000000047585,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateLinesBalance"],"fullName":"validateLinesBalance 空分录时返回平衡","status":"passed","title":"空分录时返回平衡","duration":0.588900000000649,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateLinesBalance"],"fullName":"validateLinesBalance 多行借贷各项汇总后平衡","status":"passed","title":"多行借贷各项汇总后平衡","duration":0.8729999999995925,"failureMessages":[],"meta":{}}],"startTime":1772266870643,"endTime":1772266870648.873,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/journal-validation.test.ts"},{"assertionResults":[{"ancestorTitles":["Reconciliation Actions","Queries (getReconciliations, getReconciliation)"],"fullName":"Reconciliation Actions Queries (getReconciliations, getReconciliation) should get reconciliations list","status":"passed","title":"should get reconciliations list","duration":33.635299999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","Queries (getReconciliations, getReconciliation)"],"fullName":"Reconciliation Actions Queries (getReconciliations, getReconciliation) should get single reconciliation by id","status":"passed","title":"should get single reconciliation by id","duration":2.1375000000007276,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","Queries (getReconciliations, getReconciliation)"],"fullName":"Reconciliation Actions Queries (getReconciliations, getReconciliation) should throw error if permission denied in queries","status":"passed","title":"should throw error if permission denied in queries","duration":3.3958999999995285,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","generateAggregatedStatement"],"fullName":"Reconciliation Actions generateAggregatedStatement should generate summary correctly","status":"passed","title":"should generate summary correctly","duration":7.436600000000908,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","generateAggregatedStatement"],"fullName":"Reconciliation Actions generateAggregatedStatement should return error if no statements found","status":"passed","title":"should return error if no statements found","duration":2.7685999999994237,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","generatePeriodStatements"],"fullName":"Reconciliation Actions generatePeriodStatements should generate period statements for WEEKLY","status":"passed","title":"should generate period statements for WEEKLY","duration":4.816899999999805,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should write off statements when receipt has balance","status":"passed","title":"should write off statements when receipt has balance","duration":7.181300000000192,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should return error if receipt bill not found","status":"passed","title":"should return error if receipt bill not found","duration":1.6172999999998865,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should return error if available balance is zero","status":"passed","title":"should return error if available balance is zero","duration":2.148300000000745,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should fail if receipt status is not auditable","status":"passed","title":"should fail if receipt status is not auditable","duration":1.871900000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should fail if some statements are already paid","status":"passed","title":"should fail if some statements are already paid","duration":1.6763000000009924,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","batchWriteOff"],"fullName":"Reconciliation Actions batchWriteOff should fail if aggregate allocated amount exceeds available amount","status":"passed","title":"should fail if aggregate allocated amount exceeds available amount","duration":2.417300000000978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","crossPeriodReconciliation"],"fullName":"Reconciliation Actions crossPeriodReconciliation should return pending statements","status":"passed","title":"should return pending statements","duration":2.594600000000355,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","权限校验"],"fullName":"Reconciliation Actions 权限校验 未登录时应拒绝 generateAggregatedStatement","status":"passed","title":"未登录时应拒绝 generateAggregatedStatement","duration":0.7034999999996217,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","权限校验"],"fullName":"Reconciliation Actions 权限校验 权限不足时应拒绝 batchWriteOff","status":"passed","title":"权限不足时应拒绝 batchWriteOff","duration":0.5210999999999331,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reconciliation Actions","权限校验"],"fullName":"Reconciliation Actions 权限校验 权限不足时应拒绝 crossPeriodReconciliation","status":"passed","title":"权限不足时应拒绝 crossPeriodReconciliation","duration":0.793999999999869,"failureMessages":[],"meta":{}}],"startTime":1772266827512,"endTime":1772266827589.794,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/reconciliation-actions.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"No test suite found in file C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/reconciliation.test.ts","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/reconciliation.test.ts"},{"assertionResults":[{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should successfully submit refund request with valid data","status":"passed","title":"should successfully submit refund request with valid data","duration":4.1810999999997875,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should throw error when session is null","status":"passed","title":"should throw error when session is null","duration":3.8993000000000393,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should throw error when tenantId is missing in session","status":"passed","title":"should throw error when tenantId is missing in session","duration":1.0062000000007174,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should throw error when checkPermission fails","status":"passed","title":"should throw error when checkPermission fails","duration":1.4213999999992666,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should pass correctly mapped payload to createPaymentBill","status":"passed","title":"should pass correctly mapped payload to createPaymentBill","duration":3.8278999999993175,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should handle optional fields correctly with default fallback (remark)","status":"passed","title":"should handle optional fields correctly with default fallback (remark)","duration":3.162999999999556,"failureMessages":[],"meta":{}},{"ancestorTitles":["Finance Refund Actions"],"fullName":"Finance Refund Actions should propagate errors thrown from createPaymentBill","status":"passed","title":"should propagate errors thrown from createPaymentBill","duration":1.1163000000005923,"failureMessages":[],"meta":{}}],"startTime":1772266856637,"endTime":1772266856656.1162,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/refund-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Statement Confirmation Actions","generateStatementConfirmation"],"fullName":"Statement Confirmation Actions generateStatementConfirmation should generate confirmation successfully","status":"passed","title":"should generate confirmation successfully","duration":13.97609999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Statement Confirmation Actions","confirmStatement"],"fullName":"Statement Confirmation Actions confirmStatement should confirm statement successfully","status":"passed","title":"should confirm statement successfully","duration":3.470800000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Statement Confirmation Actions","getStatementConfirmations"],"fullName":"Statement Confirmation Actions getStatementConfirmations should get confirmations list successfully","status":"passed","title":"should get confirmations list successfully","duration":3.298999999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Statement Confirmation Actions","getStatementConfirmations"],"fullName":"Statement Confirmation Actions getStatementConfirmations should return error when session is invalid","status":"passed","title":"should return error when session is invalid","duration":1.175799999999981,"failureMessages":[],"meta":{}}],"startTime":1772266847682,"endTime":1772266847704.1758,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/statement-confirmations-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Transfer Actions","getInternalTransfers"],"fullName":"Transfer Actions getInternalTransfers should return transfers successfully","status":"passed","title":"should return transfers successfully","duration":10.580300000001444,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transfer Actions","getInternalTransfers"],"fullName":"Transfer Actions getInternalTransfers should fail if unauthorized","status":"passed","title":"should fail if unauthorized","duration":0.701600000000326,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transfer Actions","createInternalTransfer"],"fullName":"Transfer Actions createInternalTransfer should create transfer successfully","status":"failed","title":"should create transfer successfully","duration":28.84519999999975,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/transfers-actions.test.ts:123:36\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Transfer Actions","createInternalTransfer"],"fullName":"Transfer Actions createInternalTransfer should fail if balance insufficient","status":"passed","title":"should fail if balance insufficient","duration":3.443199999999706,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transfer Actions","createInternalTransfer"],"fullName":"Transfer Actions createInternalTransfer should fail if from and to account are same","status":"passed","title":"should fail if from and to account are same","duration":1.7825000000011642,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transfer Actions","cancelInternalTransfer"],"fullName":"Transfer Actions cancelInternalTransfer should cancel transfer successfully","status":"failed","title":"should cancel transfer successfully","duration":8.364599999998973,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/transfers-actions.test.ts:188:36\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Transfer Actions","cancelInternalTransfer"],"fullName":"Transfer Actions cancelInternalTransfer should fail if destination account balance insufficient for reversal","status":"passed","title":"should fail if destination account balance insufficient for reversal","duration":2.3474999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transfer Actions","getInternalTransfer"],"fullName":"Transfer Actions getInternalTransfer should return detail successfully","status":"passed","title":"should return detail successfully","duration":1.6806000000015047,"failureMessages":[],"meta":{}}],"startTime":1772266803656,"endTime":1772266803715.6807,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/__tests__/transfers-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Monitoring 模块安全测试","getNotificationPreferences"],"fullName":"Monitoring 模块安全测试 getNotificationPreferences 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":4.043499999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["Monitoring 模块安全测试","getNotificationPreferences"],"fullName":"Monitoring 模块安全测试 getNotificationPreferences 已登录应返回偏好列表","status":"passed","title":"已登录应返回偏好列表","duration":2.5242000000007465,"failureMessages":[],"meta":{}},{"ancestorTitles":["Monitoring 模块安全测试","updateNotificationPreference"],"fullName":"Monitoring 模块安全测试 updateNotificationPreference 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.6130999999995765,"failureMessages":[],"meta":{}},{"ancestorTitles":["Monitoring 模块安全测试","updateNotificationPreference"],"fullName":"Monitoring 模块安全测试 updateNotificationPreference 有效输入应成功更新","status":"passed","title":"有效输入应成功更新","duration":4.2453999999997905,"failureMessages":[],"meta":{}},{"ancestorTitles":["Monitoring 模块安全测试","updateNotificationPreference"],"fullName":"Monitoring 模块安全测试 updateNotificationPreference 空 channels 数组应校验失败","status":"passed","title":"空 channels 数组应校验失败","duration":2.001299999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["Monitoring 模块安全测试","createNotification"],"fullName":"Monitoring 模块安全测试 createNotification 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.6021999999993568,"failureMessages":[],"meta":{}}],"startTime":1772266859368,"endTime":1772266859383.6023,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/monitoring/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 INFO 类型应映射为 SYSTEM 通知类型","status":"passed","title":"INFO 类型应映射为 SYSTEM 通知类型","duration":6.689600000001519,"failureMessages":[],"meta":{}},{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 WARNING 类型应映射为 ALERT 通知类型","status":"passed","title":"WARNING 类型应映射为 ALERT 通知类型","duration":0.9556000000011409,"failureMessages":[],"meta":{}},{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 ERROR 类型应映射为 ALERT 通知类型","status":"passed","title":"ERROR 类型应映射为 ALERT 通知类型","duration":0.9953000000004977,"failureMessages":[],"meta":{}},{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 未指定类型时默认应为 SYSTEM","status":"passed","title":"未指定类型时默认应为 SYSTEM","duration":1.1864999999997963,"failureMessages":[],"meta":{}},{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 无权限用户创建通知应被拒绝","status":"passed","title":"无权限用户创建通知应被拒绝","duration":0.9336999999995896,"failureMessages":[],"meta":{}},{"ancestorTitles":["createNotification 类型映射"],"fullName":"createNotification 类型映射 未登录用户创建通知应返回 false","status":"passed","title":"未登录用户创建通知应返回 false","duration":0.5905000000002474,"failureMessages":[],"meta":{}},{"ancestorTitles":["getMyNotifications 分页"],"fullName":"getMyNotifications 分页 应返回通知列表","status":"passed","title":"应返回通知列表","duration":0.5126999999993131,"failureMessages":[],"meta":{}},{"ancestorTitles":["markNotificationAsRead 权限"],"fullName":"markNotificationAsRead 权限 标记自己的通知应成功","status":"passed","title":"标记自己的通知应成功","duration":0.5014999999984866,"failureMessages":[],"meta":{}},{"ancestorTitles":["markNotificationAsRead 权限"],"fullName":"markNotificationAsRead 权限 标记非本人通知应被拒绝","status":"passed","title":"标记非本人通知应被拒绝","duration":0.8101999999998952,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","createAlertRule"],"fullName":"告警规则管理 (alert-rules) createAlertRule 管理员应能创建告警规则","status":"passed","title":"管理员应能创建告警规则","duration":2.9931999999989785,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","createAlertRule"],"fullName":"告警规则管理 (alert-rules) createAlertRule 未登录应被拒绝","status":"passed","title":"未登录应被拒绝","duration":0.4441999999999098,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","createAlertRule"],"fullName":"告警规则管理 (alert-rules) createAlertRule 无权限应被拒绝","status":"passed","title":"无权限应被拒绝","duration":0.6944999999996071,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","createAlertRule"],"fullName":"告警规则管理 (alert-rules) createAlertRule 缺少必填字段应校验失败","status":"passed","title":"缺少必填字段应校验失败","duration":1.4465000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","updateAlertRule"],"fullName":"告警规则管理 (alert-rules) updateAlertRule 管理员应能成功更新告警规则","status":"passed","title":"管理员应能成功更新告警规则","duration":4.239900000000489,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","updateAlertRule"],"fullName":"告警规则管理 (alert-rules) updateAlertRule 未登录应拒绝更新","status":"passed","title":"未登录应拒绝更新","duration":0.45429999999942083,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","listAlertRules"],"fullName":"告警规则管理 (alert-rules) listAlertRules 应返回当前租户的告警规则列表","status":"passed","title":"应返回当前租户的告警规则列表","duration":1.4695000000010623,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","listAlertRules"],"fullName":"告警规则管理 (alert-rules) listAlertRules 未登录应被拒绝","status":"passed","title":"未登录应被拒绝","duration":0.3695000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","deleteAlertRule"],"fullName":"告警规则管理 (alert-rules) deleteAlertRule 应能删除告警规则","status":"passed","title":"应能删除告警规则","duration":1.958599999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","deleteAlertRule"],"fullName":"告警规则管理 (alert-rules) deleteAlertRule 未登录应被拒绝","status":"passed","title":"未登录应被拒绝","duration":0.4496999999992113,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","sendBulkNotification"],"fullName":"告警规则管理 (alert-rules) sendBulkNotification 应能向指定角色组批量发送通知","status":"passed","title":"应能向指定角色组批量发送通知","duration":1.7653000000009342,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警规则管理 (alert-rules)","sendBulkNotification"],"fullName":"告警规则管理 (alert-rules) sendBulkNotification 未登录应被拒绝","status":"passed","title":"未登录应被拒绝","duration":0.42439999999987776,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警风暴速率限制保护"],"fullName":"告警风暴速率限制保护 在限额内的调用应能成功通过","status":"passed","title":"在限额内的调用应能成功通过","duration":0.9068000000006577,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警风暴速率限制保护"],"fullName":"告警风暴速率限制保护 短时间超过 100 次调用应触发限流被拒绝","status":"passed","title":"短时间超过 100 次调用应触发限流被拒绝","duration":18.55279999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["告警风暴速率限制保护"],"fullName":"告警风暴速率限制保护 重置限流器后应恢复可用","status":"passed","title":"重置限流器后应恢复可用","duration":12.185600000000704,"failureMessages":[],"meta":{}}],"startTime":1772266827757,"endTime":1772266827821.1855,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/monitoring/__tests__/monitoring-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Notification Server Actions","getNotifications"],"fullName":"Notification Server Actions getNotifications should fetch notifications with pagination","status":"passed","title":"should fetch notifications with pagination","duration":13.057199999999284,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","getNotifications"],"fullName":"Notification Server Actions getNotifications should return empty list on error","status":"passed","title":"should return empty list on error","duration":2.0010999999994965,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","markAsRead"],"fullName":"Notification Server Actions markAsRead should update specific notifications","status":"passed","title":"should update specific notifications","duration":3.1837999999988824,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","markAsRead"],"fullName":"Notification Server Actions markAsRead should do nothing if ids list is empty","status":"passed","title":"should do nothing if ids list is empty","duration":1.6001999999989494,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","updateNotificationPreference"],"fullName":"Notification Server Actions updateNotificationPreference should update existing preference","status":"passed","title":"should update existing preference","duration":2.5882999999994354,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","updateNotificationPreference"],"fullName":"Notification Server Actions updateNotificationPreference should create new preference if not exists","status":"passed","title":"should create new preference if not exists","duration":1.2456999999994878,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","batchUpdateNotificationPreferences"],"fullName":"Notification Server Actions batchUpdateNotificationPreferences should process batch updates in transaction","status":"passed","title":"should process batch updates in transaction","duration":6.610800000000381,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","markAllAsRead"],"fullName":"Notification Server Actions markAllAsRead should update all unread notifications for the user","status":"passed","title":"should update all unread notifications for the user","duration":1.7836999999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","getUnreadCount"],"fullName":"Notification Server Actions getUnreadCount should return the count of unread notifications","status":"passed","title":"should return the count of unread notifications","duration":2.2955000000001746,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","getNotificationPreferencesAction"],"fullName":"Notification Server Actions getNotificationPreferencesAction should fetch and merge preferences with defaults","status":"passed","title":"should fetch and merge preferences with defaults","duration":3.9751999999989494,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","runSLACheck"],"fullName":"Notification Server Actions runSLACheck should deny non-admin access","status":"passed","title":"should deny non-admin access","duration":1.4526999999998225,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Server Actions","runSLACheck"],"fullName":"Notification Server Actions runSLACheck should run checks for admin","status":"passed","title":"should run checks for admin","duration":0.7229999999999563,"failureMessages":[],"meta":{}}],"startTime":1772266833340,"endTime":1772266833383.723,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/notifications/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Notification Adapters","LarkAdapter"],"fullName":"Notification Adapters LarkAdapter 当未配置 webhook 环境变量时，应直接返回 false","status":"passed","title":"当未配置 webhook 环境变量时，应直接返回 false","duration":4.26260000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","LarkAdapter"],"fullName":"Notification Adapters LarkAdapter 当飞书接口响应成功时，应返回 true","status":"passed","title":"当飞书接口响应成功时，应返回 true","duration":6.184999999999491,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","LarkAdapter"],"fullName":"Notification Adapters LarkAdapter 当飞书接口响应状态码非 200 时，应捕获异常并返回 false","status":"passed","title":"当飞书接口响应状态码非 200 时，应捕获异常并返回 false","duration":2.8843000000006214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","LarkAdapter"],"fullName":"Notification Adapters LarkAdapter 当网络请求彻底失败(如 DNS 错误)时，应捕获异常并返回 false","status":"passed","title":"当网络请求彻底失败(如 DNS 错误)时，应捕获异常并返回 false","duration":1.9079000000001543,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","LarkAdapter"],"fullName":"Notification Adapters LarkAdapter 当 payload 带有链接时，应正确拼接完整 URL","status":"passed","title":"当 payload 带有链接时，应正确拼接完整 URL","duration":0.7149000000008527,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","SmsAdapter"],"fullName":"Notification Adapters SmsAdapter 目前应默认返回 true 占位","status":"passed","title":"目前应默认返回 true 占位","duration":0.46900000000005093,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Adapters","WeChatAdapter"],"fullName":"Notification Adapters WeChatAdapter 应成功初始化实例","status":"passed","title":"应成功初始化实例","duration":0.6602999999995518,"failureMessages":[],"meta":{}}],"startTime":1772266852452,"endTime":1772266852469.6604,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/notifications/__tests__/adapters.test.ts"},{"assertionResults":[{"ancestorTitles":["NotificationService Full Test Suite","renderTemplate"],"fullName":"NotificationService Full Test Suite renderTemplate should replace placeholders and escape content","status":"passed","title":"should replace placeholders and escape content","duration":4.081000000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","renderTemplate"],"fullName":"NotificationService Full Test Suite renderTemplate should handle undefined parameters gracefully","status":"passed","title":"should handle undefined parameters gracefully","duration":0.5867999999991298,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","sendNotificationByTemplate"],"fullName":"NotificationService Full Test Suite sendNotificationByTemplate should create queue items and notifications for IN_APP","status":"passed","title":"should create queue items and notifications for IN_APP","duration":4.552799999999479,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","sendNotificationByTemplate"],"fullName":"NotificationService Full Test Suite sendNotificationByTemplate should return error if template not found","status":"passed","title":"should return error if template not found","duration":1.7854000000006636,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","Idempotency (去重逻辑)"],"fullName":"NotificationService Full Test Suite Idempotency (去重逻辑) 应该跳过同一天内相同 Token 的重复通知","status":"passed","title":"应该跳过同一天内相同 Token 的重复通知","duration":2.612300000000687,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","Idempotency (去重逻辑)"],"fullName":"NotificationService Full Test Suite Idempotency (去重逻辑) 不同用户之间的相同模板不应被去重","status":"passed","title":"不同用户之间的相同模板不应被去重","duration":2.7664999999997235,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","processNotificationQueue"],"fullName":"NotificationService Full Test Suite processNotificationQueue should process pending items in order of priority","status":"passed","title":"should process pending items in order of priority","duration":3.2457999999987805,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","processNotificationQueue"],"fullName":"NotificationService Full Test Suite processNotificationQueue should retry failed notifications","status":"passed","title":"should retry failed notifications","duration":1.5909000000010565,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","processNotificationQueue"],"fullName":"NotificationService Full Test Suite processNotificationQueue should handle multiple channels correctly","status":"passed","title":"should handle multiple channels correctly","duration":2.221799999999348,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","processNotificationQueue"],"fullName":"NotificationService Full Test Suite processNotificationQueue should mark as failed if retry count exceeds limit","status":"passed","title":"should mark as failed if retry count exceeds limit","duration":1.7567999999992026,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","getActiveAnnouncements"],"fullName":"NotificationService Full Test Suite getActiveAnnouncements should filter by role","status":"passed","title":"should filter by role","duration":2.784700000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management"],"fullName":"NotificationService Full Test Suite announcement and template management createAnnouncement should check permissions","status":"passed","title":"createAnnouncement should check permissions","duration":1.148799999999028,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management"],"fullName":"NotificationService Full Test Suite announcement and template management upsertNotificationTemplate should handle creation success","status":"passed","title":"upsertNotificationTemplate should handle creation success","duration":4.973500000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management"],"fullName":"NotificationService Full Test Suite announcement and template management upsertNotificationTemplate should fail with validation error","status":"passed","title":"upsertNotificationTemplate should fail with validation error","duration":2.153700000000754,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management"],"fullName":"NotificationService Full Test Suite announcement and template management upsertNotificationTemplate should check permissions accurately","status":"passed","title":"upsertNotificationTemplate should check permissions accurately","duration":0.9320000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management"],"fullName":"NotificationService Full Test Suite announcement and template management upsertNotificationTemplate should return error if update fails","status":"passed","title":"upsertNotificationTemplate should return error if update fails","duration":2.169799999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management","Audit and Auth edges"],"fullName":"NotificationService Full Test Suite announcement and template management Audit and Auth edges sendNotificationByTemplate should fail without session","status":"passed","title":"sendNotificationByTemplate should fail without session","duration":0.895700000000943,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management","Audit and Auth edges"],"fullName":"NotificationService Full Test Suite announcement and template management Audit and Auth edges sendNotificationByTemplate should use default format if no channels provided","status":"passed","title":"sendNotificationByTemplate should use default format if no channels provided","duration":0.8894000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management","Audit and Auth edges"],"fullName":"NotificationService Full Test Suite announcement and template management Audit and Auth edges createAnnouncement should handle validation failure","status":"passed","title":"createAnnouncement should handle validation failure","duration":2.199299999998402,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management","Audit and Auth edges"],"fullName":"NotificationService Full Test Suite announcement and template management Audit and Auth edges getNotificationTemplates should return empty if no session","status":"passed","title":"getNotificationTemplates should return empty if no session","duration":2.04529999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService Full Test Suite","announcement and template management","Audit and Auth edges"],"fullName":"NotificationService Full Test Suite announcement and template management Audit and Auth edges upsertNotificationTemplate should log audit on create","status":"passed","title":"upsertNotificationTemplate should log audit on create","duration":4.7960000000002765,"failureMessages":[],"meta":{}}],"startTime":1772266830544,"endTime":1772266830596.796,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/notifications/__tests__/notification-service.test.ts"},{"assertionResults":[{"ancestorTitles":["NotificationService","send"],"fullName":"NotificationService send should use forceChannels if provided","status":"passed","title":"should use forceChannels if provided","duration":5.888300000000527,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService","send"],"fullName":"NotificationService send should fetch preferences if forceChannels not provided","status":"passed","title":"should fetch preferences if forceChannels not provided","duration":1.618800000000192,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService","send"],"fullName":"NotificationService send should default to IN_APP if no preferences found","status":"passed","title":"should default to IN_APP if no preferences found","duration":1.298399999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService","send"],"fullName":"NotificationService send should handle partial failures using Promise.allSettled","status":"passed","title":"should handle partial failures using Promise.allSettled","duration":46.40340000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService","send"],"fullName":"NotificationService send should return false if all channels fail","status":"passed","title":"should return false if all channels fail","duration":13.753099999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["NotificationService","markAsRead"],"fullName":"NotificationService markAsRead should update notification status","status":"passed","title":"should update notification status","duration":0.8670000000001892,"failureMessages":[],"meta":{}}],"startTime":1772266846975,"endTime":1772266847045.867,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/notifications/__tests__/service.test.ts"},{"assertionResults":[{"ancestorTitles":["SLAChecker","checkLeadFollowupSLA"],"fullName":"SLAChecker checkLeadFollowupSLA should send notification for overdue leads","status":"passed","title":"should send notification for overdue leads","duration":16.875599999999395,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLAChecker","checkLeadFollowupSLA"],"fullName":"SLAChecker checkLeadFollowupSLA should not send duplicate notification within 24 hours","status":"passed","title":"should not send duplicate notification within 24 hours","duration":2.7109999999993306,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLAChecker","checkMeasureTaskDispatchSLA"],"fullName":"SLAChecker checkMeasureTaskDispatchSLA should notify for unaccepted measurement tasks after 24 hours","status":"passed","title":"should notify for unaccepted measurement tasks after 24 hours","duration":3.149599999998827,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLAChecker","checkApprovalSLA"],"fullName":"SLAChecker checkApprovalSLA should auto timeout paused tasks after 48h","status":"passed","title":"should auto timeout paused tasks after 48h","duration":3.6530000000002474,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLAChecker","checkApprovalSLA"],"fullName":"SLAChecker checkApprovalSLA should auto approve pending tasks after 7 days (Rule B)","status":"passed","title":"should auto approve pending tasks after 7 days (Rule B)","duration":7.170799999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLAChecker","checkMeasureTaskDispatchSLA deduplication"],"fullName":"SLAChecker checkMeasureTaskDispatchSLA deduplication should not notify if manager already notified for the same task","status":"passed","title":"should not notify if manager already notified for the same task","duration":1.5540000000000873,"failureMessages":[],"meta":{}}],"startTime":1772266843037,"endTime":1772266843073.554,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/notifications/__tests__/sla-checker.test.ts"},{"assertionResults":[{"ancestorTitles":["Distribution Engine","configureDistributionStrategy"],"fullName":"Distribution Engine configureDistributionStrategy should require authentication","status":"passed","title":"should require authentication","duration":11.46349999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Distribution Engine","configureDistributionStrategy"],"fullName":"Distribution Engine configureDistributionStrategy should update tenant distribution config","status":"passed","title":"should update tenant distribution config","duration":2.5095000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["Distribution Engine","distributeToNextSales"],"fullName":"Distribution Engine distributeToNextSales should return MANUAL if strategy is manual","status":"passed","title":"should return MANUAL if strategy is manual","duration":2.5578000000004977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Distribution Engine","distributeToNextSales"],"fullName":"Distribution Engine distributeToNextSales should distribute using ROUND_ROBIN","status":"passed","title":"should distribute using ROUND_ROBIN","duration":2.2203000000008615,"failureMessages":[],"meta":{}},{"ancestorTitles":["Distribution Engine","getDistributionStatus"],"fullName":"Distribution Engine getDistributionStatus should return correct distribution status","status":"passed","title":"should return correct distribution status","duration":1.759200000000419,"failureMessages":[],"meta":{}},{"ancestorTitles":["Distribution Engine","getDistributionStatus"],"fullName":"Distribution Engine getDistributionStatus should require authentication","status":"passed","title":"should require authentication","duration":0.8033000000013999,"failureMessages":[],"meta":{}}],"startTime":1772266842895,"endTime":1772266842917.8032,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/distribution.test.ts"},{"assertionResults":[{"ancestorTitles":["LeadService","createLead"],"fullName":"LeadService createLead should create a lead successfully with auto-distribution","status":"passed","title":"should create a lead successfully with auto-distribution","duration":10.42239999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","createLead"],"fullName":"LeadService createLead should detect phone duplicate","status":"passed","title":"should detect phone duplicate","duration":2.0282999999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","getLead"],"fullName":"LeadService getLead should return lead if found and tenant matches","status":"passed","title":"should return lead if found and tenant matches","duration":1.2474999999994907,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","getLead"],"fullName":"LeadService getLead should return null if tenant mismatch","status":"passed","title":"should return null if tenant mismatch","duration":1.3039000000007945,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","claimFromPool"],"fullName":"LeadService claimFromPool should claim successfully","status":"passed","title":"should claim successfully","duration":2.090199999998731,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","claimFromPool"],"fullName":"LeadService claimFromPool should throw if already assigned","status":"passed","title":"should throw if already assigned","duration":4.091500000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["LeadService","convertLead"],"fullName":"LeadService convertLead should convert lead successfully","status":"passed","title":"should convert lead successfully","duration":2.569600000000719,"failureMessages":[],"meta":{}}],"startTime":1772266856250,"endTime":1772266856275.5696,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/lead-service.test.ts"},{"assertionResults":[{"ancestorTitles":["Mobile API","GET /leads"],"fullName":"Mobile API GET /leads should return paginated list","status":"passed","title":"should return paginated list","duration":17.367200000000594,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile API","POST /leads"],"fullName":"Mobile API POST /leads should create lead","status":"passed","title":"should create lead","duration":20.0687999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile API","POST /leads"],"fullName":"Mobile API POST /leads should return 400 for invalid data","status":"passed","title":"should return 400 for invalid data","duration":7.091000000000349,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile API","PUT /leads/:id"],"fullName":"Mobile API PUT /leads/:id should block unauthorized update","status":"passed","title":"should block unauthorized update","duration":8.027699999998731,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile API","POST /leads/:id/followup"],"fullName":"Mobile API POST /leads/:id/followup should validate status whitelist","status":"passed","title":"should validate status whitelist","duration":0.6340000000000146,"failureMessages":[],"meta":{}}],"startTime":1772266829236,"endTime":1772266829289.634,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/mobile-api.test.ts"},{"assertionResults":[{"ancestorTitles":["Pool Recycle Job"],"fullName":"Pool Recycle Job should skip tenants with auto-recycle disabled","status":"passed","title":"should skip tenants with auto-recycle disabled","duration":7.171500000000378,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pool Recycle Job"],"fullName":"Pool Recycle Job 应当回收超期未联系的线索 (Status: PENDING_FOLLOWUP)","status":"passed","title":"应当回收超期未联系的线索 (Status: PENDING_FOLLOWUP)","duration":3.784099999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pool Recycle Job"],"fullName":"Pool Recycle Job 应当回收超期未成交的线索 (Status: FOLLOWING_UP)","status":"passed","title":"应当回收超期未成交的线索 (Status: FOLLOWING_UP)","duration":2.2304999999996653,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pool Recycle Job"],"fullName":"Pool Recycle Job 不应当回收在 SLA 期限内的线索","status":"passed","title":"不应当回收在 SLA 期限内的线索","duration":1.8467000000000553,"failureMessages":[],"meta":{}}],"startTime":1772266860627,"endTime":1772266860642.8467,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/pool-recycle.test.ts"},{"assertionResults":[{"ancestorTitles":["Leads Queries","getLeadFunnelStats"],"fullName":"Leads Queries getLeadFunnelStats should return funnel statistics correctly","status":"passed","title":"should return funnel statistics correctly","duration":8.888999999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Leads Queries","getLeadFunnelStats"],"fullName":"Leads Queries getLeadFunnelStats should throw error if user is not authenticated","status":"passed","title":"should throw error if user is not authenticated","duration":3.3275000000003274,"failureMessages":[],"meta":{}}],"startTime":1772266864553,"endTime":1772266864565.3274,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Lead Restore Actions","canRestoreLead"],"fullName":"Lead Restore Actions canRestoreLead should return false if user is not authenticated","status":"passed","title":"should return false if user is not authenticated","duration":4.283000000001266,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","canRestoreLead"],"fullName":"Lead Restore Actions canRestoreLead should return false if lead does not exist","status":"passed","title":"should return false if lead does not exist","duration":1.2739000000001397,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","canRestoreLead"],"fullName":"Lead Restore Actions canRestoreLead should return false if lead status is not INVALID","status":"passed","title":"should return false if lead status is not INVALID","duration":0.7849999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","canRestoreLead"],"fullName":"Lead Restore Actions canRestoreLead should return true if lead status is INVALID","status":"passed","title":"should return true if lead status is INVALID","duration":1.0627000000004045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","restoreLeadAction"],"fullName":"Lead Restore Actions restoreLeadAction should throw/return error if not authenticated","status":"passed","title":"should throw/return error if not authenticated","duration":1.2100000000009459,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","restoreLeadAction"],"fullName":"Lead Restore Actions restoreLeadAction should check permissions","status":"passed","title":"should check permissions","duration":17.8096000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","restoreLeadAction"],"fullName":"Lead Restore Actions restoreLeadAction should fail if lead not found","status":"passed","title":"should fail if lead not found","duration":1.895200000000841,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","restoreLeadAction"],"fullName":"Lead Restore Actions restoreLeadAction should fail if lead is not INVALID","status":"passed","title":"should fail if lead is not INVALID","duration":1.4491999999991094,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Restore Actions","restoreLeadAction"],"fullName":"Lead Restore Actions restoreLeadAction should restore lead successfully","status":"passed","title":"should restore lead successfully","duration":311.8780999999999,"failureMessages":[],"meta":{}}],"startTime":1772266824160,"endTime":1772266824502.8782,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/restore.test.ts"},{"assertionResults":[{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回满分 35 分当预算 >= 50000","status":"passed","title":"应返回满分 35 分当预算 >= 50000","duration":2.8002000000005864,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回 28 分当预算 20000-50000","status":"passed","title":"应返回 28 分当预算 20000-50000","duration":0.3841000000002168,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回 20 分当预算 10000-20000","status":"passed","title":"应返回 20 分当预算 10000-20000","duration":0.39359999999942374,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回 12 分当预算 5000-10000","status":"passed","title":"应返回 12 分当预算 5000-10000","duration":0.5762999999997191,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回 5 分当预算 > 0","status":"passed","title":"应返回 5 分当预算 > 0","duration":0.5716999999995096,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","calculateBudgetScore"],"fullName":"scoring-config calculateBudgetScore 应返回 0 分当预算 = 0","status":"passed","title":"应返回 0 分当预算 = 0","duration":0.2672000000002299,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getStarRating"],"fullName":"scoring-config getStarRating 应返回 5 星当分数 >= 80","status":"passed","title":"应返回 5 星当分数 >= 80","duration":0.5632999999997992,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getStarRating"],"fullName":"scoring-config getStarRating 应返回 4 星当分数 60-79","status":"passed","title":"应返回 4 星当分数 60-79","duration":0.3275000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getStarRating"],"fullName":"scoring-config getStarRating 应返回 3 星当分数 40-59","status":"passed","title":"应返回 3 星当分数 40-59","duration":0.6965000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getStarRating"],"fullName":"scoring-config getStarRating 应返回 2 星当分数 20-39","status":"passed","title":"应返回 2 星当分数 20-39","duration":0.41119999999955326,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getStarRating"],"fullName":"scoring-config getStarRating 应返回 1 星当分数 < 20","status":"passed","title":"应返回 1 星当分数 < 20","duration":0.26089999999931024,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getPriorityLabel"],"fullName":"scoring-config getPriorityLabel 应返回热门线索当分数 >= 70","status":"passed","title":"应返回热门线索当分数 >= 70","duration":0.3161000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getPriorityLabel"],"fullName":"scoring-config getPriorityLabel 应返回优质线索当分数 50-69","status":"passed","title":"应返回优质线索当分数 50-69","duration":0.19090000000051077,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getPriorityLabel"],"fullName":"scoring-config getPriorityLabel 应返回普通线索当分数 30-49","status":"passed","title":"应返回普通线索当分数 30-49","duration":0.2098999999998341,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","getPriorityLabel"],"fullName":"scoring-config getPriorityLabel 应返回待培育当分数 < 30","status":"passed","title":"应返回待培育当分数 < 30","duration":0.24650000000019645,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","权重配置"],"fullName":"scoring-config 权重配置 来源权重应包含所有必要渠道","status":"passed","title":"来源权重应包含所有必要渠道","duration":0.4808999999995649,"failureMessages":[],"meta":{}},{"ancestorTitles":["scoring-config","权重配置"],"fullName":"scoring-config 权重配置 意向度权重应包含所有级别","status":"passed","title":"意向度权重应包含所有级别","duration":0.27660000000014406,"failureMessages":[],"meta":{}}],"startTime":1772266867005,"endTime":1772266867015.481,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/scoring-config.test.ts"},{"assertionResults":[{"ancestorTitles":["Webhook Handler","verifyAccessToken"],"fullName":"Webhook Handler verifyAccessToken should return false if token is missing","status":"passed","title":"should return false if token is missing","duration":3.438799999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","verifyAccessToken"],"fullName":"Webhook Handler verifyAccessToken should return true if token matches tenant settings","status":"passed","title":"should return true if token matches tenant settings","duration":2.435099999999693,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","verifyAccessToken"],"fullName":"Webhook Handler verifyAccessToken should return false if token mismatch","status":"passed","title":"should return false if token mismatch","duration":0.7372000000004846,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","matchChannel"],"fullName":"Webhook Handler matchChannel should return empty if no category name","status":"passed","title":"should return empty if no category name","duration":2.78860000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","matchChannel"],"fullName":"Webhook Handler matchChannel should match precise channel name","status":"passed","title":"should match precise channel name","duration":1.4799000000002707,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","handleWebhookRequest"],"fullName":"Webhook Handler handleWebhookRequest should return 400 if missing required fields","status":"passed","title":"should return 400 if missing required fields","duration":0.6050999999997657,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","handleWebhookRequest"],"fullName":"Webhook Handler handleWebhookRequest should return 200 (idempotent) if external_id exists","status":"passed","title":"should return 200 (idempotent) if external_id exists","duration":0.8505999999997584,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","handleWebhookRequest"],"fullName":"Webhook Handler handleWebhookRequest should create lead if new","status":"passed","title":"should create lead if new","duration":5.2478000000000975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Webhook Handler","handleWebhookRequest"],"fullName":"Webhook Handler handleWebhookRequest should return 409 if duplicate phone/address detected","status":"passed","title":"should return 409 if duplicate phone/address detected","duration":1.4536000000007334,"failureMessages":[],"meta":{}}],"startTime":1772266850697,"endTime":1772266850717.4536,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/__tests__/webhook.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Cancellation"],"fullName":"Order Cancellation should successfully submit cancellation request for valid order","status":"passed","title":"should successfully submit cancellation request for valid order","duration":15.67909999999938,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Cancellation"],"fullName":"Order Cancellation should reject cancellation for invalid order status","status":"passed","title":"should reject cancellation for invalid order status","duration":3.131199999999808,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Cancellation"],"fullName":"Order Cancellation should auto-execute cancellation if approval flow is disabled","status":"passed","title":"should auto-execute cancellation if approval flow is disabled","duration":3.1611000000002605,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Cancellation"],"fullName":"Order Cancellation should handle unauthorized access","status":"passed","title":"should handle unauthorized access","duration":1.0368000000007669,"failureMessages":[],"meta":{}}],"startTime":1772266849778,"endTime":1772266849801.0369,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/cancel-order.test.ts"},{"assertionResults":[{"ancestorTitles":["Change Order Actions","createChangeRequestAction"],"fullName":"Change Order Actions createChangeRequestAction should create change request and submit approval","status":"passed","title":"should create change request and submit approval","duration":9.460900000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["Change Order Actions","approveChangeRequestAction"],"fullName":"Change Order Actions approveChangeRequestAction should approve request and update order","status":"passed","title":"should approve request and update order","duration":4.787599999999657,"failureMessages":[],"meta":{}}],"startTime":1772266867055,"endTime":1772266867069.7876,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/change-order.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Halt Actions","haltOrderAction"],"fullName":"Order Halt Actions haltOrderAction should call OrderService.haltOrder and revalidate path","status":"passed","title":"should call OrderService.haltOrder and revalidate path","duration":11.13260000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Halt Actions","haltOrderAction"],"fullName":"Order Halt Actions haltOrderAction should return error if OrderService throws","status":"passed","title":"should return error if OrderService throws","duration":9.056899999999587,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Halt Actions","resumeOrderAction"],"fullName":"Order Halt Actions resumeOrderAction should call OrderService.resumeOrder","status":"passed","title":"should call OrderService.resumeOrder","duration":2.0075999999990017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Halt Actions","getHaltedOrders"],"fullName":"Order Halt Actions getHaltedOrders should return enriched halted orders","status":"passed","title":"should return enriched halted orders","duration":3.7501999999985856,"failureMessages":[],"meta":{}}],"startTime":1772266845443,"endTime":1772266845469.7502,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/halt-order.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Actions (Final Polish)","createOrderFromQuote"],"fullName":"Order Actions (Final Polish) createOrderFromQuote should create order directly when fully paid","status":"passed","title":"should create order directly when fully paid","duration":13.992500000000291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","confirmOrderProduction"],"fullName":"Order Actions (Final Polish) confirmOrderProduction should successfully confirm production","status":"passed","title":"should successfully confirm production","duration":5.606799999999566,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","splitOrder"],"fullName":"Order Actions (Final Polish) splitOrder should successfully split order","status":"passed","title":"should successfully split order","duration":3.5847000000012486,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","requestDelivery"],"fullName":"Order Actions (Final Polish) requestDelivery should update status","status":"passed","title":"should update status","duration":3.859599999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","updateLogistics"],"fullName":"Order Actions (Final Polish) updateLogistics should update logistics info","status":"passed","title":"should update logistics info","duration":2.7877000000007683,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","confirmInstallationAction"],"fullName":"Order Actions (Final Polish) confirmInstallationAction should call OrderService","status":"passed","title":"should call OrderService","duration":2.5707000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","customerAcceptAction"],"fullName":"Order Actions (Final Polish) customerAcceptAction should call customerAccept","status":"passed","title":"should call customerAccept","duration":3.4591999999993277,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Actions (Final Polish)","closeOrderAction"],"fullName":"Order Actions (Final Polish) closeOrderAction should close order","status":"passed","title":"should close order","duration":2.573099999999613,"failureMessages":[],"meta":{}}],"startTime":1772266836327,"endTime":1772266836367.573,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/order-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Order & Finance Integration Flow"],"fullName":"Order & Finance Integration Flow Scenario 1: Cash Order - Create, Deposit, Confirm Production","status":"passed","title":"Scenario 1: Cash Order - Create, Deposit, Confirm Production","duration":22.06370000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order & Finance Integration Flow"],"fullName":"Order & Finance Integration Flow Scenario 2: Monthly Settlement - No Deposit Required","status":"passed","title":"Scenario 2: Monthly Settlement - No Deposit Required","duration":2.214400000000751,"failureMessages":[],"meta":{}}],"startTime":1772266849593,"endTime":1772266849618.2144,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/order-finance-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow self-transition","status":"passed","title":"should allow self-transition","duration":4.014100000000326,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow valid transitions","status":"passed","title":"should allow valid transitions","duration":0.778599999999642,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should deny invalid transitions","status":"passed","title":"should deny invalid transitions","duration":0.6685000000006767,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow cancellation from most states","status":"passed","title":"should allow cancellation from most states","duration":0.9400999999998021,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","getNextStates"],"fullName":"OrderStateMachine getNextStates should return correct next states for DRAFT","status":"passed","title":"should return correct next states for DRAFT","duration":2.4470000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","getNextStates"],"fullName":"OrderStateMachine getNextStates should return empty array for final states","status":"passed","title":"should return empty array for final states","duration":1.790100000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","getNextStates"],"fullName":"OrderStateMachine getNextStates should return correct next states for HALTED","status":"passed","title":"should return correct next states for HALTED","duration":1.2443999999995867,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","canCancel"],"fullName":"OrderStateMachine canCancel should return true for active states","status":"passed","title":"should return true for active states","duration":0.5117000000000189,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","canCancel"],"fullName":"OrderStateMachine canCancel should return false for final states","status":"passed","title":"should return false for final states","duration":0.886199999999917,"failureMessages":[],"meta":{}}],"startTime":1772266865439,"endTime":1772266865453.8862,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/__tests__/order-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["Platform 模块安全测试","getPendingTenants - 权限保护"],"fullName":"Platform 模块安全测试 getPendingTenants - 权限保护 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":4.4945000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform 模块安全测试","getPendingTenants - 权限保护"],"fullName":"Platform 模块安全测试 getPendingTenants - 权限保护 非平台管理员应返回 success: false","status":"passed","title":"非平台管理员应返回 success: false","duration":1.2165999999997439,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform 模块安全测试","submitTenantApplication - Zod 校验"],"fullName":"Platform 模块安全测试 submitTenantApplication - Zod 校验 无效手机号应返回错误","status":"passed","title":"无效手机号应返回错误","duration":5.4011999999984255,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform 模块安全测试","submitTenantApplication - Zod 校验"],"fullName":"Platform 模块安全测试 submitTenantApplication - Zod 校验 密码过短应返回错误","status":"passed","title":"密码过短应返回错误","duration":1.7824999999993452,"failureMessages":[],"meta":{}}],"startTime":1772266864537,"endTime":1772266864550.7825,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/platform/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Platform Actions - L4 升级测试","approveTenant - 审批通过租户"],"fullName":"Platform Actions - L4 升级测试 approveTenant - 审批通过租户 未登录时应返回错误","status":"passed","title":"未登录时应返回错误","duration":5249.899399999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveTenant - 审批通过租户"],"fullName":"Platform Actions - L4 升级测试 approveTenant - 审批通过租户 非平台管理员应返回无权限错误","status":"passed","title":"非平台管理员应返回无权限错误","duration":1.5477999999984604,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveTenant - 审批通过租户"],"fullName":"Platform Actions - L4 升级测试 approveTenant - 审批通过租户 租户不存在时应返回错误","status":"passed","title":"租户不存在时应返回错误","duration":2.0247999999992317,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveTenant - 审批通过租户"],"fullName":"Platform Actions - L4 升级测试 approveTenant - 审批通过租户 租户状态非 pending_approval 时应拒绝","status":"passed","title":"租户状态非 pending_approval 时应拒绝","duration":1.2574000000004162,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveTenant - 审批通过租户"],"fullName":"Platform Actions - L4 升级测试 approveTenant - 审批通过租户 正常审批应返回成功","status":"passed","title":"正常审批应返回成功","duration":1.4614000000001397,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectTenant - 拒绝租户申请"],"fullName":"Platform Actions - L4 升级测试 rejectTenant - 拒绝租户申请 拒绝原因为空时应返回错误","status":"passed","title":"拒绝原因为空时应返回错误","duration":2.3671999999987747,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectTenant - 拒绝租户申请"],"fullName":"Platform Actions - L4 升级测试 rejectTenant - 拒绝租户申请 拒绝原因仅空格时应返回错误","status":"passed","title":"拒绝原因仅空格时应返回错误","duration":0.8408999999992375,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectTenant - 拒绝租户申请"],"fullName":"Platform Actions - L4 升级测试 rejectTenant - 拒绝租户申请 正常拒绝应返回成功","status":"passed","title":"正常拒绝应返回成功","duration":1.8135999999994965,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","suspendTenant - 暂停租户"],"fullName":"Platform Actions - L4 升级测试 suspendTenant - 暂停租户 平台管理员应能暂停租户","status":"passed","title":"平台管理员应能暂停租户","duration":1.7624999999989086,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","suspendTenant - 暂停租户"],"fullName":"Platform Actions - L4 升级测试 suspendTenant - 暂停租户 非平台管理员不能暂停租户","status":"passed","title":"非平台管理员不能暂停租户","duration":0.7937999999994645,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","activateTenant - 恢复租户"],"fullName":"Platform Actions - L4 升级测试 activateTenant - 恢复租户 非暂停状态不应允许恢复","status":"passed","title":"非暂停状态不应允许恢复","duration":1.4195999999992637,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","activateTenant - 恢复租户"],"fullName":"Platform Actions - L4 升级测试 activateTenant - 恢复租户 暂停状态应允许恢复","status":"passed","title":"暂停状态应允许恢复","duration":0.742500000000291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","getAllTenants - 分页查询"],"fullName":"Platform Actions - L4 升级测试 getAllTenants - 分页查询 应支持默认分页参数","status":"passed","title":"应支持默认分页参数","duration":3.9025999999994383,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 分布式限流 (L5 增强)"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 分布式限流 (L5 增强) 当 IP 限流触发时 (allowed: false) 应拒绝注册","status":"passed","title":"当 IP 限流触发时 (allowed: false) 应拒绝注册","duration":955.4695000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 分布式限流 (L5 增强)"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 分布式限流 (L5 增强) 当限流检查异常时应降级放行 (Resilience)","status":"passed","title":"当限流检查异常时应降级放行 (Resilience)","duration":2.95679999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 注册频率限制"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 注册频率限制 24小时内超过3次申请应被拒绝","status":"passed","title":"24小时内超过3次申请应被拒绝","duration":1.0264999999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 重复注册检测"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 重复注册检测 手机号已存在时应返回错误","status":"passed","title":"手机号已存在时应返回错误","duration":1.0985000000000582,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - Zod 校验"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - Zod 校验 无效邮箱应返回错误","status":"passed","title":"无效邮箱应返回错误","duration":1.0586000000002969,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - Zod 校验"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - Zod 校验 密码缺少数字应返回错误","status":"passed","title":"密码缺少数字应返回错误","duration":0.8905999999988126,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - Zod 校验"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - Zod 校验 企业名称过短应返回错误","status":"passed","title":"企业名称过短应返回错误","duration":0.8656000000009954,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 正常注册"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 正常注册 所有条件满足时应注册成功","status":"passed","title":"所有条件满足时应注册成功","duration":1.3198000000011234,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","submitTenantApplication - 正常注册"],"fullName":"Platform Actions - L4 升级测试 submitTenantApplication - 正常注册 注册成功后应向平台管理员发送站内通知","status":"passed","title":"注册成功后应向平台管理员发送站内通知","duration":83.22420000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","getTenantApplicationStatus - 查询申请状态"],"fullName":"Platform Actions - L4 升级测试 getTenantApplicationStatus - 查询申请状态 手机号不存在时应返回 found: false","status":"passed","title":"手机号不存在时应返回 found: false","duration":0.8317000000024564,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","getTenantApplicationStatus - 查询申请状态"],"fullName":"Platform Actions - L4 升级测试 getTenantApplicationStatus - 查询申请状态 手机号存在时应返回申请状态","status":"passed","title":"手机号存在时应返回申请状态","duration":0.5832999999984168,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveVerification - 通过企业认证"],"fullName":"Platform Actions - L4 升级测试 approveVerification - 通过企业认证 认证状态非 pending 时应拒绝","status":"passed","title":"认证状态非 pending 时应拒绝","duration":1.277699999998731,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveVerification - 通过企业认证"],"fullName":"Platform Actions - L4 升级测试 approveVerification - 通过企业认证 正常通过认证应返回成功","status":"passed","title":"正常通过认证应返回成功","duration":0.6873000000014144,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","approveVerification - 通过企业认证"],"fullName":"Platform Actions - L4 升级测试 approveVerification - 通过企业认证 认证通过后应记录审计日志","status":"passed","title":"认证通过后应记录审计日志","duration":1.242500000000291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectVerification - 驳回企业认证"],"fullName":"Platform Actions - L4 升级测试 rejectVerification - 驳回企业认证 驳回原因为空时应返回错误","status":"passed","title":"驳回原因为空时应返回错误","duration":0.9382000000005064,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectVerification - 驳回企业认证"],"fullName":"Platform Actions - L4 升级测试 rejectVerification - 驳回企业认证 正常驳回应返回成功","status":"passed","title":"正常驳回应返回成功","duration":0.875,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","rejectVerification - 驳回企业认证"],"fullName":"Platform Actions - L4 升级测试 rejectVerification - 驳回企业认证 驳回后应记录审计日志","status":"passed","title":"驳回后应记录审计日志","duration":0.872799999997369,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","AuditService 审计验证"],"fullName":"Platform Actions - L4 升级测试 AuditService 审计验证 审批通过租户时应调用 AuditService.record","status":"passed","title":"审批通过租户时应调用 AuditService.record","duration":1.2197000000014668,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","AuditService 审计验证"],"fullName":"Platform Actions - L4 升级测试 AuditService 审计验证 暂停租户时应调用 AuditService.record","status":"passed","title":"暂停租户时应调用 AuditService.record","duration":1.4190999999991618,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Actions - L4 升级测试","AuditService 审计验证"],"fullName":"Platform Actions - L4 升级测试 AuditService 审计验证 恢复租户时应调用 AuditService.record","status":"passed","title":"恢复租户时应调用 AuditService.record","duration":2.7102000000013504,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getPlatformOverview"],"fullName":"Platform Analytics - L5 统计测试 getPlatformOverview 未登录时应返回错误","status":"passed","title":"未登录时应返回错误","duration":77.90089999999691,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getPlatformOverview"],"fullName":"Platform Analytics - L5 统计测试 getPlatformOverview 非平台管理员应返回错误","status":"passed","title":"非平台管理员应返回错误","duration":0.7304000000003725,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getPlatformOverview"],"fullName":"Platform Analytics - L5 统计测试 getPlatformOverview 平台管理员应返回统计数据","status":"passed","title":"平台管理员应返回统计数据","duration":1.3126000000011118,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getRegistrationTrend"],"fullName":"Platform Analytics - L5 统计测试 getRegistrationTrend 非平台管理员应返回错误","status":"passed","title":"非平台管理员应返回错误","duration":0.7801999999974214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getRegistrationTrend"],"fullName":"Platform Analytics - L5 统计测试 getRegistrationTrend 平台管理员应返回趋势数据","status":"passed","title":"平台管理员应返回趋势数据","duration":1.0005000000019209,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - L5 统计测试","getRecentPlatformActivity"],"fullName":"Platform Analytics - L5 统计测试 getRecentPlatformActivity 平台管理员应返回近期活动","status":"passed","title":"平台管理员应返回近期活动","duration":1.3231999999989057,"failureMessages":[],"meta":{}}],"startTime":1772266798998,"endTime":1772266805417.3232,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/platform/__tests__/platform-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Platform Analytics - 独立测试套件","getPlatformOverview - 平台概览统计"],"fullName":"Platform Analytics - 独立测试套件 getPlatformOverview - 平台概览统计 未登录时应返回错误","status":"passed","title":"未登录时应返回错误","duration":57.178900000000795,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getPlatformOverview - 平台概览统计"],"fullName":"Platform Analytics - 独立测试套件 getPlatformOverview - 平台概览统计 非平台管理员应返回权限错误","status":"passed","title":"非平台管理员应返回权限错误","duration":1.131999999999607,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getPlatformOverview - 平台概览统计"],"fullName":"Platform Analytics - 独立测试套件 getPlatformOverview - 平台概览统计 平台管理员应返回完整的概览统计数据","status":"passed","title":"平台管理员应返回完整的概览统计数据","duration":3.700700000001234,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getPlatformOverview - 平台概览统计"],"fullName":"Platform Analytics - 独立测试套件 getPlatformOverview - 平台概览统计 无租户数据时应返回全零统计","status":"passed","title":"无租户数据时应返回全零统计","duration":1.4360999999989872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRegistrationTrend - 注册趋势"],"fullName":"Platform Analytics - 独立测试套件 getRegistrationTrend - 注册趋势 未登录时应返回错误","status":"passed","title":"未登录时应返回错误","duration":1.1201000000000931,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRegistrationTrend - 注册趋势"],"fullName":"Platform Analytics - 独立测试套件 getRegistrationTrend - 注册趋势 非平台管理员应返回权限错误","status":"passed","title":"非平台管理员应返回权限错误","duration":0.5138999999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRegistrationTrend - 注册趋势"],"fullName":"Platform Analytics - 独立测试套件 getRegistrationTrend - 注册趋势 应返回近30天的注册趋势数据","status":"passed","title":"应返回近30天的注册趋势数据","duration":2.569500000001426,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRegistrationTrend - 注册趋势"],"fullName":"Platform Analytics - 独立测试套件 getRegistrationTrend - 注册趋势 无注册数据时应返回空数组","status":"passed","title":"无注册数据时应返回空数组","duration":0.7427000000006956,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRecentPlatformActivity - 近期平台活动"],"fullName":"Platform Analytics - 独立测试套件 getRecentPlatformActivity - 近期平台活动 未登录时应返回错误","status":"passed","title":"未登录时应返回错误","duration":1.1301000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRecentPlatformActivity - 近期平台活动"],"fullName":"Platform Analytics - 独立测试套件 getRecentPlatformActivity - 近期平台活动 非平台管理员应返回权限错误","status":"passed","title":"非平台管理员应返回权限错误","duration":0.79359999999906,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRecentPlatformActivity - 近期平台活动"],"fullName":"Platform Analytics - 独立测试套件 getRecentPlatformActivity - 近期平台活动 应返回近7天的活动统计","status":"passed","title":"应返回近7天的活动统计","duration":1.1332000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Platform Analytics - 独立测试套件","getRecentPlatformActivity - 近期平台活动"],"fullName":"Platform Analytics - 独立测试套件 getRecentPlatformActivity - 近期平台活动 无活动数据时应返回全零","status":"passed","title":"无活动数据时应返回全零","duration":0.6226999999998952,"failureMessages":[],"meta":{}}],"startTime":1772266832243,"endTime":1772266832316.6228,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/platform/__tests__/platform-analytics.test.ts"},{"assertionResults":[{"ancestorTitles":["Pricing 模块安全测试","Auth 保护"],"fullName":"Pricing 模块安全测试 Auth 保护 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":3.819399999999405,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing 模块安全测试","正常访问"],"fullName":"Pricing 模块安全测试 正常访问 有权限时应返回定价建议","status":"passed","title":"有权限时应返回定价建议","duration":7.491799999999785,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing 模块安全测试","Zod 校验"],"fullName":"Pricing 模块安全测试 Zod 校验 无 productId 和 sku 时应按业务逻辑返回错误","status":"passed","title":"无 productId 和 sku 时应按业务逻辑返回错误","duration":0.8090999999994892,"failureMessages":[],"meta":{}}],"startTime":1772266865456,"endTime":1772266865468.809,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/pricing/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Pricing Actions (L5)"],"fullName":"Pricing Actions (L5) 未指定 productId 或 sku 时返回错误","status":"passed","title":"未指定 productId 或 sku 时返回错误","duration":3298.8558000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions (L5)"],"fullName":"Pricing Actions (L5) 产品不存在时返回错误","status":"passed","title":"产品不存在时返回错误","duration":1.2849999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions (L5)"],"fullName":"Pricing Actions (L5) 无历史数据时也能返回系统合理默认值, 包括预估利润","status":"passed","title":"无历史数据时也能返回系统合理默认值, 包括预估利润","duration":8.541699999999764,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions (L5)"],"fullName":"Pricing Actions (L5) 具有历史交易数据时应返回合理的各种分析数据聚合和计算","status":"passed","title":"具有历史交易数据时应返回合理的各种分析数据聚合和计算","duration":5.130400000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions (L5)"],"fullName":"Pricing Actions (L5) tenantId 隔离与 checkPermission 被调用触发","status":"passed","title":"tenantId 隔离与 checkPermission 被调用触发","duration":6.3827000000001135,"failureMessages":[],"meta":{}}],"startTime":1772266807329,"endTime":1772266810649.3828,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/pricing/__tests__/pricing-hints.test.ts"},{"assertionResults":[{"ancestorTitles":["配件联动服务 (Accessory Linkage Service)"],"fullName":"配件联动服务 (Accessory Linkage Service) 窗帘主材联动 (Curtain linkage - Track & Service & Accessory)","status":"passed","title":"窗帘主材联动 (Curtain linkage - Track & Service & Accessory)","duration":7.368500000000495,"failureMessages":[],"meta":{}},{"ancestorTitles":["配件联动服务 (Accessory Linkage Service)"],"fullName":"配件联动服务 (Accessory Linkage Service) 墙纸主材联动 (Wallpaper linkage - Glue & Service proportional)","status":"passed","title":"墙纸主材联动 (Wallpaper linkage - Glue & Service proportional)","duration":2.070600000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["配件联动服务 (Accessory Linkage Service)"],"fullName":"配件联动服务 (Accessory Linkage Service) 没有对应规则的分类返回空 (Empty for no rules)","status":"passed","title":"没有对应规则的分类返回空 (Empty for no rules)","duration":0.8963000000003376,"failureMessages":[],"meta":{}}],"startTime":1772266865610,"endTime":1772266865619.8962,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/accessory-linkage.service.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单 Actions 集成测试","createQuote - 创建报价单"],"fullName":"报价单 Actions 集成测试 createQuote - 创建报价单 应成功创建报价单并设置 rootQuoteId","status":"passed","title":"应成功创建报价单并设置 rootQuoteId","duration":2723.766600000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","deleteQuoteItem - 删除行项目"],"fullName":"报价单 Actions 集成测试 deleteQuoteItem - 删除行项目 应删除行项目并重新计算报价总额","status":"passed","title":"应删除行项目并重新计算报价总额","duration":96.34690000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","deleteQuoteItem - 删除行项目"],"fullName":"报价单 Actions 集成测试 deleteQuoteItem - 删除行项目 行项目不存在时应返回失败","status":"passed","title":"行项目不存在时应返回失败","duration":2.3721999999997934,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","submitQuote - 提交报价单"],"fullName":"报价单 Actions 集成测试 submitQuote - 提交报价单 应调用 QuoteLifecycleService.submit","status":"passed","title":"应调用 QuoteLifecycleService.submit","duration":155.77380000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","approveQuote - 审批报价单"],"fullName":"报价单 Actions 集成测试 approveQuote - 审批报价单 应传入租户 ID 调用 QuoteLifecycleService.approve","status":"passed","title":"应传入租户 ID 调用 QuoteLifecycleService.approve","duration":2.5129999999990105,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","rejectQuote - 拒绝报价单"],"fullName":"报价单 Actions 集成测试 rejectQuote - 拒绝报价单 应传入租户 ID 调用 QuoteLifecycleService.reject","status":"passed","title":"应传入租户 ID 调用 QuoteLifecycleService.reject","duration":2.877200000000812,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单 Actions 集成测试","deleteRoom - 删除房间"],"fullName":"报价单 Actions 集成测试 deleteRoom - 删除房间 应删除房间及其行项目并重算总额","status":"passed","title":"应删除房间及其行项目并重算总额","duration":34.45080000000053,"failureMessages":[],"meta":{}}],"startTime":1772266802647,"endTime":1772266805667.4507,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Bundle Aggregation"],"fullName":"Quote Bundle Aggregation should aggregate totals when adding quotes","status":"passed","title":"should aggregate totals when adding quotes","duration":6.18769999999995,"failureMessages":[],"meta":{}}],"startTime":1772266867111,"endTime":1772266867117.1877,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/aggregation.test.ts"},{"assertionResults":[{"ancestorTitles":["Bundle Aggregation Logic"],"fullName":"Bundle Aggregation Logic should correctly sum up amounts from linked quotes","status":"passed","title":"should correctly sum up amounts from linked quotes","duration":4.77049999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Aggregation Logic"],"fullName":"Bundle Aggregation Logic should handle bundles with no quotes","status":"passed","title":"should handle bundles with no quotes","duration":0.8401999999999816,"failureMessages":[],"meta":{}}],"startTime":1772266866568,"endTime":1772266866573.84,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/bundle-aggregator.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Bundle Flow"],"fullName":"Quote Bundle Flow should create a quote bundle","status":"skipped","title":"should create a quote bundle","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/bundle-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","CurtainStrategy (窗帘策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) CurtainStrategy (窗帘策略) 计算高度正常时无预警 (No warning on normal height)","status":"passed","title":"计算高度正常时无预警 (No warning on normal height)","duration":3.3081999999994878,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","CurtainStrategy (窗帘策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) CurtainStrategy (窗帘策略) 超高预警：建议让渡帘头 (Warning: Adjust header)","status":"passed","title":"超高预警：建议让渡帘头 (Warning: Adjust header)","duration":0.6412000000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","CurtainStrategy (窗帘策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) CurtainStrategy (窗帘策略) 超高预警：让渡帘头工艺 (Warning: Limit 13cm)","status":"passed","title":"超高预警：让渡帘头工艺 (Warning: Limit 13cm)","duration":0.3393000000005486,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","CurtainStrategy (窗帘策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) CurtainStrategy (窗帘策略) 定宽工艺计算检验 (Fixed Width Algorithm)","status":"passed","title":"定宽工艺计算检验 (Fixed Width Algorithm)","duration":0.7807000000002517,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","WallpaperStrategy (墙纸墙布策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) WallpaperStrategy (墙纸墙布策略) 墙布计算包含额外对花损耗 (Wallcloth with match pattern loss)","status":"passed","title":"墙布计算包含额外对花损耗 (Wallcloth with match pattern loss)","duration":0.9068999999999505,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","WallpaperStrategy (墙纸墙布策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) WallpaperStrategy (墙纸墙布策略) 标准墙纸使用卷数计算核心逻辑 (Wallpaper Roll count)","status":"passed","title":"标准墙纸使用卷数计算核心逻辑 (Wallpaper Roll count)","duration":0.6033999999999651,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","WallpaperStrategy (墙纸墙布策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) WallpaperStrategy (墙纸墙布策略) 墙布超高异常预警 (Wallcloth Over-height exception warning)","status":"passed","title":"墙布超高异常预警 (Wallcloth Over-height exception warning)","duration":0.7138000000004467,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","WallpaperStrategy (墙纸墙布策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) WallpaperStrategy (墙纸墙布策略) 零元计算边界 (Zero Price or Dimension boundary)","status":"passed","title":"零元计算边界 (Zero Price or Dimension boundary)","duration":0.40130000000044674,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StandardProductStrategy (标品策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StandardProductStrategy (标品策略) 正常数量与单价计算 (Normal calculation)","status":"passed","title":"正常数量与单价计算 (Normal calculation)","duration":0.8437999999996464,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StandardProductStrategy (标品策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StandardProductStrategy (标品策略) 数量缺省默认计算 (Missing quantity defaulting)","status":"passed","title":"数量缺省默认计算 (Missing quantity defaulting)","duration":0.5207000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StandardProductStrategy (标品策略)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StandardProductStrategy (标品策略) 浮点数精度测试 (Floating point precision)","status":"passed","title":"浮点数精度测试 (Floating point precision)","duration":0.22749999999996362,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StrategyFactory (策略工厂)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StrategyFactory (策略工厂) 返回 WALLPAPER 对应的 WallpaperStrategy","status":"passed","title":"返回 WALLPAPER 对应的 WallpaperStrategy","duration":0.24949999999989814,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StrategyFactory (策略工厂)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StrategyFactory (策略工厂) 返回 CURTAIN 对应的 CurtainStrategy","status":"passed","title":"返回 CURTAIN 对应的 CurtainStrategy","duration":0.16229999999995925,"failureMessages":[],"meta":{}},{"ancestorTitles":["calc-strategies 边界和异常测试 (Boundary & Exception Tests)","StrategyFactory (策略工厂)"],"fullName":"calc-strategies 边界和异常测试 (Boundary & Exception Tests) StrategyFactory (策略工厂) 默认异常类型返回 StandardProductStrategy","status":"passed","title":"默认异常类型返回 StandardProductStrategy","duration":0.13259999999991123,"failureMessages":[],"meta":{}}],"startTime":1772266863805,"endTime":1772266863816.1624,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/calc-strategies-boundary.test.ts"},{"assertionResults":[{"ancestorTitles":["报价计算服务 (Calculation Service)"],"fullName":"报价计算服务 (Calculation Service) 报价单项不存在时应抛出异常 (Throw on not found)","status":"passed","title":"报价单项不存在时应抛出异常 (Throw on not found)","duration":6.770199999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价计算服务 (Calculation Service)"],"fullName":"报价计算服务 (Calculation Service) 能够根据分类正常派发到标品策略 (Dispatch standard strategy)","status":"passed","title":"能够根据分类正常派发到标品策略 (Dispatch standard strategy)","duration":1.361399999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价计算服务 (Calculation Service)"],"fullName":"报价计算服务 (Calculation Service) 窗帘计算策略处理 (Dispatch curtain strategy)","status":"passed","title":"窗帘计算策略处理 (Dispatch curtain strategy)","duration":1.2678999999998268,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价计算服务 (Calculation Service)"],"fullName":"报价计算服务 (Calculation Service) 墙纸计算策略处理 (Dispatch wallpaper strategy)","status":"passed","title":"墙纸计算策略处理 (Dispatch wallpaper strategy)","duration":1.7349999999996726,"failureMessages":[],"meta":{}}],"startTime":1772266867989,"endTime":1772266868000.735,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/calculation-service.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单并发保护测试"],"fullName":"报价单并发保护测试 版本号不匹配时应阻断更新 (乐观锁验证)","status":"passed","title":"版本号不匹配时应阻断更新 (乐观锁验证)","duration":9.639400000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单并发保护测试"],"fullName":"报价单并发保护测试 未提供版本号时应跳过检查 (兼容性)","status":"passed","title":"未提供版本号时应跳过检查 (兼容性)","duration":1.7538000000004104,"failureMessages":[],"meta":{}}],"startTime":1772266865422,"endTime":1772266865433.754,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/concurrency-protection.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单端到端业务流程"],"fullName":"报价单端到端业务流程 完成报价单生命周期闭环: 手动创建 -> 提交 -> 审批 -> 转订单","status":"passed","title":"完成报价单生命周期闭环: 手动创建 -> 提交 -> 审批 -> 转订单","duration":7.186800000000403,"failureMessages":[],"meta":{}}],"startTime":1772266868904,"endTime":1772266868911.1868,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/e2e-business-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单异常场景测试"],"fullName":"报价单异常场景测试 操作不存在的报价单应抛出异常","status":"passed","title":"操作不存在的报价单应抛出异常","duration":3.8864999999996144,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单异常场景测试"],"fullName":"报价单异常场景测试 跨租户操作应被拦截","status":"passed","title":"跨租户操作应被拦截","duration":0.7368999999998778,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单异常场景测试"],"fullName":"报价单异常场景测试 草稿状态以外的报价单无法再次提交","status":"passed","title":"草稿状态以外的报价单无法再次提交","duration":0.16679999999996653,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单异常场景测试"],"fullName":"报价单异常场景测试 非法折扣率应校验失败","status":"passed","title":"非法折扣率应校验失败","duration":0.28690000000005966,"failureMessages":[],"meta":{}}],"startTime":1772266872863,"endTime":1772266872868.2869,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/exception-scenarios.test.ts"},{"assertionResults":[{"ancestorTitles":["尺量匹配服务 (Measure Matcher Service)"],"fullName":"尺量匹配服务 (Measure Matcher Service) 精确匹配：房间名完全相同 (Exact room match fallback to NEW if threshold unmet)","status":"passed","title":"精确匹配：房间名完全相同 (Exact room match fallback to NEW if threshold unmet)","duration":4.886700000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["尺量匹配服务 (Measure Matcher Service)"],"fullName":"尺量匹配服务 (Measure Matcher Service) 模糊匹配：房间名包含 (Fuzzy room match)","status":"passed","title":"模糊匹配：房间名包含 (Fuzzy room match)","duration":0.6378999999997177,"failureMessages":[],"meta":{}},{"ancestorTitles":["尺量匹配服务 (Measure Matcher Service)"],"fullName":"尺量匹配服务 (Measure Matcher Service) 无匹配项自动生成新项目 (New generation when no match)","status":"passed","title":"无匹配项自动生成新项目 (New generation when no match)","duration":0.7113999999992302,"failureMessages":[],"meta":{}},{"ancestorTitles":["尺量匹配服务 (Measure Matcher Service)"],"fullName":"尺量匹配服务 (Measure Matcher Service) 防止同一个报价单项目被重复匹配 (Prevent duplicate matching)","status":"passed","title":"防止同一个报价单项目被重复匹配 (Prevent duplicate matching)","duration":1.0275000000001455,"failureMessages":[],"meta":{}}],"startTime":1772266868516,"endTime":1772266868523.0276,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/measure-matcher.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Multi-Category Quoting"],"fullName":"Multi-Category Quoting should allow adding items of different categories to the same quote","status":"skipped","title":"should allow adding items of different categories to the same quote","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/multi-category-quote.test.ts"},{"assertionResults":[{"ancestorTitles":["快捷报价流程 (Quick Quote Flow)"],"fullName":"快捷报价流程 (Quick Quote Flow) 线索不存在时应返回错误 (Return error when lead missing)","status":"passed","title":"线索不存在时应返回错误 (Return error when lead missing)","duration":2.144100000000435,"failureMessages":[],"meta":{}},{"ancestorTitles":["快捷报价流程 (Quick Quote Flow)"],"fullName":"快捷报价流程 (Quick Quote Flow) 缺乏必填参数：套餐类型 (Missing Plan Type)","status":"passed","title":"缺乏必填参数：套餐类型 (Missing Plan Type)","duration":0.4613999999992302,"failureMessages":[],"meta":{}},{"ancestorTitles":["快捷报价流程 (Quick Quote Flow)"],"fullName":"快捷报价流程 (Quick Quote Flow) 成功执行正常报价流程并创建客户 (Success flow with customer creation)","status":"passed","title":"成功执行正常报价流程并创建客户 (Success flow with customer creation)","duration":0.2577999999994063,"failureMessages":[],"meta":{}},{"ancestorTitles":["快捷报价流程 (Quick Quote Flow)"],"fullName":"快捷报价流程 (Quick Quote Flow) 跳过未勾选的配项 (Skip unchecked items like sheer/fabric)","status":"passed","title":"跳过未勾选的配项 (Skip unchecked items like sheer/fabric)","duration":0.8049000000000888,"failureMessages":[],"meta":{}}],"startTime":1772266871407,"endTime":1772266871410.805,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/quick-quote-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["Quick Quote - 编号生成"],"fullName":"Quick Quote - 编号生成 编号格式应为 QQ + 8位时间戳 + UUID 前缀","status":"passed","title":"编号格式应为 QQ + 8位时间戳 + UUID 前缀","duration":3.2156000000004497,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quick Quote - 编号生成"],"fullName":"Quick Quote - 编号生成 两次生成的编号不应重复","status":"passed","title":"两次生成的编号不应重复","duration":2.0372000000006665,"failureMessages":[],"meta":{}}],"startTime":1772266869194,"endTime":1772266869199.037,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/quick-quote.test.ts"},{"assertionResults":[{"ancestorTitles":["createMeasureFromQuote - 验证报价转量尺"],"fullName":"createMeasureFromQuote - 验证报价转量尺 应验证报价单是否存在","status":"passed","title":"应验证报价单是否存在","duration":18.93249999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["createMeasureFromQuote - 验证报价转量尺"],"fullName":"createMeasureFromQuote - 验证报价转量尺 应正确创建测量任务","status":"passed","title":"应正确创建测量任务","duration":3.9229999999997744,"failureMessages":[],"meta":{}}],"startTime":1772266850790,"endTime":1772266850812.923,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/quote-to-measure.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单版本与生命周期服务 (Quote Version & Lifecycle Service)","createNewVersion (创建新版本)"],"fullName":"报价单版本与生命周期服务 (Quote Version & Lifecycle Service) createNewVersion (创建新版本) 当报价单不存在时抛出异常 (Throw error if quote not found)","status":"passed","title":"当报价单不存在时抛出异常 (Throw error if quote not found)","duration":7.21309999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单版本与生命周期服务 (Quote Version & Lifecycle Service)","createNewVersion (创建新版本)"],"fullName":"报价单版本与生命周期服务 (Quote Version & Lifecycle Service) createNewVersion (创建新版本) 成功创建新版本并增加版本号 (Successfully create and increment version)","status":"passed","title":"成功创建新版本并增加版本号 (Successfully create and increment version)","duration":1.887499999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单版本与生命周期服务 (Quote Version & Lifecycle Service)","checkExpirations (过期处理自动化)"],"fullName":"报价单版本与生命周期服务 (Quote Version & Lifecycle Service) checkExpirations (过期处理自动化) 应将超期且状态为PENDING_CUSTOMER的报价单标记为已过期 (Mark expired quotes)","status":"passed","title":"应将超期且状态为PENDING_CUSTOMER的报价单标记为已过期 (Mark expired quotes)","duration":0.7902000000003682,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单版本与生命周期服务 (Quote Version & Lifecycle Service)","activate (设置为主版本)"],"fullName":"报价单版本与生命周期服务 (Quote Version & Lifecycle Service) activate (设置为主版本) 当报价单不存在时抛出异常 (Throw error if quote not found)","status":"passed","title":"当报价单不存在时抛出异常 (Throw error if quote not found)","duration":1.778799999999137,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单版本与生命周期服务 (Quote Version & Lifecycle Service)","activate (设置为主版本)"],"fullName":"报价单版本与生命周期服务 (Quote Version & Lifecycle Service) activate (设置为主版本) 应成功激活报价单并降级同家族所有版本 (Successfully activate)","status":"passed","title":"应成功激活报价单并降级同家族所有版本 (Successfully activate)","duration":2.223599999999351,"failureMessages":[],"meta":{}}],"startTime":1772266859154,"endTime":1772266859169.2236,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/quote-version.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Discount Risk Control"],"fullName":"Discount Risk Control should pass valid quote","status":"passed","title":"should pass valid quote","duration":5.45299999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["Discount Risk Control"],"fullName":"Discount Risk Control should detect high discount (Soft Stop)","status":"passed","title":"should detect high discount (Soft Stop)","duration":1.4512999999997191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Discount Risk Control"],"fullName":"Discount Risk Control should detect low margin (Soft Stop)","status":"passed","title":"should detect low margin (Soft Stop)","duration":1.0554999999994834,"failureMessages":[],"meta":{}},{"ancestorTitles":["Discount Risk Control"],"fullName":"Discount Risk Control should block negative margin (Hard Stop)","status":"passed","title":"should block negative margin (Hard Stop)","duration":1.254800000000614,"failureMessages":[],"meta":{}}],"startTime":1772266867048,"endTime":1772266867057.255,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/risk-control.test.ts"},{"assertionResults":[{"ancestorTitles":["Version Management with Bundles"],"fullName":"Version Management with Bundles should maintain bundleId when creating a new version","status":"skipped","title":"should maintain bundleId when creating a new version","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/version-bundle.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Version Flow Integration"],"fullName":"Quote Version Flow Integration should set version to ACTIVE and demote others to DRAFT","status":"passed","title":"should set version to ACTIVE and demote others to DRAFT","duration":8.131199999999808,"failureMessages":[],"meta":{}}],"startTime":1772266869376,"endTime":1772266869384.131,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/version-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Lifecycle Workflow"],"fullName":"Quote Lifecycle Workflow submit should trigger risk check","status":"passed","title":"submit should trigger risk check","duration":1.358900000000176,"failureMessages":[],"meta":{}}],"startTime":1772266870956,"endTime":1772266870957.359,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/workflow.test.ts"},{"assertionResults":[{"ancestorTitles":["Mock Actions"],"fullName":"Mock Actions should pass","status":"passed","title":"should pass","duration":1.996900000000096,"failureMessages":[],"meta":{}}],"startTime":1772266870983,"endTime":1772266870984.9968,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Bundle Server Actions","getBundles"],"fullName":"Bundle Server Actions getBundles 成功获取组合商品列表","status":"passed","title":"成功获取组合商品列表","duration":5.44800000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","getBundles"],"fullName":"Bundle Server Actions getBundles 未授权时报错","status":"passed","title":"未授权时报错","duration":11.267799999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","getBundleById"],"fullName":"Bundle Server Actions getBundleById 成功获取详情和明细","status":"passed","title":"成功获取详情和明细","duration":1.8747999999995955,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","getBundleById"],"fullName":"Bundle Server Actions getBundleById 组合不存在时报错","status":"passed","title":"组合不存在时报错","duration":1.1790000000000873,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","createBundle"],"fullName":"Bundle Server Actions createBundle 成功创建","status":"passed","title":"成功创建","duration":5.842500000000655,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","updateBundle"],"fullName":"Bundle Server Actions updateBundle 成功更新","status":"passed","title":"成功更新","duration":3.0646999999999025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","deleteBundle"],"fullName":"Bundle Server Actions deleteBundle 成功级联删除","status":"passed","title":"成功级联删除","duration":1.026400000000649,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","updateBundleItems"],"fullName":"Bundle Server Actions updateBundleItems 成功批量更新明细","status":"passed","title":"成功批量更新明细","duration":1.768699999999626,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bundle Server Actions","calculateBundleCost"],"fullName":"Bundle Server Actions calculateBundleCost 成功计算组合成本与建议售价","status":"passed","title":"成功计算组合成本与建议售价","duration":1.331000000000131,"failureMessages":[],"meta":{}}],"startTime":1772266840220,"endTime":1772266840255.331,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/bundle-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Channel Discount Actions","getGlobalDiscountConfig"],"fullName":"Channel Discount Actions getGlobalDiscountConfig 成功获取全局配置","status":"passed","title":"成功获取全局配置","duration":4.550600000000486,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","getGlobalDiscountConfig"],"fullName":"Channel Discount Actions getGlobalDiscountConfig 未找到租户时报错","status":"passed","title":"未找到租户时报错","duration":0.9565000000002328,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","updateGlobalDiscountConfig"],"fullName":"Channel Discount Actions updateGlobalDiscountConfig 成功更新全局配置","status":"passed","title":"成功更新全局配置","duration":383.7727999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","getDiscountOverrides"],"fullName":"Channel Discount Actions getDiscountOverrides 成功获取覆盖规则","status":"passed","title":"成功获取覆盖规则","duration":1.611399999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","createDiscountOverride"],"fullName":"Channel Discount Actions createDiscountOverride 成功创建","status":"passed","title":"成功创建","duration":2.8320999999996275,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","createDiscountOverride"],"fullName":"Channel Discount Actions createDiscountOverride 规则已存在时报错","status":"passed","title":"规则已存在时报错","duration":0.6659999999992579,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","updateDiscountOverride"],"fullName":"Channel Discount Actions updateDiscountOverride 成功更新","status":"passed","title":"成功更新","duration":1.1661999999996624,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","deleteDiscountOverride"],"fullName":"Channel Discount Actions deleteDiscountOverride 成功删除","status":"passed","title":"成功删除","duration":0.9481999999989057,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","getProductDiscountRate"],"fullName":"Channel Discount Actions getProductDiscountRate 优先使用商品级覆盖折扣","status":"passed","title":"优先使用商品级覆盖折扣","duration":1.2273000000004686,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","getProductDiscountRate"],"fullName":"Channel Discount Actions getProductDiscountRate 无商品级但有品类级覆盖折扣","status":"passed","title":"无商品级但有品类级覆盖折扣","duration":0.6583999999984371,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Discount Actions","getProductDiscountRate"],"fullName":"Channel Discount Actions getProductDiscountRate 无任何覆盖时使用全局默认折扣","status":"passed","title":"无任何覆盖时使用全局默认折扣","duration":0.5425999999988562,"failureMessages":[],"meta":{}}],"startTime":1772266819162,"endTime":1772266819563.5425,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/channel-discount-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Channel Price Actions","getChannelPrices"],"fullName":"Channel Price Actions getChannelPrices 成功获取专属价列表","status":"passed","title":"成功获取专属价列表","duration":5.823600000001534,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getChannelPrices"],"fullName":"Channel Price Actions getChannelPrices 未授权报错","status":"passed","title":"未授权报错","duration":11.407700000001569,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getAllChannelPrices"],"fullName":"Channel Price Actions getAllChannelPrices 成功获取所有专属价","status":"passed","title":"成功获取所有专属价","duration":1.5918999999994412,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","addChannelPrice"],"fullName":"Channel Price Actions addChannelPrice 成功添加","status":"passed","title":"成功添加","duration":270.1831000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","addChannelPrice"],"fullName":"Channel Price Actions addChannelPrice 渠道已存在专属价时拦截","status":"passed","title":"渠道已存在专属价时拦截","duration":1.4827000000004773,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","updateChannelPrice"],"fullName":"Channel Price Actions updateChannelPrice 成功更新","status":"passed","title":"成功更新","duration":1.8080000000009022,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","removeChannelPrice"],"fullName":"Channel Price Actions removeChannelPrice 成功删除","status":"passed","title":"成功删除","duration":1.246499999999287,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getProductPriceForChannel"],"fullName":"Channel Price Actions getProductPriceForChannel 未传channelId时返回零售价","status":"passed","title":"未传channelId时返回零售价","duration":1.2748000000010506,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getProductPriceForChannel"],"fullName":"Channel Price Actions getProductPriceForChannel 存在特殊专属价时返回专属价","status":"passed","title":"存在特殊专属价时返回专属价","duration":1.1543000000001484,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getProductPriceForChannel"],"fullName":"Channel Price Actions getProductPriceForChannel 无专属价，为 DISCOUNT 模式时计算并返回折扣价","status":"passed","title":"无专属价，为 DISCOUNT 模式时计算并返回折扣价","duration":0.9569999999985157,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Price Actions","getProductPriceForChannel"],"fullName":"Channel Price Actions getProductPriceForChannel 无专属价，为 FIXED 模式时返回渠道价","status":"passed","title":"无专属价，为 FIXED 模式时返回渠道价","duration":0.7154999999984284,"failureMessages":[],"meta":{}}],"startTime":1772266820446,"endTime":1772266820745.7156,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/channel-price-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Product Suppliers Mutations & Queries","getProductSuppliers"],"fullName":"Product Suppliers Mutations & Queries getProductSuppliers 成功获取产品的供应商列表","status":"passed","title":"成功获取产品的供应商列表","duration":7.790800000000672,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","addProductSupplier"],"fullName":"Product Suppliers Mutations & Queries addProductSupplier 成功添加供应商关联","status":"passed","title":"成功添加供应商关联","duration":79.90970000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","addProductSupplier"],"fullName":"Product Suppliers Mutations & Queries addProductSupplier 关联已存在时返回错误","status":"passed","title":"关联已存在时返回错误","duration":111.22500000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","updateProductSupplier"],"fullName":"Product Suppliers Mutations & Queries updateProductSupplier 成功更新供应商关联","status":"passed","title":"成功更新供应商关联","duration":3.300600000000486,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","updateProductSupplier"],"fullName":"Product Suppliers Mutations & Queries updateProductSupplier 记录不存在时报错","status":"passed","title":"记录不存在时报错","duration":2.925199999999677,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","removeProductSupplier"],"fullName":"Product Suppliers Mutations & Queries removeProductSupplier 成功移除关联","status":"passed","title":"成功移除关联","duration":1.8158999999996013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","compareSupplierPrices"],"fullName":"Product Suppliers Mutations & Queries compareSupplierPrices 成功比较并返回推荐","status":"passed","title":"成功比较并返回推荐","duration":2.499200000000201,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","compareSupplierPrices"],"fullName":"Product Suppliers Mutations & Queries compareSupplierPrices 当不足2个供应商时提示无需比较","status":"passed","title":"当不足2个供应商时提示无需比较","duration":1.25130000000172,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","autoSwitchDefaultSupplier"],"fullName":"Product Suppliers Mutations & Queries autoSwitchDefaultSupplier 根据最低价策略自动切换","status":"passed","title":"根据最低价策略自动切换","duration":2.882399999998597,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Suppliers Mutations & Queries","autoSwitchDefaultSupplier"],"fullName":"Product Suppliers Mutations & Queries autoSwitchDefaultSupplier 当前已是最优则不切换","status":"passed","title":"当前已是最优则不切换","duration":1.3384000000005472,"failureMessages":[],"meta":{}}],"startTime":1772266822188,"endTime":1772266822405.3384,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/manage-suppliers.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"[vitest] No \"productTypeEnum\" export is defined on the \"@/shared/api/schema/enums\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/mutations.test.ts"},{"assertionResults":[{"ancestorTitles":["Package Server Actions","getPackages"],"fullName":"Package Server Actions getPackages 成功获取套餐列表","status":"passed","title":"成功获取套餐列表","duration":5.488999999999578,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","getPackages"],"fullName":"Package Server Actions getPackages 未授权时报错","status":"passed","title":"未授权时报错","duration":12.26260000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","getPackageById"],"fullName":"Package Server Actions getPackageById 成功获取详情和明细","status":"passed","title":"成功获取详情和明细","duration":2.4351000000006024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","getPackageById"],"fullName":"Package Server Actions getPackageById 套餐不存在时报错","status":"passed","title":"套餐不存在时报错","duration":1.197200000000521,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","createPackage"],"fullName":"Package Server Actions createPackage 成功创建","status":"passed","title":"成功创建","duration":172.20130000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","updatePackage"],"fullName":"Package Server Actions updatePackage 成功更新","status":"passed","title":"成功更新","duration":4.370100000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","deletePackage"],"fullName":"Package Server Actions deletePackage 成功级联删除","status":"passed","title":"成功级联删除","duration":1.510599999999613,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","togglePackageStatus"],"fullName":"Package Server Actions togglePackageStatus 成功切换状态","status":"passed","title":"成功切换状态","duration":1.386400000001231,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","getPackageProducts"],"fullName":"Package Server Actions getPackageProducts 成功获取套餐商品","status":"passed","title":"成功获取套餐商品","duration":1.489400000000387,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","addPackageProduct"],"fullName":"Package Server Actions addPackageProduct 成功添加商品到套餐","status":"passed","title":"成功添加商品到套餐","duration":2.2344000000011874,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","removePackageProduct"],"fullName":"Package Server Actions removePackageProduct 成功移除套餐商品","status":"passed","title":"成功移除套餐商品","duration":0.9585000000006403,"failureMessages":[],"meta":{}},{"ancestorTitles":["Package Server Actions","calculatePackagePrice"],"fullName":"Package Server Actions calculatePackagePrice 成功计算套餐价格和超出价格","status":"passed","title":"成功计算套餐价格和超出价格","duration":1.454200000000128,"failureMessages":[],"meta":{}}],"startTime":1772266821157,"endTime":1772266821367.454,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/package-actions.test.ts"},{"assertionResults":[],"startTime":1772266786446,"endTime":1772266786446,"status":"failed","message":"[vitest] No \"productTypeEnum\" export is defined on the \"@/shared/api/schema/enums\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Attribute Templates Actions","upsertAttributeTemplate"],"fullName":"Attribute Templates Actions upsertAttributeTemplate 记录不存在时进行 Insert 操作","status":"passed","title":"记录不存在时进行 Insert 操作","duration":13.094100000000253,"failureMessages":[],"meta":{}},{"ancestorTitles":["Attribute Templates Actions","upsertAttributeTemplate"],"fullName":"Attribute Templates Actions upsertAttributeTemplate 记录存在时进行 Update 操作","status":"passed","title":"记录存在时进行 Update 操作","duration":1.4848999999994703,"failureMessages":[],"meta":{}},{"ancestorTitles":["Attribute Templates Actions","upsertAttributeTemplate"],"fullName":"Attribute Templates Actions upsertAttributeTemplate Schema 字段格式错误时抛异常","status":"passed","title":"Schema 字段格式错误时抛异常","duration":8.34979999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Attribute Templates Actions","getAttributeTemplate"],"fullName":"Attribute Templates Actions getAttributeTemplate 获取存在的模板","status":"passed","title":"获取存在的模板","duration":1.7321000000001732,"failureMessages":[],"meta":{}},{"ancestorTitles":["Attribute Templates Actions","getAttributeTemplate"],"fullName":"Attribute Templates Actions getAttributeTemplate 获取不存在的模板时返回空 Schema","status":"passed","title":"获取不存在的模板时返回空 Schema","duration":0.9875999999994747,"failureMessages":[],"meta":{}},{"ancestorTitles":["Attribute Templates Actions","getAttributeTemplate"],"fullName":"Attribute Templates Actions getAttributeTemplate 未登录查模板时报错","status":"passed","title":"未登录查模板时报错","duration":0.49830000000019936,"failureMessages":[],"meta":{}}],"startTime":1772266841568,"endTime":1772266841594.4983,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/products/__tests__/templates.test.ts"},{"assertionResults":[{"ancestorTitles":["Sales 模块安全测试","getSalesDashboardStats"],"fullName":"Sales 模块安全测试 getSalesDashboardStats 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":4.559900000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块安全测试","getSalesDashboardStats"],"fullName":"Sales 模块安全测试 getSalesDashboardStats 已登录应返回仪表盘数据","status":"passed","title":"已登录应返回仪表盘数据","duration":5.810300000001007,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块安全测试","getSalesTargets"],"fullName":"Sales 模块安全测试 getSalesTargets 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":184.89509999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块安全测试","updateSalesTarget"],"fullName":"Sales 模块安全测试 updateSalesTarget 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":2.0636999999987893,"failureMessages":[],"meta":{}}],"startTime":1772266822461,"endTime":1772266822661.0637,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/sales/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Sales 模块测试","getSalesTargets"],"fullName":"Sales 模块测试 getSalesTargets 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":4.349099999999453,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesTargets"],"fullName":"Sales 模块测试 getSalesTargets 已登录应返回空销售目标列表","status":"passed","title":"已登录应返回空销售目标列表","duration":6.315399999999499,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesTargets"],"fullName":"Sales 模块测试 getSalesTargets Zod 校验：年份超出范围时应返回错误","status":"passed","title":"Zod 校验：年份超出范围时应返回错误","duration":2.02429999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesTargets"],"fullName":"Sales 模块测试 getSalesTargets Zod 校验：月份超出范围时应返回错误","status":"passed","title":"Zod 校验：月份超出范围时应返回错误","duration":2.785300000001371,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesTargets"],"fullName":"Sales 模块测试 getSalesTargets Zod 校验：月份为 0 时应返回错误","status":"passed","title":"Zod 校验：月份为 0 时应返回错误","duration":1.1934000000001106,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.305899999999383,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget sales 角色（非管理员）应被拒绝","status":"passed","title":"sales 角色（非管理员）应被拒绝","duration":2.669100000000981,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget 普通员工角色应被拒绝","status":"passed","title":"普通员工角色应被拒绝","duration":0.9207999999998719,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget admin 角色应成功更新目标","status":"passed","title":"admin 角色应成功更新目标","duration":2.2404999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget manager 角色应成功更新目标","status":"passed","title":"manager 角色应成功更新目标","duration":1.3867000000009284,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget BOSS 角色应成功更新目标","status":"passed","title":"BOSS 角色应成功更新目标","duration":0.9888000000009924,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget 新建目标时 AuditService.log 应以 CREATE 被调用","status":"passed","title":"新建目标时 AuditService.log 应以 CREATE 被调用","duration":6.266399999998612,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget 更新已有目标时 AuditService.log 应以 UPDATE 被调用，且包含 oldValues","status":"passed","title":"更新已有目标时 AuditService.log 应以 UPDATE 被调用，且包含 oldValues","duration":3.222200000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget Zod 校验：负金额应返回错误","status":"passed","title":"Zod 校验：负金额应返回错误","duration":1.1213999999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","updateSalesTarget"],"fullName":"Sales 模块测试 updateSalesTarget Zod 校验：userId 为空字符串应返回错误","status":"passed","title":"Zod 校验：userId 为空字符串应返回错误","duration":1.1975000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.2252000000007683,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget Zod 校验：adjustmentAmount 为 0 应返回错误","status":"passed","title":"Zod 校验：adjustmentAmount 为 0 应返回错误","duration":1.9432999999989988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget Zod 校验：reason 少于 5 个字符应返回错误","status":"passed","title":"Zod 校验：reason 少于 5 个字符应返回错误","duration":0.8189000000002125,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget 非管理层角色应被拒绝","status":"passed","title":"非管理层角色应被拒绝","duration":0.6388000000006286,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget 旧目标不存在应返回 Target not found 错误","status":"passed","title":"旧目标不存在应返回 Target not found 错误","duration":0.7551000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","adjustSalesTarget"],"fullName":"Sales 模块测试 adjustSalesTarget 成功调整目标并调用 AuditService.log","status":"passed","title":"成功调整目标并调用 AuditService.log","duration":3.026799999999639,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","confirmSalesTarget"],"fullName":"Sales 模块测试 confirmSalesTarget 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.2592999999997119,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","confirmSalesTarget"],"fullName":"Sales 模块测试 confirmSalesTarget Zod 校验：userId 为无效 uuid","status":"passed","title":"Zod 校验：userId 为无效 uuid","duration":2.1507000000001426,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","confirmSalesTarget"],"fullName":"Sales 模块测试 confirmSalesTarget 普通员工缺少权限应被拒绝","status":"passed","title":"普通员工缺少权限应被拒绝","duration":0.8923000000013417,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","confirmSalesTarget"],"fullName":"Sales 模块测试 confirmSalesTarget 目标不存在应返回 Target not found 错误","status":"passed","title":"目标不存在应返回 Target not found 错误","duration":1.1718000000000757,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","confirmSalesTarget"],"fullName":"Sales 模块测试 confirmSalesTarget 成功确认目标并设置 updatedAt，并调用 AuditService.log","status":"passed","title":"成功确认目标并设置 updatedAt，并调用 AuditService.log","duration":2.861800000000585,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getMySalesTarget"],"fullName":"Sales 模块测试 getMySalesTarget 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":0.8600999999998749,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getMySalesTarget"],"fullName":"Sales 模块测试 getMySalesTarget 已登录应返回当月目标金额","status":"passed","title":"已登录应返回当月目标金额","duration":1.1076000000011845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getMySalesTarget"],"fullName":"Sales 模块测试 getMySalesTarget 无目标时返回 0","status":"passed","title":"无目标时返回 0","duration":0.6625999999996566,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getMySalesTarget"],"fullName":"Sales 模块测试 getMySalesTarget Zod 校验：月份超出范围应返回错误","status":"passed","title":"Zod 校验：月份超出范围应返回错误","duration":0.7930999999989581,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":1.0043000000005122,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats teamId 缺失时应返回 Unauthorized","status":"passed","title":"teamId 缺失时应返回 Unauthorized","duration":0.7208000000009633,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats BOSS 角色应返回团队视图数据（包含 target/stats 字段）","status":"passed","title":"BOSS 角色应返回团队视图数据（包含 target/stats 字段）","duration":28.459499999999025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats sales 角色应返回个人视图数据","status":"passed","title":"sales 角色应返回个人视图数据","duration":2.646200000001045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats tenantId 隔离：租户 A 登录不应返回 Unauthorized（被允许访问本租户数据）","status":"passed","title":"tenantId 隔离：租户 A 登录不应返回 Unauthorized（被允许访问本租户数据）","duration":1.6911000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats tenantId 隔离：租户 B 的会话应使用 tenantId B 过滤数据（不混入租户 A 数据）","status":"passed","title":"tenantId 隔离：租户 B 的会话应使用 tenantId B 过滤数据（不混入租户 A 数据）","duration":1.397399999999834,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales 模块测试","getSalesDashboardStats"],"fullName":"Sales 模块测试 getSalesDashboardStats 完成率超过 100% 时应截断为 100","status":"passed","title":"完成率超过 100% 时应截断为 100","duration":1.2527000000009139,"failureMessages":[],"meta":{}}],"startTime":1772266828633,"endTime":1772266828731.2527,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/sales/__tests__/sales-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","Auth与鉴权保护"],"fullName":"Search 模块 L5 升级测试 (globalSearch) Auth与鉴权保护 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":4.1599999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","Auth与鉴权保护"],"fullName":"Search 模块 L5 升级测试 (globalSearch) Auth与鉴权保护 关键词超长触发 Zod 校验失败","status":"passed","title":"关键词超长触发 Zod 校验失败","duration":4.317399999999907,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：历史记录、与空查询"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：历史记录、与空查询 空关键词返回搜索历史 (history) 且不触发 db","status":"passed","title":"空关键词返回搜索历史 (history) 且不触发 db","duration":3.772100000000137,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 带关键词搜索时触发数据库查询并记录历史，tenantId 正确隔离","status":"passed","title":"带关键词搜索时触发数据库查询并记录历史，tenantId 正确隔离","duration":6.626200000000608,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 限制 limit 参数正确生效","status":"passed","title":"限制 limit 参数正确生效","duration":4.600800000000163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 空结果测试：数据库未命中任何数据时应返回空数组结构","status":"passed","title":"空结果测试：数据库未命中任何数据时应返回空数组结构","duration":1.997799999999188,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 特殊字符注入测试：带正则特殊字符的搜索应正常工作不应抛出异常","status":"passed","title":"特殊字符注入测试：带正则特殊字符的搜索应正常工作不应抛出异常","duration":1.5958000000009633,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 Redis 降级测试：当 Redis 客户端抛异常或不存在时，必须静默降级且不影响数据库搜索响应","status":"passed","title":"Redis 降级测试：当 Redis 客户端抛异常或不存在时，必须静默降级且不影响数据库搜索响应","duration":1.4877999999989697,"failureMessages":[],"meta":{}},{"ancestorTitles":["Search 模块 L5 升级测试 (globalSearch)","功能特性：实际搜索、高亮、租户隔离与范围控制"],"fullName":"Search 模块 L5 升级测试 (globalSearch) 功能特性：实际搜索、高亮、租户隔离与范围控制 安全过滤测试：Zod 应过滤掉 % 和 _ 等 SQL 通配符","status":"passed","title":"安全过滤测试：Zod 应过滤掉 % 和 _ 等 SQL 通配符","duration":1.8894000000000233,"failureMessages":[],"meta":{}}],"startTime":1772266827642,"endTime":1772266827673.8894,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/search/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Service Feature - Install Actions","getInstallers"],"fullName":"Service Feature - Install Actions getInstallers should retrieve installers for the current tenant","status":"passed","title":"should retrieve installers for the current tenant","duration":5.938200000000506,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Install Actions","getInstallers"],"fullName":"Service Feature - Install Actions getInstallers should handle errors gracefully","status":"passed","title":"should handle errors gracefully","duration":1.3375999999998385,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Install Actions","dispatchInstallTask"],"fullName":"Service Feature - Install Actions dispatchInstallTask should dispatch an install task and update status","status":"passed","title":"should dispatch an install task and update status","duration":6.408300000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Install Actions","dispatchInstallTask"],"fullName":"Service Feature - Install Actions dispatchInstallTask should reject if permission check fails","status":"passed","title":"should reject if permission check fails","duration":1.2646000000004278,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Install Actions","dispatchInstallTask"],"fullName":"Service Feature - Install Actions dispatchInstallTask should reject if assigned worker is strictly not found or unavailable","status":"passed","title":"should reject if assigned worker is strictly not found or unavailable","duration":1.4368999999996959,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Install Actions","getInstallTasks"],"fullName":"Service Feature - Install Actions getInstallTasks should return install tasks with filters","status":"passed","title":"should return install tasks with filters","duration":1.0387999999993554,"failureMessages":[],"meta":{}}],"startTime":1772266851220,"endTime":1772266851238.0388,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/__tests__/install-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端 API 审计日志"],"fullName":"移动端 API 审计日志 任务完工应记录 COMPLETE_MOBILE 审计日志","status":"passed","title":"任务完工应记录 COMPLETE_MOBILE 审计日志","duration":1288.9649000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 API 审计日志"],"fullName":"移动端 API 审计日志 安装签到应记录 INSTALL_CHECK_IN_MOBILE 审计日志","status":"passed","title":"安装签到应记录 INSTALL_CHECK_IN_MOBILE 审计日志","duration":4.86160000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 API 审计日志"],"fullName":"移动端 API 审计日志 安装完工应记录 INSTALL_COMPLETE_MOBILE 审计日志","status":"passed","title":"安装完工应记录 INSTALL_COMPLETE_MOBILE 审计日志","duration":6.148600000000442,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 API 审计日志"],"fullName":"移动端 API 审计日志 测量任务接单应记录 ACCEPT_TASK_MOBILE 审计日志","status":"passed","title":"测量任务接单应记录 ACCEPT_TASK_MOBILE 审计日志","duration":4.91150000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 API 审计日志"],"fullName":"移动端 API 审计日志 安装任务拒单应记录 REJECT_TASK_MOBILE 审计日志","status":"passed","title":"安装任务拒单应记录 REJECT_TASK_MOBILE 审计日志","duration":4.617599999999584,"failureMessages":[],"meta":{}}],"startTime":1772266813205,"endTime":1772266814515.6177,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/__tests__/mobile-audit.test.ts"},{"assertionResults":[{"ancestorTitles":["Service Feature - Task Split Actions","suggestTaskSplit"],"fullName":"Service Feature - Task Split Actions suggestTaskSplit should return empty data if no items found","status":"passed","title":"should return empty data if no items found","duration":6.376699999999801,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Task Split Actions","suggestTaskSplit"],"fullName":"Service Feature - Task Split Actions suggestTaskSplit should correctly map categories to skills and return suggestions","status":"passed","title":"should correctly map categories to skills and return suggestions","duration":3.9395999999997002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Task Split Actions","suggestTaskSplit"],"fullName":"Service Feature - Task Split Actions suggestTaskSplit 应当在传回的所有商品可拆数量均为空或不规范时返回边界拦截失败","status":"passed","title":"应当在传回的所有商品可拆数量均为空或不规范时返回边界拦截失败","duration":1.3735999999998967,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Task Split Actions","updateWorkerSkills"],"fullName":"Service Feature - Task Split Actions updateWorkerSkills should execute delete and batch insert correctly","status":"passed","title":"should execute delete and batch insert correctly","duration":3.8771999999999025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Task Split Actions","getWorkerSkills"],"fullName":"Service Feature - Task Split Actions getWorkerSkills should retrieve worker skills mapping correctly","status":"passed","title":"should retrieve worker skills mapping correctly","duration":1.2390999999997803,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Task Split Actions","getAvailableWorkers"],"fullName":"Service Feature - Task Split Actions getAvailableWorkers should retrieve workers list matching the specific skill","status":"passed","title":"should retrieve workers list matching the specific skill","duration":1.031699999999546,"failureMessages":[],"meta":{}}],"startTime":1772266858006,"endTime":1772266858025.0317,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/__tests__/task-split-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Service Feature - Ticket Actions","getServiceTickets"],"fullName":"Service Feature - Ticket Actions getServiceTickets 应当使用正确的分页和搜索参数获取工单列表","status":"passed","title":"应当使用正确的分页和搜索参数获取工单列表","duration":10.594600000000355,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Ticket Actions","getServiceTickets"],"fullName":"Service Feature - Ticket Actions getServiceTickets 应当在数据库错误时返回空列表","status":"passed","title":"应当在数据库错误时返回空列表","duration":3.7674999999999272,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Ticket Actions","updateTicketStatus"],"fullName":"Service Feature - Ticket Actions updateTicketStatus 应当成功更新工单状态","status":"passed","title":"应当成功更新工单状态","duration":2.710800000000745,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Ticket Actions","updateTicketStatus"],"fullName":"Service Feature - Ticket Actions updateTicketStatus 应当在权限检查失败时抛出异常（checkPermission 在 try/catch 之外）","status":"passed","title":"应当在权限检查失败时抛出异常（checkPermission 在 try/catch 之外）","duration":4.377700000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Service Feature - Ticket Actions","updateTicketStatus"],"fullName":"Service Feature - Ticket Actions updateTicketStatus 应当拦截对已关闭工单的再次状态流转操作","status":"passed","title":"应当拦截对已关闭工单的再次状态流转操作","duration":1.5807000000004336,"failureMessages":[],"meta":{}}],"startTime":1772266853707,"endTime":1772266853730.5808,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/__tests__/ticket-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Audit Logs Actions","getAuditLogsAction"],"fullName":"Audit Logs Actions getAuditLogsAction should return paginated audit logs successfully","status":"passed","title":"should return paginated audit logs successfully","duration":9.183899999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Logs Actions","getAuditLogsAction"],"fullName":"Audit Logs Actions getAuditLogsAction should apply filters to the query","status":"passed","title":"should apply filters to the query","duration":1.9272000000000844,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Logs Actions","getAuditLogsAction"],"fullName":"Audit Logs Actions getAuditLogsAction should handle unauthenticated user","status":"passed","title":"should handle unauthenticated user","duration":0.5741000000007261,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Logs Actions","getAuditLogsAction"],"fullName":"Audit Logs Actions getAuditLogsAction should enforce permission check","status":"passed","title":"should enforce permission check","duration":9.027399999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Logs Actions","getAuditTableNamesAction"],"fullName":"Audit Logs Actions getAuditTableNamesAction should return distinct table names","status":"passed","title":"should return distinct table names","duration":3.1705999999994674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Logs Actions","getAuditTableNamesAction"],"fullName":"Audit Logs Actions getAuditTableNamesAction should enforce permission check","status":"passed","title":"should enforce permission check","duration":1.7878000000000611,"failureMessages":[],"meta":{}}],"startTime":1772266847864,"endTime":1772266847890.7878,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/audit-logs.test.ts"},{"assertionResults":[{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","getChannelCategories"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete getChannelCategories 应该返回所有顶级渠道分类","status":"passed","title":"应该返回所有顶级渠道分类","duration":6.916500000001179,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","getChannels"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete getChannels 应该返回当前租户的渠道列表","status":"passed","title":"应该返回当前租户的渠道列表","duration":1.9976000000006024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","createChannel"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete createChannel 有效数据应成功创建渠道","status":"passed","title":"有效数据应成功创建渠道","duration":4.724299999999857,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","createChannel"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete createChannel 无权限应返回错误","status":"passed","title":"无权限应返回错误","duration":1.7899999999990541,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","deleteChannel"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete deleteChannel 存在子渠道时应禁止删除","status":"passed","title":"存在子渠道时应禁止删除","duration":2.1643999999996595,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","deleteChannel"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete deleteChannel 无子渠道且存在时应成功删除","status":"passed","title":"无子渠道且存在时应成功删除","duration":5.139599999998609,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Actions - Task 4: Channel CRUD & Cascade Delete","deleteChannel"],"fullName":"Channel Actions - Task 4: Channel CRUD & Cascade Delete deleteChannel 渠道不存在时应返回错误","status":"passed","title":"渠道不存在时应返回错误","duration":0.9585999999999331,"failureMessages":[],"meta":{}}],"startTime":1772266843902,"endTime":1772266843926.9585,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/channel-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Invite Actions","createEmployeeInviteLink"],"fullName":"Invite Actions createEmployeeInviteLink should create link successfully","status":"passed","title":"should create link successfully","duration":4.173500000000786,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createEmployeeInviteLink"],"fullName":"Invite Actions createEmployeeInviteLink should handle unauthenticated session","status":"passed","title":"should handle unauthenticated session","duration":0.7173000000002503,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createEmployeeInviteLink"],"fullName":"Invite Actions createEmployeeInviteLink should handle unauthorized user","status":"passed","title":"should handle unauthorized user","duration":0.8986999999997352,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createEmployeeInviteLink"],"fullName":"Invite Actions createEmployeeInviteLink should handle link generation error","status":"passed","title":"should handle link generation error","duration":9.412199999999757,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createCustomerInviteLink"],"fullName":"Invite Actions createCustomerInviteLink should create link successfully","status":"passed","title":"should create link successfully","duration":1.040100000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createCustomerInviteLink"],"fullName":"Invite Actions createCustomerInviteLink should handle unauthenticated session","status":"passed","title":"should handle unauthenticated session","duration":0.41600000000016735,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","createCustomerInviteLink"],"fullName":"Invite Actions createCustomerInviteLink should handle link generation error","status":"passed","title":"should handle link generation error","duration":1.7224999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","validateInviteToken"],"fullName":"Invite Actions validateInviteToken should validate correctly","status":"passed","title":"should validate correctly","duration":1.808799999999792,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","validateInviteToken"],"fullName":"Invite Actions validateInviteToken should handle verification failure","status":"passed","title":"should handle verification failure","duration":1.0018999999992957,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","registerEmployee"],"fullName":"Invite Actions registerEmployee should register successfully","status":"passed","title":"should register successfully","duration":4.578599999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","registerEmployee"],"fullName":"Invite Actions registerEmployee should handle validation error","status":"passed","title":"should handle validation error","duration":1.6594999999997526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","registerCustomer"],"fullName":"Invite Actions registerCustomer should register sequence correctly","status":"passed","title":"should register sequence correctly","duration":0.9284000000006927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Invite Actions","registerCustomer"],"fullName":"Invite Actions registerCustomer should handle schema validation error","status":"passed","title":"should handle schema validation error","duration":0.6622999999999593,"failureMessages":[],"meta":{}}],"startTime":1772266835758,"endTime":1772266835788.6624,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/invite.test.ts"},{"assertionResults":[{"ancestorTitles":["PreferenceActions","getUserPreferences"],"fullName":"PreferenceActions getUserPreferences 应成功获取用户偏好","status":"passed","title":"应成功获取用户偏好","duration":4.979000000000269,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","getUserPreferences"],"fullName":"PreferenceActions getUserPreferences 当用户无偏好时应返回默认值","status":"passed","title":"当用户无偏好时应返回默认值","duration":0.6967999999997119,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","getUserPreferences"],"fullName":"PreferenceActions getUserPreferences 未登录时应返回默认值","status":"passed","title":"未登录时应返回默认值","duration":0.6703000000006796,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","getUserPreferences"],"fullName":"PreferenceActions getUserPreferences DB 查询异常时应返回默认值并记录错误","status":"passed","title":"DB 查询异常时应返回默认值并记录错误","duration":2.3011999999998807,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","updateUserPreferences"],"fullName":"PreferenceActions updateUserPreferences 应成功更新用户偏好并记录审计","status":"passed","title":"应成功更新用户偏好并记录审计","duration":8.436299999999392,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","updateUserPreferences"],"fullName":"PreferenceActions updateUserPreferences 未登录时应返回未授权错误","status":"passed","title":"未登录时应返回未授权错误","duration":0.8858999999993102,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","updateUserPreferences"],"fullName":"PreferenceActions updateUserPreferences 输入参数格式错误应被 Zod 拦截","status":"passed","title":"输入参数格式错误应被 Zod 拦截","duration":1.9005999999999403,"failureMessages":[],"meta":{}},{"ancestorTitles":["PreferenceActions","updateUserPreferences"],"fullName":"PreferenceActions updateUserPreferences 更新失败时应返回错误信息","status":"passed","title":"更新失败时应返回错误信息","duration":0.7494999999998981,"failureMessages":[],"meta":{}}],"startTime":1772266850968,"endTime":1772266850989.7495,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/preference-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["ProfileActions","updateProfile"],"fullName":"ProfileActions updateProfile 应成功更新个人信息并记录审计","status":"passed","title":"应成功更新个人信息并记录审计","duration":11.29189999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","updateProfile"],"fullName":"ProfileActions updateProfile 手机号冲突时应返回错误","status":"passed","title":"手机号冲突时应返回错误","duration":1.4241999999994732,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","updateProfile"],"fullName":"ProfileActions updateProfile 未登录时应被拦截","status":"passed","title":"未登录时应被拦截","duration":0.8398999999999432,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","changePassword"],"fullName":"ProfileActions changePassword 应成功修改密码","status":"passed","title":"应成功修改密码","duration":2.9534999999996217,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","changePassword"],"fullName":"ProfileActions changePassword 旧密码错误时应返回错误","status":"passed","title":"旧密码错误时应返回错误","duration":0.9520999999995183,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","changePassword"],"fullName":"ProfileActions changePassword 新旧密码相同时应被 Zod 拦截","status":"passed","title":"新旧密码相同时应被 Zod 拦截","duration":1.2938999999996668,"failureMessages":[],"meta":{}},{"ancestorTitles":["ProfileActions","changePassword"],"fullName":"ProfileActions changePassword 确认密码不一致应被 Zod 拦截","status":"passed","title":"确认密码不一致应被 Zod 拦截","duration":0.7098000000005413,"failureMessages":[],"meta":{}}],"startTime":1772266856042,"endTime":1772266856062.7097,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/profile-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Config Actions","getQuoteModeConfig"],"fullName":"Quote Config Actions getQuoteModeConfig should return default config if none set","status":"passed","title":"should return default config if none set","duration":5.980100000000675,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","getQuoteModeConfig"],"fullName":"Quote Config Actions getQuoteModeConfig should return tenant specific config if set","status":"passed","title":"should return tenant specific config if set","duration":1.0643999999992957,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","getQuoteModeConfig"],"fullName":"Quote Config Actions getQuoteModeConfig should handle missing tenant info","status":"passed","title":"should handle missing tenant info","duration":0.9744000000009692,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","getQuoteModeConfig"],"fullName":"Quote Config Actions getQuoteModeConfig should handle tenant not found","status":"passed","title":"should handle tenant not found","duration":1.2554000000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","saveQuoteModeConfig"],"fullName":"Quote Config Actions saveQuoteModeConfig should save config successfully","status":"passed","title":"should save config successfully","duration":6.027000000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","saveQuoteModeConfig"],"fullName":"Quote Config Actions saveQuoteModeConfig should validate input config","status":"passed","title":"should validate input config","duration":2.4904999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","saveQuoteModeConfig"],"fullName":"Quote Config Actions saveQuoteModeConfig should handle unauthorized user","status":"passed","title":"should handle unauthorized user","duration":1.1177999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Config Actions","saveQuoteModeConfig"],"fullName":"Quote Config Actions saveQuoteModeConfig should handle missing tenant info","status":"passed","title":"should handle missing tenant info","duration":0.5283999999992375,"failureMessages":[],"meta":{}}],"startTime":1772266858694,"endTime":1772266858715.5283,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/quote-config-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["ReminderActions","getReminderRules"],"fullName":"ReminderActions getReminderRules 应返回规则列表","status":"passed","title":"应返回规则列表","duration":8.118999999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","getReminderRules"],"fullName":"ReminderActions getReminderRules 规则不存在时返回空数组","status":"passed","title":"规则不存在时返回空数组","duration":2.083699999999226,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","createReminderRule"],"fullName":"ReminderActions createReminderRule 应成功创建提醒规则","status":"passed","title":"应成功创建提醒规则","duration":3.732299999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","createReminderRule"],"fullName":"ReminderActions createReminderRule 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":1.2328999999999724,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","updateReminderRule"],"fullName":"ReminderActions updateReminderRule 应成功更新提醒规则","status":"passed","title":"应成功更新提醒规则","duration":1.8903000000000247,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","updateReminderRule"],"fullName":"ReminderActions updateReminderRule 规则不存在时应返回错误","status":"passed","title":"规则不存在时应返回错误","duration":0.9124000000001615,"failureMessages":[],"meta":{}},{"ancestorTitles":["ReminderActions","deleteReminderRule"],"fullName":"ReminderActions deleteReminderRule 应成功删除提醒规则","status":"passed","title":"应成功删除提醒规则","duration":1.0976999999993495,"failureMessages":[],"meta":{}}],"startTime":1772266854134,"endTime":1772266854155.0977,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/reminder-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["RolesManagement Actions","getRolesAction"],"fullName":"RolesManagement Actions getRolesAction 应返回租户下所有角色","status":"passed","title":"应返回租户下所有角色","duration":6.8862000000008265,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","getRolesAction"],"fullName":"RolesManagement Actions getRolesAction 未授权时应抛出错误","status":"passed","title":"未授权时应抛出错误","duration":3.0047000000013213,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","createRole"],"fullName":"RolesManagement Actions createRole 应成功创建自定义角色","status":"passed","title":"应成功创建自定义角色","duration":7.382299999999304,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","createRole"],"fullName":"RolesManagement Actions createRole 角色代码重复时应返回错误","status":"passed","title":"角色代码重复时应返回错误","duration":11.90350000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","createRole"],"fullName":"RolesManagement Actions createRole 无效权限代码应返回错误","status":"passed","title":"无效权限代码应返回错误","duration":0.9153000000005704,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","updateRole"],"fullName":"RolesManagement Actions updateRole 应成功更新自定义角色","status":"passed","title":"应成功更新自定义角色","duration":2.053199999998469,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","updateRole"],"fullName":"RolesManagement Actions updateRole 角色不存在时应返回错误","status":"passed","title":"角色不存在时应返回错误","duration":0.8744000000006054,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","deleteRole"],"fullName":"RolesManagement Actions deleteRole 应成功删除自定义角色","status":"passed","title":"应成功删除自定义角色","duration":1.6851999999998952,"failureMessages":[],"meta":{}},{"ancestorTitles":["RolesManagement Actions","deleteRole"],"fullName":"RolesManagement Actions deleteRole 系统角色不能删除","status":"passed","title":"系统角色不能删除","duration":2.2368999999998778,"failureMessages":[],"meta":{}}],"startTime":1772266833714,"endTime":1772266833752.2368,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/roles-management.test.ts"},{"assertionResults":[{"ancestorTitles":["Roles Actions"],"fullName":"Roles Actions should return available roles from database","status":"passed","title":"should return available roles from database","duration":5.831599999999526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Roles Actions"],"fullName":"Roles Actions should initialize default roles if none exist","status":"passed","title":"should initialize default roles if none exist","duration":4.177300000000287,"failureMessages":[],"meta":{}},{"ancestorTitles":["Roles Actions"],"fullName":"Roles Actions should handle unauthenticated user","status":"passed","title":"should handle unauthenticated user","duration":0.4845000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["Roles Actions"],"fullName":"Roles Actions should handle database error gracefully","status":"passed","title":"should handle database error gracefully","duration":7.623500000000604,"failureMessages":[],"meta":{}}],"startTime":1772266856416,"endTime":1772266856433.6235,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/roles.test.ts"},{"assertionResults":[{"ancestorTitles":["SplitRulesActions","createSplitRule"],"fullName":"SplitRulesActions createSplitRule 拥有权限时应成功执行","status":"passed","title":"拥有权限时应成功执行","duration":6.794700000000375,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRulesActions","createSplitRule"],"fullName":"SplitRulesActions createSplitRule 权限不足时应返回错误","status":"passed","title":"权限不足时应返回错误","duration":11.04280000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRulesActions","updateSplitRule"],"fullName":"SplitRulesActions updateSplitRule 拥有权限时应成功执行","status":"passed","title":"拥有权限时应成功执行","duration":1.1568999999999505,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRulesActions","deleteSplitRule"],"fullName":"SplitRulesActions deleteSplitRule 拥有权限时应成功执行并清除缓存","status":"passed","title":"拥有权限时应成功执行并清除缓存","duration":4.548999999999978,"failureMessages":[],"meta":{}}],"startTime":1772266847654,"endTime":1772266847678.549,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/split-rules-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将 \"true\" 解析为 boolean true","status":"passed","title":"应将 \"true\" 解析为 boolean true","duration":3.871999999999389,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将 \"false\" 解析为 boolean false","status":"passed","title":"应将 \"false\" 解析为 boolean false","duration":2.2531999999991967,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将数字字符串解析为 INTEGER","status":"passed","title":"应将数字字符串解析为 INTEGER","duration":0.47589999999945576,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将小数字符串解析为 DECIMAL","status":"passed","title":"应将小数字符串解析为 DECIMAL","duration":1.5203999999994267,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将 JSON 字符串解析为对象","status":"passed","title":"应将 JSON 字符串解析为对象","duration":2.278600000001461,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应在 JSON 解析失败时返回原始字符串","status":"passed","title":"应在 JSON 解析失败时返回原始字符串","duration":0.3791000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将 ENUM 值原样返回","status":"passed","title":"应将 ENUM 值原样返回","duration":0.23549999999886495,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","parseSettingValue"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 parseSettingValue 应将未知类型原样返回","status":"passed","title":"应将未知类型原样返回","duration":0.20429999999942083,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应接受 boolean 类型的 BOOLEAN 值","status":"passed","title":"应接受 boolean 类型的 BOOLEAN 值","duration":0.7970000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应拒绝非 boolean 类型的 BOOLEAN 值","status":"passed","title":"应拒绝非 boolean 类型的 BOOLEAN 值","duration":0.4311999999990803,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应接受整数的 INTEGER 值","status":"passed","title":"应接受整数的 INTEGER 值","duration":0.5671999999995023,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应拒绝小数的 INTEGER 值","status":"passed","title":"应拒绝小数的 INTEGER 值","duration":0.55370000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应接受数字的 DECIMAL 值","status":"passed","title":"应接受数字的 DECIMAL 值","duration":0.24910000000090804,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应拒绝非数字的 DECIMAL 值","status":"passed","title":"应拒绝非数字的 DECIMAL 值","duration":0.1856000000007043,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应接受对象和字符串的 JSON 值","status":"passed","title":"应接受对象和字符串的 JSON 值","duration":0.22440000000096916,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应接受字符串的 ENUM 值","status":"passed","title":"应接受字符串的 ENUM 值","duration":0.5162000000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","validateValueType"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 validateValueType 应对未知类型返回 true","status":"passed","title":"应对未知类型返回 true","duration":0.23999999999978172,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getSettingsByCategory"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getSettingsByCategory 应返回按 key 分组的配置","status":"passed","title":"应返回按 key 分组的配置","duration":2.6600999999991473,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getSettingsByCategory"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getSettingsByCategory 未授权时应抛出错误","status":"passed","title":"未授权时应抛出错误","duration":3.000500000000102,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getSettingInternal"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getSettingInternal 应返回已存在的配置值","status":"passed","title":"应返回已存在的配置值","duration":0.6100000000005821,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getSettingInternal"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getSettingInternal 配置不存在时应回退到默认值","status":"passed","title":"配置不存在时应回退到默认值","duration":0.34180000000014843,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getSetting"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getSetting 未授权时应抛出错误","status":"passed","title":"未授权时应抛出错误","duration":0.5072000000000116,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","initTenantSettings"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 initTenantSettings 已有配置时应跳过初始化","status":"passed","title":"已有配置时应跳过初始化","duration":1.448899999999412,"failureMessages":[],"meta":{}},{"ancestorTitles":["SystemSettingsActions - Task 1: 纯函数单元测试","getAllSettings"],"fullName":"SystemSettingsActions - Task 1: 纯函数单元测试 getAllSettings 应按分类分组返回配置","status":"passed","title":"应按分类分组返回配置","duration":0.8535000000010768,"failureMessages":[],"meta":{}}],"startTime":1772266844698,"endTime":1772266844725.8535,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/system-settings-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","getTenantBusinessConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 getTenantBusinessConfig 未授权时应返回默认配置","status":"passed","title":"未授权时应返回默认配置","duration":4.0776999999998225,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateARPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateARPaymentConfig 合法配置应更新成功","status":"passed","title":"合法配置应更新成功","duration":4.788100000000668,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateARPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateARPaymentConfig 比例超出范围应校验失败","status":"passed","title":"比例超出范围应校验失败","duration":1.8230000000003201,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateARPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateARPaymentConfig 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":1.0917000000008557,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateARPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateARPaymentConfig 无权限时应返回错误","status":"passed","title":"无权限时应返回错误","duration":1.1301000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateAPPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateAPPaymentConfig 合法 AP 配置应更新成功","status":"passed","title":"合法 AP 配置应更新成功","duration":1.61620000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateAPPaymentConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateAPPaymentConfig 非法枚举值应校验失败","status":"passed","title":"非法枚举值应校验失败","duration":0.6947999999993044,"failureMessages":[],"meta":{}},{"ancestorTitles":["TenantConfig Actions - Task 3: Zod 校验测试","updateWorkflowModeConfig"],"fullName":"TenantConfig Actions - Task 3: Zod 校验测试 updateWorkflowModeConfig 合法工作流配置应更新成功","status":"passed","title":"合法工作流配置应更新成功","duration":8.622699999999895,"failureMessages":[],"meta":{}}],"startTime":1772266851053,"endTime":1772266851078.6228,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/tenant-config.test.ts"},{"assertionResults":[{"ancestorTitles":["Tenant Info Actions","getTenantInfo"],"fullName":"Tenant Info Actions getTenantInfo should return tenant info successfully","status":"passed","title":"should return tenant info successfully","duration":4.949500000000626,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","getTenantInfo"],"fullName":"Tenant Info Actions getTenantInfo should handle unauthenticated user","status":"passed","title":"should handle unauthenticated user","duration":0.8582000000005792,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","getTenantInfo"],"fullName":"Tenant Info Actions getTenantInfo should handle tenant not found","status":"passed","title":"should handle tenant not found","duration":0.6291999999994005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","updateTenantInfo"],"fullName":"Tenant Info Actions updateTenantInfo should update tenant info successfully","status":"passed","title":"should update tenant info successfully","duration":7.93789999999899,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","updateTenantInfo"],"fullName":"Tenant Info Actions updateTenantInfo should validate input","status":"passed","title":"should validate input","duration":1.4442999999992026,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","updateTenantInfo"],"fullName":"Tenant Info Actions updateTenantInfo should handle unauthorized user","status":"passed","title":"should handle unauthorized user","duration":0.5672000000013213,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","submitVerification"],"fullName":"Tenant Info Actions submitVerification should submit verification successfully","status":"passed","title":"should submit verification successfully","duration":2.358299999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","submitVerification"],"fullName":"Tenant Info Actions submitVerification should validate verification input","status":"passed","title":"should validate verification input","duration":0.7621999999992113,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","uploadTenantLogo"],"fullName":"Tenant Info Actions uploadTenantLogo should upload logo successfully","status":"passed","title":"should upload logo successfully","duration":4.225799999998344,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","uploadTenantLogo"],"fullName":"Tenant Info Actions uploadTenantLogo should reject invalid file type","status":"passed","title":"should reject invalid file type","duration":1.084100000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","uploadTenantLogo"],"fullName":"Tenant Info Actions uploadTenantLogo should reject large files","status":"passed","title":"should reject large files","duration":2.7792000000008557,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","canEditTenantInfo"],"fullName":"Tenant Info Actions canEditTenantInfo should return true if user has permission","status":"passed","title":"should return true if user has permission","duration":0.46019999999953143,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","canEditTenantInfo"],"fullName":"Tenant Info Actions canEditTenantInfo should return false if checkPermission fails","status":"passed","title":"should return false if checkPermission fails","duration":0.34720000000015716,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","getVerificationStatus"],"fullName":"Tenant Info Actions getVerificationStatus should return status successfully","status":"passed","title":"should return status successfully","duration":0.6046000000005733,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","uploadBusinessLicense"],"fullName":"Tenant Info Actions uploadBusinessLicense should upload license successfully","status":"passed","title":"should upload license successfully","duration":4.4931999999989785,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tenant Info Actions","uploadBusinessLicense"],"fullName":"Tenant Info Actions uploadBusinessLicense should reject invalid file type for license","status":"passed","title":"should reject invalid file type for license","duration":1.0025000000005093,"failureMessages":[],"meta":{}}],"startTime":1772266834274,"endTime":1772266834311.0024,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/tenant-info.test.ts"},{"assertionResults":[{"ancestorTitles":["UserActions","updateUser"],"fullName":"UserActions updateUser 应成功更新用户名称和角色","status":"passed","title":"应成功更新用户名称和角色","duration":12.680900000000292,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","updateUser"],"fullName":"UserActions updateUser 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":1.0117999999993117,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","updateUser"],"fullName":"UserActions updateUser 无权限时应返回错误","status":"passed","title":"无权限时应返回错误","duration":1.0120999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","updateUser"],"fullName":"UserActions updateUser Zod 校验失败时应返回格式错误","status":"passed","title":"Zod 校验失败时应返回格式错误","duration":1.9920000000001892,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","updateUser"],"fullName":"UserActions updateUser 用户不存在时应返回错误","status":"passed","title":"用户不存在时应返回错误","duration":1.787000000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","toggleUserActive"],"fullName":"UserActions toggleUserActive 应成功切换用户状态","status":"passed","title":"应成功切换用户状态","duration":1.9521999999997206,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","toggleUserActive"],"fullName":"UserActions toggleUserActive 不能禁用自己","status":"passed","title":"不能禁用自己","duration":0.44249999999919964,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","toggleUserActive"],"fullName":"UserActions toggleUserActive 不能禁用最后一个管理员","status":"passed","title":"不能禁用最后一个管理员","duration":1.804399999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","deleteUser"],"fullName":"UserActions deleteUser 应执行软删除","status":"passed","title":"应执行软删除","duration":2.098200000000361,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","deleteUser"],"fullName":"UserActions deleteUser 不能删除自己","status":"passed","title":"不能删除自己","duration":0.4926999999997861,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserActions","deleteUser"],"fullName":"UserActions deleteUser 不能删除最后一个管理员","status":"passed","title":"不能删除最后一个管理员","duration":1.0572000000001935,"failureMessages":[],"meta":{}}],"startTime":1772266848352,"endTime":1772266848380.0571,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/user-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["WorkflowActions","getWorkflows"],"fullName":"WorkflowActions getWorkflows 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":3.886199999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkflowActions","getWorkflows"],"fullName":"WorkflowActions getWorkflows 授权用户应能获取列表","status":"passed","title":"授权用户应能获取列表","duration":1.6136999999998807,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkflowActions","createWorkflow"],"fullName":"WorkflowActions createWorkflow 拥有权限时应成功","status":"passed","title":"拥有权限时应成功","duration":0.6617999999998574,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkflowActions","createWorkflow"],"fullName":"WorkflowActions createWorkflow 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":0.9465000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkflowActions","updateWorkflow"],"fullName":"WorkflowActions updateWorkflow 拥有权限时应成功","status":"passed","title":"拥有权限时应成功","duration":1.4444000000003143,"failureMessages":[],"meta":{}},{"ancestorTitles":["WorkflowActions","deleteWorkflow"],"fullName":"WorkflowActions deleteWorkflow 拥有权限时应成功","status":"passed","title":"拥有权限时应成功","duration":0.7674999999999272,"failureMessages":[],"meta":{}}],"startTime":1772266862414,"endTime":1772266862423.7676,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/__tests__/workflow-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Inventory Actions"],"fullName":"Inventory Actions should adjust inventory","status":"passed","title":"should adjust inventory","duration":14.288500000000568,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions"],"fullName":"Inventory Actions should transfer inventory","status":"passed","title":"should transfer inventory","duration":5.987100000000282,"failureMessages":[],"meta":{}}],"startTime":1772266851639,"endTime":1772266851658.987,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/inventory-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["[SC-08] 金额精确计算 - Decimal.js 精度校验"],"fullName":"[SC-08] 金额精确计算 - Decimal.js 精度校验 Decimal.js 应精确计算 0.1 × 0.2（原生 JS 浮点不精确）","status":"passed","title":"Decimal.js 应精确计算 0.1 × 0.2（原生 JS 浮点不精确）","duration":5.300100000000384,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-08] 金额精确计算 - Decimal.js 精度校验"],"fullName":"[SC-08] 金额精确计算 - Decimal.js 精度校验 多个 items 金额 reduce 求和应精确（模拟 createPurchaseOrder）","status":"passed","title":"多个 items 金额 reduce 求和应精确（模拟 createPurchaseOrder）","duration":1.5625,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-08] 金额精确计算 - Decimal.js 精度校验"],"fullName":"[SC-08] 金额精确计算 - Decimal.js 精度校验 ROUND_HALF_UP 应正确四舍五入","status":"passed","title":"ROUND_HALF_UP 应正确四舍五入","duration":0.45790000000033615,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-08] 金额精确计算 - Decimal.js 精度校验"],"fullName":"[SC-08] 金额精确计算 - Decimal.js 精度校验 大额金额计算应不超出 JS number 精度范围","status":"passed","title":"大额金额计算应不超出 JS number 精度范围","duration":0.9420000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-21] adjustInventory - 库存调整行为逻辑测试"],"fullName":"[SC-21] adjustInventory - 库存调整行为逻辑测试 库存不足时（newQty < 0）应检测到错误","status":"passed","title":"库存不足时（newQty < 0）应检测到错误","duration":0.5543999999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-21] adjustInventory - 库存调整行为逻辑测试"],"fullName":"[SC-21] adjustInventory - 库存调整行为逻辑测试 库存充足时 newQty 应正确计算","status":"passed","title":"库存充足时 newQty 应正确计算","duration":0.39570000000003347,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-21] adjustInventory - 库存调整行为逻辑测试"],"fullName":"[SC-21] adjustInventory - 库存调整行为逻辑测试 SC-16: balanceBefore 应等于调整前的库存量","status":"passed","title":"SC-16: balanceBefore 应等于调整前的库存量","duration":0.6675999999997657,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-21] adjustInventory - 库存调整行为逻辑测试"],"fullName":"[SC-21] adjustInventory - 库存调整行为逻辑测试 调拨出库：balanceBefore 为调拨前库存，balanceAfter 为扣减后库存","status":"passed","title":"调拨出库：balanceBefore 为调拨前库存，balanceAfter 为扣减后库存","duration":0.37779999999929714,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-21] adjustInventory - 库存调整行为逻辑测试"],"fullName":"[SC-21] adjustInventory - 库存调整行为逻辑测试 调拨入库：balanceBefore 为接收前库存，balanceAfter 为累加后库存","status":"passed","title":"调拨入库：balanceBefore 为接收前库存，balanceAfter 为累加后库存","duration":0.7934000000004744,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-22] confirmPoPayment - 付款确认逻辑验证"],"fullName":"[SC-22] confirmPoPayment - 付款确认逻辑验证 多个 item 金额合计应精确（Decimal.js）","status":"passed","title":"多个 item 金额合计应精确（Decimal.js）","duration":0.5169000000005326,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-22] confirmPoPayment - 付款确认逻辑验证"],"fullName":"[SC-22] confirmPoPayment - 付款确认逻辑验证 付款后 PO 状态应从 APPROVED 转为 PAID","status":"passed","title":"付款后 PO 状态应从 APPROVED 转为 PAID","duration":1.7305999999998676,"failureMessages":[],"meta":{}},{"ancestorTitles":["[SC-22] confirmPoPayment - 付款确认逻辑验证"],"fullName":"[SC-22] confirmPoPayment - 付款确认逻辑验证 已 PAID 状态不应再次付款","status":"passed","title":"已 PAID 状态不应再次付款","duration":0.26960000000053697,"failureMessages":[],"meta":{}}],"startTime":1772266862054,"endTime":1772266862068.7307,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/inventory-security.test.ts"},{"assertionResults":[{"ancestorTitles":["PO Completion (confirmPoReceipt)"],"fullName":"PO Completion (confirmPoReceipt) should complete PO when fully received","status":"passed","title":"should complete PO when fully received","duration":15.39810000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Completion (confirmPoReceipt)"],"fullName":"PO Completion (confirmPoReceipt) should set PARTIALLY_RECEIVED when partially received","status":"passed","title":"should set PARTIALLY_RECEIVED when partially received","duration":2.5333000000009633,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Completion (confirmPoReceipt)"],"fullName":"PO Completion (confirmPoReceipt) should fail if receiving more than ordered","status":"passed","title":"should fail if receiving more than ordered","duration":13.212900000000445,"failureMessages":[],"meta":{}}],"startTime":1772266840204,"endTime":1772266840235.213,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/po-completion.test.ts"},{"assertionResults":[{"ancestorTitles":["PO Lifecycle"],"fullName":"PO Lifecycle should create a PO in DRAFT status","status":"passed","title":"should create a PO in DRAFT status","duration":31.420899999999165,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Lifecycle"],"fullName":"PO Lifecycle should update PO status","status":"passed","title":"should update PO status","duration":4.6445999999996275,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Lifecycle"],"fullName":"PO Lifecycle should fail if invalid status transition","status":"passed","title":"should fail if invalid status transition","duration":1.8598999999994703,"failureMessages":[],"meta":{}}],"startTime":1772266833593,"endTime":1772266833630.8599,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/po-lifecycle.test.ts"},{"assertionResults":[{"ancestorTitles":["PO Actions 权限检查测试","createPO"],"fullName":"PO Actions 权限检查测试 createPO 未登录用户应返回未授权错误","status":"passed","title":"未登录用户应返回未授权错误","duration":3.9043000000001484,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions 权限检查测试","createPO"],"fullName":"PO Actions 权限检查测试 createPO 无权限用户应返回权限错误","status":"passed","title":"无权限用户应返回权限错误","duration":57.53830000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions 权限检查测试","createPO"],"fullName":"PO Actions 权限检查测试 createPO 无效的 supplierId 应返回验证错误","status":"passed","title":"无效的 supplierId 应返回验证错误","duration":9.800500000000284,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions 权限检查测试","updatePoStatus"],"fullName":"PO Actions 权限检查测试 updatePoStatus 权限检查应被调用","status":"passed","title":"权限检查应被调用","duration":3.508100000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions 权限检查测试","batchUpdatePoStatus"],"fullName":"PO Actions 权限检查测试 batchUpdatePoStatus 空的采购单列表应返回验证错误","status":"passed","title":"空的采购单列表应返回验证错误","duration":5.26930000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions 权限检查测试","batchDeleteDraftPOs"],"fullName":"PO Actions 权限检查测试 batchDeleteDraftPOs 空的采购单列表应返回验证错误","status":"passed","title":"空的采购单列表应返回验证错误","duration":5.0064000000002125,"failureMessages":[],"meta":{}}],"startTime":1772266835176,"endTime":1772266835262.0063,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/po-security.test.ts"},{"assertionResults":[{"ancestorTitles":["Processing Actions","createProcessingOrder"],"fullName":"Processing Actions createProcessingOrder should create a processing order successfully","status":"passed","title":"should create a processing order successfully","duration":12.725600000001577,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Actions","updateProcessingOrder"],"fullName":"Processing Actions updateProcessingOrder should update processing order successfully","status":"passed","title":"should update processing order successfully","duration":2.5873000000010506,"failureMessages":[],"meta":{}}],"startTime":1772266840818,"endTime":1772266840834.5874,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/processing-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["产品套件 (Product Bundles)","createProductBundle - 创建套件"],"fullName":"产品套件 (Product Bundles) createProductBundle - 创建套件 成功创建包含子项的套件","status":"passed","title":"成功创建包含子项的套件","duration":12.273600000000442,"failureMessages":[],"meta":{}},{"ancestorTitles":["产品套件 (Product Bundles)","createProductBundle - 创建套件"],"fullName":"产品套件 (Product Bundles) createProductBundle - 创建套件 SKU 已存在时应返回错误","status":"passed","title":"SKU 已存在时应返回错误","duration":10.540799999998853,"failureMessages":[],"meta":{}},{"ancestorTitles":["产品套件 (Product Bundles)","updateProductBundle - 更新套件"],"fullName":"产品套件 (Product Bundles) updateProductBundle - 更新套件 成功更新套件及其子项","status":"passed","title":"成功更新套件及其子项","duration":4.78440000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["产品套件 (Product Bundles)","updateProductBundle - 更新套件"],"fullName":"产品套件 (Product Bundles) updateProductBundle - 更新套件 套件不存在时应返回错误","status":"passed","title":"套件不存在时应返回错误","duration":3.2796999999991385,"failureMessages":[],"meta":{}},{"ancestorTitles":["产品套件 (Product Bundles)","deleteProductBundle - 删除套件"],"fullName":"产品套件 (Product Bundles) deleteProductBundle - 删除套件 成功删除套件及其子项","status":"passed","title":"成功删除套件及其子项","duration":2.92699999999968,"failureMessages":[],"meta":{}}],"startTime":1772266842532,"endTime":1772266842566.927,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/product-bundles.test.ts"},{"assertionResults":[{"ancestorTitles":["拆单路由规则 (Split Route Rules)","getSplitRules - 获取规则列表"],"fullName":"拆单路由规则 (Split Route Rules) getSplitRules - 获取规则列表 成功返回按优先级排序的规则列表","status":"passed","title":"成功返回按优先级排序的规则列表","duration":9.063700000000608,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","createSplitRule - 创建规则"],"fullName":"拆单路由规则 (Split Route Rules) createSplitRule - 创建规则 成功创建新规则","status":"passed","title":"成功创建新规则","duration":5.95339999999851,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","createSplitRule - 创建规则"],"fullName":"拆单路由规则 (Split Route Rules) createSplitRule - 创建规则 名称为空时应抛出 Zod 验证错误","status":"passed","title":"名称为空时应抛出 Zod 验证错误","duration":4.543499999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","updateSplitRule - 更新规则"],"fullName":"拆单路由规则 (Split Route Rules) updateSplitRule - 更新规则 成功更新已存在的规则","status":"passed","title":"成功更新已存在的规则","duration":2.881600000000617,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","updateSplitRule - 更新规则"],"fullName":"拆单路由规则 (Split Route Rules) updateSplitRule - 更新规则 规则不存在时应抛出异常","status":"passed","title":"规则不存在时应抛出异常","duration":1.6350000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","deleteSplitRule - 删除规则"],"fullName":"拆单路由规则 (Split Route Rules) deleteSplitRule - 删除规则 成功删除已存在的规则","status":"passed","title":"成功删除已存在的规则","duration":1.0105000000003201,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","deleteSplitRule - 删除规则"],"fullName":"拆单路由规则 (Split Route Rules) deleteSplitRule - 删除规则 删除不存在的规则应抛出异常","status":"passed","title":"删除不存在的规则应抛出异常","duration":0.7387999999991735,"failureMessages":[],"meta":{}},{"ancestorTitles":["拆单路由规则 (Split Route Rules)","getAllSuppliers - 获取供应商列表"],"fullName":"拆单路由规则 (Split Route Rules) getAllSuppliers - 获取供应商列表 成功返回当前租户的供应商列表","status":"passed","title":"成功返回当前租户的供应商列表","duration":1.4333000000005995,"failureMessages":[],"meta":{}}],"startTime":1772266840140,"endTime":1772266840168.4333,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/rules.test.ts"},{"assertionResults":[{"ancestorTitles":["发货管理 (Shipment Actions)","createShipment - 创建发货记录"],"fullName":"发货管理 (Shipment Actions) createShipment - 创建发货记录 当 PO 状态为 READY 时应成功创建发货记录","status":"passed","title":"当 PO 状态为 READY 时应成功创建发货记录","duration":13.463700000000244,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","createShipment - 创建发货记录"],"fullName":"发货管理 (Shipment Actions) createShipment - 创建发货记录 当 PO 不存在时应返回错误","status":"passed","title":"当 PO 不存在时应返回错误","duration":3.4230999999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","createShipment - 创建发货记录"],"fullName":"发货管理 (Shipment Actions) createShipment - 创建发货记录 当 PO 状态为 DRAFT 时不允许发货","status":"passed","title":"当 PO 状态为 DRAFT 时不允许发货","duration":2.211300000000847,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","createShipment - 创建发货记录"],"fullName":"发货管理 (Shipment Actions) createShipment - 创建发货记录 当 PO 状态为 COMPLETED 时不允许发货","status":"passed","title":"当 PO 状态为 COMPLETED 时不允许发货","duration":3.423399999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","updateShipment - 更新发货记录"],"fullName":"发货管理 (Shipment Actions) updateShipment - 更新发货记录 成功更新已存在的发货记录","status":"passed","title":"成功更新已存在的发货记录","duration":3.649999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","updateShipment - 更新发货记录"],"fullName":"发货管理 (Shipment Actions) updateShipment - 更新发货记录 更新不存在的发货记录应返回错误","status":"passed","title":"更新不存在的发货记录应返回错误","duration":1.8837000000003172,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","getShipments - 查询发货记录"],"fullName":"发货管理 (Shipment Actions) getShipments - 查询发货记录 成功返回指定 PO 的发货记录列表","status":"passed","title":"成功返回指定 PO 的发货记录列表","duration":3.684399999998277,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","getShipments - 查询发货记录"],"fullName":"发货管理 (Shipment Actions) getShipments - 查询发货记录 PO 不存在时返回空列表","status":"passed","title":"PO 不存在时返回空列表","duration":3.266200000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["发货管理 (Shipment Actions)","getShipments - 查询发货记录"],"fullName":"发货管理 (Shipment Actions) getShipments - 查询发货记录 poId 为空时返回空列表","status":"passed","title":"poId 为空时返回空列表","duration":2.2072000000007392,"failureMessages":[],"meta":{}}],"startTime":1772266842527,"endTime":1772266842566.2073,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/shipment-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Supplier Actions"],"fullName":"Supplier Actions should create a supplier","status":"passed","title":"should create a supplier","duration":19.734300000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions"],"fullName":"Supplier Actions should update a supplier","status":"passed","title":"should update a supplier","duration":6.242999999998574,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions"],"fullName":"Supplier Actions should get suppliers list","status":"passed","title":"should get suppliers list","duration":3.5257999999994354,"failureMessages":[],"meta":{}}],"startTime":1772266844711,"endTime":1772266844740.526,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/suppliers.test.ts"},{"assertionResults":[{"ancestorTitles":["Upload 模块安全测试","Auth 保护"],"fullName":"Upload 模块安全测试 Auth 保护 未登录应返回 success: false","status":"passed","title":"未登录应返回 success: false","duration":3.748099999999795,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload 模块安全测试","Auth 保护"],"fullName":"Upload 模块安全测试 Auth 保护 已登录应通过校验","status":"passed","title":"已登录应通过校验","duration":3.571600000000217,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload 模块安全测试","Zod 校验 - 文件类型"],"fullName":"Upload 模块安全测试 Zod 校验 - 文件类型 不支持的 MIME 类型应拒绝","status":"passed","title":"不支持的 MIME 类型应拒绝","duration":1.6069000000006781,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload 模块安全测试","Zod 校验 - 文件大小"],"fullName":"Upload 模块安全测试 Zod 校验 - 文件大小 超过 10MB 的文件应拒绝","status":"passed","title":"超过 10MB 的文件应拒绝","duration":1.5895999999993364,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload 模块安全测试","TenantId 隔离"],"fullName":"Upload 模块安全测试 TenantId 隔离 校验通过时应返回 tenantId","status":"passed","title":"校验通过时应返回 tenantId","duration":1.0636999999996988,"failureMessages":[],"meta":{}}],"startTime":1772266865705,"endTime":1772266865717.0637,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/upload/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 认证检查"],"fullName":"Upload Actions (L5) uploadFileAction - 认证检查 未登录时应返回未授权错误","status":"passed","title":"未登录时应返回未授权错误","duration":2639.2081,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 认证检查"],"fullName":"Upload Actions (L5) uploadFileAction - 认证检查 session 无 tenantId 时应返回未授权错误","status":"passed","title":"session 无 tenantId 时应返回未授权错误","duration":1.2149000000008527,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 文件大小校验"],"fullName":"Upload Actions (L5) uploadFileAction - 文件大小校验 文件大小超 10MB 时应被拒绝","status":"passed","title":"文件大小超 10MB 时应被拒绝","duration":4.897100000000137,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 文件大小校验"],"fullName":"Upload Actions (L5) uploadFileAction - 文件大小校验 文件大小恰好 10MB 时应被允许","status":"passed","title":"文件大小恰好 10MB 时应被允许","duration":4.007900000000518,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - MIME 类型校验"],"fullName":"Upload Actions (L5) uploadFileAction - MIME 类型校验 可执行文件（application/x-msdownload）应被拒绝","status":"passed","title":"可执行文件（application/x-msdownload）应被拒绝","duration":2.471399999998539,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - MIME 类型校验"],"fullName":"Upload Actions (L5) uploadFileAction - MIME 类型校验 JS 脚本文件（text/javascript）应被拒绝","status":"passed","title":"JS 脚本文件（text/javascript）应被拒绝","duration":1.7295999999987544,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - MIME 类型校验"],"fullName":"Upload Actions (L5) uploadFileAction - MIME 类型校验 合法 Word 文档（.docx）应被允许","status":"passed","title":"合法 Word 文档（.docx）应被允许","duration":1.565599999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - MIME 类型校验"],"fullName":"Upload Actions (L5) uploadFileAction - MIME 类型校验 PDF 文件应被允许上传","status":"passed","title":"PDF 文件应被允许上传","duration":1.2541000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 正常上传"],"fullName":"Upload Actions (L5) uploadFileAction - 正常上传 合法图片应返回包含 tenantId 的文件 URL","status":"passed","title":"合法图片应返回包含 tenantId 的文件 URL","duration":2.01680000000124,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 正常上传"],"fullName":"Upload Actions (L5) uploadFileAction - 正常上传 上传成功后应写入审计日志","status":"passed","title":"上传成功后应写入审计日志","duration":1.8420999999998457,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 路径遍历防护"],"fullName":"Upload Actions (L5) uploadFileAction - 路径遍历防护 文件名含 ../ 时 URL 不应泄露遍历路径","status":"passed","title":"文件名含 ../ 时 URL 不应泄露遍历路径","duration":1.7679000000007363,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 路径遍历防护"],"fullName":"Upload Actions (L5) uploadFileAction - 路径遍历防护 文件名含特殊字符时应被安全净化","status":"passed","title":"文件名含特殊字符时应被安全净化","duration":1.253999999998996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 空文件处理"],"fullName":"Upload Actions (L5) uploadFileAction - 空文件处理 FormData 无 file 字段时应返回错误","status":"passed","title":"FormData 无 file 字段时应返回错误","duration":0.5979999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 并发上传"],"fullName":"Upload Actions (L5) uploadFileAction - 并发上传 多个文件同时上传应全部成功","status":"passed","title":"多个文件同时上传应全部成功","duration":3.0910000000003492,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 磁盘写入失败"],"fullName":"Upload Actions (L5) uploadFileAction - 磁盘写入失败 writeFile 抛出异常时应返回 \"上传失败\"","status":"passed","title":"writeFile 抛出异常时应返回 \"上传失败\"","duration":1.323899999999412,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 零字节文件"],"fullName":"Upload Actions (L5) uploadFileAction - 零字节文件 大小为 0 的文件应被 Zod 校验拒绝","status":"passed","title":"大小为 0 的文件应被 Zod 校验拒绝","duration":1.0930000000007567,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 超长文件名"],"fullName":"Upload Actions (L5) uploadFileAction - 超长文件名 文件名超过 255 字符应被 Zod 校验拒绝","status":"passed","title":"文件名超过 255 字符应被 Zod 校验拒绝","duration":1.3330000000005384,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - 双重扩展名欺骗"],"fullName":"Upload Actions (L5) uploadFileAction - 双重扩展名欺骗 恶意双重扩展名（如 .png.exe）应被 MIME 校验拦截","status":"passed","title":"恶意双重扩展名（如 .png.exe）应被 MIME 校验拦截","duration":1.177400000000489,"failureMessages":[],"meta":{}},{"ancestorTitles":["Upload Actions (L5)","uploadFileAction - Unicode / CJK 文件名"],"fullName":"Upload Actions (L5) uploadFileAction - Unicode / CJK 文件名 中文文件名应被安全净化为下划线","status":"passed","title":"中文文件名应被安全净化为下划线","duration":1.3317999999999302,"failureMessages":[],"meta":{}}],"startTime":1772266805366,"endTime":1772266808042.3318,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/upload/__tests__/upload-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","JWT 签发与生命周期提取端测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 JWT 签发与生命周期提取端测试 1. 完整真实 JWT Token 签发与解析链路测试","status":"passed","title":"1. 完整真实 JWT Token 签发与解析链路测试","duration":23.78189999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","JWT 签发与生命周期提取端测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 JWT 签发与生命周期提取端测试 2. 验证过期的 Token 将被拒绝 (Expired Token)","status":"passed","title":"2. 验证过期的 Token 将被拒绝 (Expired Token)","duration":89.5893000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","JWT 签发与生命周期提取端测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 JWT 签发与生命周期提取端测试 3. JwtVerify 被篡改的 Signature 将被果断拒接","status":"passed","title":"3. JwtVerify 被篡改的 Signature 将被果断拒接","duration":6.970799999999599,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","原authenticateMobile拦截测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 原authenticateMobile拦截测试 无 Authorization header 应返回 401","status":"passed","title":"无 Authorization header 应返回 401","duration":2.3255000000003747,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","原authenticateMobile拦截测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 原authenticateMobile拦截测试 有效 Token 头但携带奇怪前缀而非 Bearer 应返回 401拦截","status":"passed","title":"有效 Token 头但携带奇怪前缀而非 Bearer 应返回 401拦截","duration":2.1547999999997955,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","原authenticateMobile拦截测试"],"fullName":"Mobile Auth 中间件 & JWT 集成 原authenticateMobile拦截测试 有效 Token 且缺少 traceId 时中间件将自动补充回传","status":"passed","title":"有效 Token 且缺少 traceId 时中间件将自动补充回传","duration":89.1582000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","角色边界拦截"],"fullName":"Mobile Auth 中间件 & JWT 集成 角色边界拦截 requireWorker 边界断言","status":"passed","title":"requireWorker 边界断言","duration":2.110500000000229,"failureMessages":[],"meta":{}},{"ancestorTitles":["Mobile Auth 中间件 & JWT 集成","角色边界拦截"],"fullName":"Mobile Auth 中间件 & JWT 集成 角色边界拦截 requireInternal 边界断言","status":"passed","title":"requireInternal 边界断言","duration":1.2940000000003238,"failureMessages":[],"meta":{}}],"startTime":1772266816556,"endTime":1772266816776.294,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/middleware/__tests__/mobile-auth.test.ts"},{"assertionResults":[{"ancestorTitles":["RBAC 权限检查","精确匹配"],"fullName":"RBAC 权限检查 精确匹配 用户拥有精确权限应返回 true","status":"passed","title":"用户拥有精确权限应返回 true","duration":6.755000000000109,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","精确匹配"],"fullName":"RBAC 权限检查 精确匹配 用户缺少权限应返回 false","status":"passed","title":"用户缺少权限应返回 false","duration":1.2561000000005151,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","精确匹配"],"fullName":"RBAC 权限检查 精确匹配 ADMIN 角色应绕过所有检查","status":"passed","title":"ADMIN 角色应绕过所有检查","duration":1.4369000000006054,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","通配符匹配"],"fullName":"RBAC 权限检查 通配符匹配 角色拥有 * 权限应匹配所有","status":"passed","title":"角色拥有 * 权限应匹配所有","duration":1.4990999999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","通配符匹配"],"fullName":"RBAC 权限检查 通配符匹配 角色拥有 ** 权限应匹配所有","status":"passed","title":"角色拥有 ** 权限应匹配所有","duration":0.956199999999626,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","数据范围推导"],"fullName":"RBAC 权限检查 数据范围推导 order.own.edit 应隐式包含 order.edit","status":"passed","title":"order.own.edit 应隐式包含 order.edit","duration":0.6857999999992899,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","数据范围推导"],"fullName":"RBAC 权限检查 数据范围推导 order.all.edit 应隐式包含 order.edit","status":"passed","title":"order.all.edit 应隐式包含 order.edit","duration":0.9503000000004249,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","数据范围推导"],"fullName":"RBAC 权限检查 数据范围推导 三段权限名不应触发推导逻辑但可被精确匹配","status":"passed","title":"三段权限名不应触发推导逻辑但可被精确匹配","duration":1.1453000000001339,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","多角色合并"],"fullName":"RBAC 权限检查 多角色合并 多角色的权限应合并为并集","status":"passed","title":"多角色的权限应合并为并集","duration":1.578599999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","审计日志"],"fullName":"RBAC 权限检查 审计日志 options.audit=true 应写入审计日志","status":"passed","title":"options.audit=true 应写入审计日志","duration":1.149399999999332,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","审计日志"],"fullName":"RBAC 权限检查 审计日志 审计写入失败不应影响权限结果","status":"passed","title":"审计写入失败不应影响权限结果","duration":1.0585999999993874,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","边界情况"],"fullName":"RBAC 权限检查 边界情况 session 为 null 应返回 false","status":"passed","title":"session 为 null 应返回 false","duration":0.38550000000032014,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","边界情况"],"fullName":"RBAC 权限检查 边界情况 roles 为空数组应返回 false","status":"passed","title":"roles 为空数组应返回 false","duration":0.37340000000040163,"failureMessages":[],"meta":{}},{"ancestorTitles":["RBAC 权限检查","边界情况"],"fullName":"RBAC 权限检查 边界情况 数据库错误应返回 false 而非抛出","status":"passed","title":"数据库错误应返回 false 而非抛出","duration":0.7485999999998967,"failureMessages":[],"meta":{}}],"startTime":1772266859125,"endTime":1772266859147.7485,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/lib/__tests__/auth-rbac.test.ts"},{"assertionResults":[{"ancestorTitles":["JWT Token","Access Token"],"fullName":"JWT Token Access Token 应生成有效的 JWT 并包含正确的 payload","status":"passed","title":"应生成有效的 JWT 并包含正确的 payload","duration":24.865899999999783,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Access Token"],"fullName":"JWT Token Access Token 应在 24 小时后过期","status":"passed","title":"应在 24 小时后过期","duration":124.16940000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Access Token"],"fullName":"JWT Token Access Token issuer 应为 l2c-mobile","status":"passed","title":"issuer 应为 l2c-mobile","duration":110.65830000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Refresh Token"],"fullName":"JWT Token Refresh Token 应在 7 天后过期","status":"passed","title":"应在 7 天后过期","duration":35.99470000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Refresh Token"],"fullName":"JWT Token Refresh Token type 应为 refresh","status":"passed","title":"type 应为 refresh","duration":116.20740000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Pre-Auth Token (MFA)"],"fullName":"JWT Token Pre-Auth Token (MFA) 应在 5 分钟后过期","status":"passed","title":"应在 5 分钟后过期","duration":61.21979999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","Pre-Auth Token (MFA)"],"fullName":"JWT Token Pre-Auth Token (MFA) type 应为 pre-auth","status":"passed","title":"type 应为 pre-auth","duration":110.81420000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","verifyToken"],"fullName":"JWT Token verifyToken 有效 Token 应返回 payload","status":"passed","title":"有效 Token 应返回 payload","duration":150.4720000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","verifyToken"],"fullName":"JWT Token verifyToken 伪造 Token 应返回 null","status":"passed","title":"伪造 Token 应返回 null","duration":1.6469999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","verifyToken"],"fullName":"JWT Token verifyToken issuer 不匹配应返回 null","status":"passed","title":"issuer 不匹配应返回 null","duration":94.01080000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","extractAndVerifyToken"],"fullName":"JWT Token extractAndVerifyToken 正确的 Bearer 格式应提取并验证","status":"passed","title":"正确的 Bearer 格式应提取并验证","duration":104.57290000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","extractAndVerifyToken"],"fullName":"JWT Token extractAndVerifyToken 缺少 Bearer 前缀应返回 null","status":"passed","title":"缺少 Bearer 前缀应返回 null","duration":1.0057000000001608,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWT Token","extractAndVerifyToken"],"fullName":"JWT Token extractAndVerifyToken null 或空 header 应返回 null","status":"passed","title":"null 或空 header 应返回 null","duration":0.27910000000019863,"failureMessages":[],"meta":{}}],"startTime":1772266817112,"endTime":1772266818052.279,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/lib/__tests__/jwt.test.ts"},{"assertionResults":[{"ancestorTitles":["Permission Check"],"fullName":"Permission Check should allow access","status":"passed","title":"should allow access","duration":3.403899999999794,"failureMessages":[],"meta":{}}],"startTime":1772266870498,"endTime":1772266870501.4038,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/lib/__tests__/permission-check.test.ts"},{"assertionResults":[{"ancestorTitles":["TTLCache"],"fullName":"TTLCache 应该能正确设置并获取缓存值","status":"passed","title":"应该能正确设置并获取缓存值","duration":3.521299999999428,"failureMessages":[],"meta":{}},{"ancestorTitles":["TTLCache"],"fullName":"TTLCache 缓存过期后应该返回 undefined","status":"passed","title":"缓存过期后应该返回 undefined","duration":6.221400000000358,"failureMessages":[],"meta":{}},{"ancestorTitles":["TTLCache"],"fullName":"TTLCache 应该支持自定义 TTL 覆盖默认设置","status":"passed","title":"应该支持自定义 TTL 覆盖默认设置","duration":1.175000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["TTLCache"],"fullName":"TTLCache 删除功能应该正常","status":"passed","title":"删除功能应该正常","duration":0.7811000000001513,"failureMessages":[],"meta":{}},{"ancestorTitles":["TTLCache"],"fullName":"TTLCache 清空功能应该正常","status":"passed","title":"清空功能应该正常","duration":0.4192000000002736,"failureMessages":[],"meta":{}}],"startTime":1772266862430,"endTime":1772266862442.4192,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/lib/__tests__/ttl-cache.test.ts"},{"assertionResults":[{"ancestorTitles":["utils.ts","cn"],"fullName":"utils.ts cn should merge class names correctly","status":"passed","title":"should merge class names correctly","duration":14.723500000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","cn"],"fullName":"utils.ts cn should handle tailwind conflict","status":"passed","title":"should handle tailwind conflict","duration":1.254799999998795,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","formatCurrency"],"fullName":"utils.ts formatCurrency should format numbers as CNY currency by default","status":"passed","title":"should format numbers as CNY currency by default","duration":37.80539999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","formatDate"],"fullName":"utils.ts formatDate should format date object correctly","status":"passed","title":"should format date object correctly","duration":14.248700000000099,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","formatDate"],"fullName":"utils.ts formatDate should format date string correctly","status":"passed","title":"should format date string correctly","duration":0.803699999998571,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","generateDocNo"],"fullName":"utils.ts generateDocNo should generate a document number with given prefix","status":"passed","title":"should generate a document number with given prefix","duration":5.1766999999999825,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","maskPhone"],"fullName":"utils.ts maskPhone should mask the middle of a phone number","status":"passed","title":"should mask the middle of a phone number","duration":0.6448999999993248,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","maskPhone"],"fullName":"utils.ts maskPhone should return original string if it is not a valid 11-digit phone","status":"passed","title":"should return original string if it is not a valid 11-digit phone","duration":0.5817999999999302,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","truncate"],"fullName":"utils.ts truncate should truncate text longer than given length","status":"passed","title":"should truncate text longer than given length","duration":0.8923000000013417,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","truncate"],"fullName":"utils.ts truncate should not truncate text shorter than or equal to given length","status":"passed","title":"should not truncate text shorter than or equal to given length","duration":0.8059999999986758,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","formatDateTime"],"fullName":"utils.ts formatDateTime should format date with time correctly","status":"passed","title":"should format date with time correctly","duration":1.1784000000006927,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","sleep"],"fullName":"utils.ts sleep should delay execution for specified milliseconds","status":"passed","title":"should delay execution for specified milliseconds","duration":112.8125,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","debounce"],"fullName":"utils.ts debounce should only call the function once after delay","status":"passed","title":"should only call the function once after delay","duration":3.9645000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["utils.ts","debounce"],"fullName":"utils.ts debounce should reset timer on subsequent calls","status":"passed","title":"should reset timer on subsequent calls","duration":1.0752000000011321,"failureMessages":[],"meta":{}}],"startTime":1772266815209,"endTime":1772266815407.0752,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/lib/__tests__/utils.test.ts"},{"assertionResults":[{"ancestorTitles":["EmptyUI"],"fullName":"EmptyUI 应渲染默认提示文案","status":"passed","title":"应渲染默认提示文案","duration":200.52540000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmptyUI"],"fullName":"EmptyUI 应渲染自定义提示文案","status":"passed","title":"应渲染自定义提示文案","duration":10.660900000000765,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmptyUI"],"fullName":"EmptyUI 应渲染自定义图标","status":"passed","title":"应渲染自定义图标","duration":7.658100000000559,"failureMessages":[],"meta":{}}],"startTime":1772266822135,"endTime":1772266822353.6582,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/shared/ui/__tests__/empty-ui.test.tsx"},{"assertionResults":[{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 缺少 Authorization 头应返回 null","status":"passed","title":"缺少 Authorization 头应返回 null","duration":10.508500000001732,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 非 Bearer 开头的 Token 应返回 null","status":"passed","title":"非 Bearer 开头的 Token 应返回 null","duration":3.355099999998856,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 有效 Token 应成功解析用户信息","status":"passed","title":"有效 Token 应成功解析用户信息","duration":4.169700000000375,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 Token 缺少 userId 应返回 null","status":"passed","title":"Token 缺少 userId 应返回 null","duration":2.3768999999992957,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 Token 缺少 tenantId 应返回 null","status":"passed","title":"Token 缺少 tenantId 应返回 null","duration":2.2430999999996857,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 Token 验证失败（签名无效/过期）应返回 null","status":"passed","title":"Token 验证失败（签名无效/过期）应返回 null","duration":2.7633999999998196,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 开发环境下 dev-mock-token 应返回测试用户","status":"passed","title":"开发环境下 dev-mock-token 应返回测试用户","duration":2.4385000000002037,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","getMiniprogramUser - 身份验证"],"fullName":"auth-utils 认证工具模块 getMiniprogramUser - 身份验证 无 role 的 Token 应返回 role 为 undefined","status":"passed","title":"无 role 的 Token 应返回 role 为 undefined","duration":2.2325000000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","generateMiniprogramToken - Token 签发"],"fullName":"auth-utils 认证工具模块 generateMiniprogramToken - Token 签发 应成功生成包含 userId 和 tenantId 的 Token","status":"passed","title":"应成功生成包含 userId 和 tenantId 的 Token","duration":3.587499999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","generateMiniprogramToken - Token 签发"],"fullName":"auth-utils 认证工具模块 generateMiniprogramToken - Token 签发 应支持自定义 type 和 expiresIn 选项","status":"passed","title":"应支持自定义 type 和 expiresIn 选项","duration":2.3222999999998137,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","generateMiniprogramToken - Token 签发"],"fullName":"auth-utils 认证工具模块 generateMiniprogramToken - Token 签发 默认参数应使用 miniprogram 类型和 7d 过期时间","status":"passed","title":"默认参数应使用 miniprogram 类型和 7d 过期时间","duration":4.919200000000274,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","generateRegisterToken - 注册临时令牌"],"fullName":"auth-utils 认证工具模块 generateRegisterToken - 注册临时令牌 应成功生成包含 openId 的注册令牌","status":"passed","title":"应成功生成包含 openId 的注册令牌","duration":1.8782000000010157,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","generateRegisterToken - 注册临时令牌"],"fullName":"auth-utils 认证工具模块 generateRegisterToken - 注册临时令牌 应支持可选的 unionId 参数","status":"passed","title":"应支持可选的 unionId 参数","duration":1.5043000000005122,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","verifyRegisterToken - 注册令牌验证"],"fullName":"auth-utils 认证工具模块 verifyRegisterToken - 注册令牌验证 有效的注册令牌应正确解析 openId","status":"passed","title":"有效的注册令牌应正确解析 openId","duration":1.9403999999994994,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","verifyRegisterToken - 注册令牌验证"],"fullName":"auth-utils 认证工具模块 verifyRegisterToken - 注册令牌验证 含 unionId 的注册令牌应同时解析","status":"passed","title":"含 unionId 的注册令牌应同时解析","duration":1.5877000000000407,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","verifyRegisterToken - 注册令牌验证"],"fullName":"auth-utils 认证工具模块 verifyRegisterToken - 注册令牌验证 非 REGISTER 类型的令牌应返回 null","status":"passed","title":"非 REGISTER 类型的令牌应返回 null","duration":1.3659999999999854,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","verifyRegisterToken - 注册令牌验证"],"fullName":"auth-utils 认证工具模块 verifyRegisterToken - 注册令牌验证 缺少 openId 的令牌应返回 null","status":"passed","title":"缺少 openId 的令牌应返回 null","duration":1.335399999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-utils 认证工具模块","verifyRegisterToken - 注册令牌验证"],"fullName":"auth-utils 认证工具模块 verifyRegisterToken - 注册令牌验证 过期或伪造的令牌应返回 null","status":"passed","title":"过期或伪造的令牌应返回 null","duration":1.384200000000419,"failureMessages":[],"meta":{}}],"startTime":1772266823783,"endTime":1772266823837.3843,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/auth-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["小程序认证模块","密码登录 (auth/login)"],"fullName":"小程序认证模块 密码登录 (auth/login) 登录成功应返回 Token 和用户信息","status":"passed","title":"登录成功应返回 Token 和用户信息","duration":26.99409999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","密码登录 (auth/login)"],"fullName":"小程序认证模块 密码登录 (auth/login) 账号或密码错误应返回 401","status":"passed","title":"账号或密码错误应返回 401","duration":3.7159000000010565,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","密码登录 (auth/login)"],"fullName":"小程序认证模块 密码登录 (auth/login) Zod 验证不通过应返回 400","status":"passed","title":"Zod 验证不通过应返回 400","duration":3.6608000000014727,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","微信登录 (auth/wx-login)"],"fullName":"小程序认证模块 微信登录 (auth/wx-login) 已有用户登录应返回 Token","status":"passed","title":"已有用户登录应返回 Token","duration":6.920799999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","微信登录 (auth/wx-login)"],"fullName":"小程序认证模块 微信登录 (auth/wx-login) 新用户应返回 openId 且 user 为 null","status":"passed","title":"新用户应返回 openId 且 user 为 null","duration":5.8770000000004075,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","手机号解密登录 (auth/decrypt-phone)"],"fullName":"小程序认证模块 手机号解密登录 (auth/decrypt-phone) 手机号已注册应直接登录","status":"passed","title":"手机号已注册应直接登录","duration":6.955599999999322,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","手机号解密登录 (auth/decrypt-phone)"],"fullName":"小程序认证模块 手机号解密登录 (auth/decrypt-phone) 手机号未注册应返回 USER_NOT_FOUND","status":"passed","title":"手机号未注册应返回 USER_NOT_FOUND","duration":3.9408000000003085,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","认证边界场景"],"fullName":"小程序认证模块 认证边界场景 未设置密码的微信用户尝试密码登录应返回 401","status":"passed","title":"未设置密码的微信用户尝试密码登录应返回 401","duration":2.4483999999993102,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","认证边界场景"],"fullName":"小程序认证模块 认证边界场景 用户不存在应返回模糊错误（防枚举）","status":"passed","title":"用户不存在应返回模糊错误（防枚举）","duration":2.9056999999993423,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","认证边界场景"],"fullName":"小程序认证模块 认证边界场景 微信 API 异常应优雅降级返回 500","status":"passed","title":"微信 API 异常应优雅降级返回 500","duration":13.264600000000428,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","认证边界场景"],"fullName":"小程序认证模块 认证边界场景 租户不存在应返回 500","status":"passed","title":"租户不存在应返回 500","duration":1.3801000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序认证模块","认证边界场景"],"fullName":"小程序认证模块 认证边界场景 wx-login 空 code 应被 Zod 拒绝","status":"passed","title":"wx-login 空 code 应被 Zod 拒绝","duration":1.2262999999984459,"failureMessages":[],"meta":{}}],"startTime":1772266826111,"endTime":1772266826192.2263,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/auth.test.ts"},{"assertionResults":[{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2020 M:1","status":"passed","title":"应正确响应仪表盘请求 Y:2020 M:1","duration":65.04420000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2021 M:2","status":"passed","title":"应正确响应仪表盘请求 Y:2021 M:2","duration":3.7608999999993102,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2022 M:3","status":"passed","title":"应正确响应仪表盘请求 Y:2022 M:3","duration":3.1133999999983644,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2023 M:4","status":"passed","title":"应正确响应仪表盘请求 Y:2023 M:4","duration":3.556399999999485,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2024 M:5","status":"passed","title":"应正确响应仪表盘请求 Y:2024 M:5","duration":3.702000000001135,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2025 M:6","status":"passed","title":"应正确响应仪表盘请求 Y:2025 M:6","duration":2.8708999999998923,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2026 M:7","status":"passed","title":"应正确响应仪表盘请求 Y:2026 M:7","duration":2.264000000001033,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2027 M:8","status":"passed","title":"应正确响应仪表盘请求 Y:2027 M:8","duration":2.507499999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2028 M:9","status":"passed","title":"应正确响应仪表盘请求 Y:2028 M:9","duration":5.545799999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 应正确响应仪表盘请求 Y:2029 M:10","status":"passed","title":"应正确响应仪表盘请求 Y:2029 M:10","duration":3.4768999999996595,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","1. Dashboard 看板极限压力与参数化测试"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 1. Dashboard 看板极限压力与参数化测试 Admin 视角应触发多维数据聚合逻辑","status":"passed","title":"Admin 视角应触发多维数据聚合逻辑","duration":3.104400000000169,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"张\"","status":"passed","title":"搜索关键字验证: \"张\"","duration":7.261300000000119,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"138\"","status":"passed","title":"搜索关键字验证: \"138\"","duration":1.9591999999993277,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"\"","status":"passed","title":"搜索关键字验证: \"\"","duration":1.4567000000006374,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"VeryLongNameThatExceedsNormalLength\"","status":"passed","title":"搜索关键字验证: \"VeryLongNameThatExceedsNormalLength\"","duration":1.136000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"Special!@#$%^&*()\"","status":"passed","title":"搜索关键字验证: \"Special!@#$%^&*()\"","duration":1.782999999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 搜索关键字验证: \"1234567890\"","status":"passed","title":"搜索关键字验证: \"1234567890\"","duration":1.3682000000007974,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","2. 客户管理与游标分页矩阵"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 2. 客户管理与游标分页矩阵 游标分页透传验证 (精简版)","status":"passed","title":"游标分页透传验证 (精简版)","duration":2.040999999999258,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","3. 报价单生命周期健壮性"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 3. 报价单生命周期健壮性 空房间创建申请应能被 Zod 通过并成功落库","status":"passed","title":"空房间创建申请应能被 Zod 通过并成功落库","duration":10.402699999998731,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","3. 报价单生命周期健壮性"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 3. 报价单生命周期健壮性 特大型报价单（50+ 项目）不应触发堆栈溢出或超时","status":"passed","title":"特大型报价单（50+ 项目）不应触发堆栈溢出或超时","duration":12.192599999998492,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","3. 报价单生命周期健壮性"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 3. 报价单生命周期健壮性 非 UUID 格式的客户 ID 应被强效拦截 (400)","status":"passed","title":"非 UUID 格式的客户 ID 应被强效拦截 (400)","duration":2.393000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","4. 订单转换与防重放/容灾"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 4. 订单转换与防重放/容灾 报价单未确认状态转换应返回 400","status":"passed","title":"报价单未确认状态转换应返回 400","duration":3.3476000000009662,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","4. 订单转换与防重放/容灾"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 4. 订单转换与防重放/容灾 AuditService 宕机时，核心创建流程不应被阻断","status":"passed","title":"AuditService 宕机时，核心创建流程不应被阻断","duration":3.8211000000010245,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","4. 订单转换与防重放/容灾"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 4. 订单转换与防重放/容灾 非法 JSON 攻击不应导致 Node.js 崩溃 (400)","status":"passed","title":"非法 JSON 攻击不应导致 Node.js 崩溃 (400)","duration":19.256400000000212,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序 L5 业务逻辑收官套件 (Total Coverage 30+)","5. 类型稳定性验证"],"fullName":"小程序 L5 业务逻辑收官套件 (Total Coverage 30+) 5. 类型稳定性验证 Zod 类型转换验证 (coerce)","status":"passed","title":"Zod 类型转换验证 (coerce)","duration":1.8174999999991996,"failureMessages":[],"meta":{}}],"startTime":1772266817390,"endTime":1772266817561.8174,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/business.test.ts"},{"assertionResults":[{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 应正确存储并读取缓存值","status":"passed","title":"应正确存储并读取缓存值","duration":5.563300000001618,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 缓存未命中时应返回 null","status":"passed","title":"缓存未命中时应返回 null","duration":1.1340999999993073,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 过期缓存应自动失效并返回 null","status":"passed","title":"过期缓存应自动失效并返回 null","duration":13.449800000000323,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 getOrSet 缓存命中时应直接返回，不调用 fetcher","status":"passed","title":"getOrSet 缓存命中时应直接返回，不调用 fetcher","duration":3.2770000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 getOrSet 缓存缺失时应调用 fetcher 并回填缓存","status":"passed","title":"getOrSet 缓存缺失时应调用 fetcher 并回填缓存","duration":2.226300000000265,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 flushAll 应清空所有缓存","status":"passed","title":"flushAll 应清空所有缓存","duration":1.5335999999988417,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务"],"fullName":"CacheService 内存缓存服务 超过容量上限时应自动剔除最旧的缓存键","status":"passed","title":"超过容量上限时应自动剔除最旧的缓存键","duration":0.8922000000002299,"failureMessages":[],"meta":{}},{"ancestorTitles":["IdempotencyGuard 幂等控制"],"fullName":"IdempotencyGuard 幂等控制 check 无记录时应返回 null","status":"passed","title":"check 无记录时应返回 null","duration":0.45050000000082946,"failureMessages":[],"meta":{}},{"ancestorTitles":["IdempotencyGuard 幂等控制"],"fullName":"IdempotencyGuard 幂等控制 start 后 check 应返回 PROCESSING 状态","status":"passed","title":"start 后 check 应返回 PROCESSING 状态","duration":0.6832000000013068,"failureMessages":[],"meta":{}},{"ancestorTitles":["IdempotencyGuard 幂等控制"],"fullName":"IdempotencyGuard 幂等控制 complete 后 check 应返回 COMPLETED 状态和响应数据","status":"passed","title":"complete 后 check 应返回 COMPLETED 状态和响应数据","duration":0.8796000000002095,"failureMessages":[],"meta":{}},{"ancestorTitles":["IdempotencyGuard 幂等控制"],"fullName":"IdempotencyGuard 幂等控制 fail 后应清除幂等记录","status":"passed","title":"fail 后应清除幂等记录","duration":0.2734999999993306,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter 令牌桶频控"],"fullName":"RateLimiter 令牌桶频控 初始请求应允许放行","status":"passed","title":"初始请求应允许放行","duration":0.4260000000012951,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter 令牌桶频控"],"fullName":"RateLimiter 令牌桶频控 连续请求超过桶容量后应拒绝","status":"passed","title":"连续请求超过桶容量后应拒绝","duration":1.1519000000007509,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter 令牌桶频控"],"fullName":"RateLimiter 令牌桶频控 reset 后应重新获得全部令牌","status":"passed","title":"reset 后应重新获得全部令牌","duration":0.6301999999996042,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter 令牌桶频控"],"fullName":"RateLimiter 令牌桶频控 令牌回复速率应正确工作","status":"passed","title":"令牌回复速率应正确工作","duration":193.0710999999992,"failureMessages":[],"meta":{}}],"startTime":1772266818699,"endTime":1772266818927.071,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/cache-security.test.ts"},{"assertionResults":[{"ancestorTitles":["CacheService 内存缓存服务","get/set 基础操作"],"fullName":"CacheService 内存缓存服务 get/set 基础操作 set 后 get 应返回存储的值","status":"passed","title":"set 后 get 应返回存储的值","duration":5.705899999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","get/set 基础操作"],"fullName":"CacheService 内存缓存服务 get/set 基础操作 get 不存在的键应返回 null","status":"passed","title":"get 不存在的键应返回 null","duration":0.7581000000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","get/set 基础操作"],"fullName":"CacheService 内存缓存服务 get/set 基础操作 应支持不同类型的值（字符串、数组、数字）","status":"passed","title":"应支持不同类型的值（字符串、数组、数字）","duration":1.3333000000002357,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","TTL 过期"],"fullName":"CacheService 内存缓存服务 TTL 过期 超过 TTL 的缓存应返回 null","status":"passed","title":"超过 TTL 的缓存应返回 null","duration":1.091500000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","TTL 过期"],"fullName":"CacheService 内存缓存服务 TTL 过期 未过期的缓存应正常返回","status":"passed","title":"未过期的缓存应正常返回","duration":0.626299999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","getOrSet 穿透防护"],"fullName":"CacheService 内存缓存服务 getOrSet 穿透防护 缓存未命中时应调用 fetcher 并回填","status":"passed","title":"缓存未命中时应调用 fetcher 并回填","duration":1.5250999999998385,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","getOrSet 穿透防护"],"fullName":"CacheService 内存缓存服务 getOrSet 穿透防护 缓存命中时不应调用 fetcher","status":"passed","title":"缓存命中时不应调用 fetcher","duration":1.598599999999351,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","getOrSet 穿透防护"],"fullName":"CacheService 内存缓存服务 getOrSet 穿透防护 fetcher 返回 undefined 时不应被缓存（防止缓存黑洞）","status":"passed","title":"fetcher 返回 undefined 时不应被缓存（防止缓存黑洞）","duration":0.7755000000006476,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","getOrSet 穿透防护"],"fullName":"CacheService 内存缓存服务 getOrSet 穿透防护 应支持自定义 TTL","status":"passed","title":"应支持自定义 TTL","duration":1.0699000000004162,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","flushAll 缓存清理"],"fullName":"CacheService 内存缓存服务 flushAll 缓存清理 清理后所有缓存应失效","status":"passed","title":"清理后所有缓存应失效","duration":0.611800000000585,"failureMessages":[],"meta":{}},{"ancestorTitles":["CacheService 内存缓存服务","LRU 驱逐策略"],"fullName":"CacheService 内存缓存服务 LRU 驱逐策略 超过容量上限时应驱逐最旧的键","status":"passed","title":"超过容量上限时应驱逐最旧的键","duration":0.33479999999963184,"failureMessages":[],"meta":{}}],"startTime":1772266859032,"endTime":1772266859050.3347,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/cache-service.test.ts"},{"assertionResults":[{"ancestorTitles":["军工级联调与破坏性用例 (E2E & Chaos)","1. 防刷单与频控 (Rate Limiter) 拦截测试"],"fullName":"军工级联调与破坏性用例 (E2E & Chaos) 1. 防刷单与频控 (Rate Limiter) 拦截测试 应允许合理频率的 API 调用并拦截毫秒级的恶意疯狂重放（429）","status":"passed","title":"应允许合理频率的 API 调用并拦截毫秒级的恶意疯狂重放（429）","duration":39.959100000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["军工级联调与破坏性用例 (E2E & Chaos)","2. 极致并发抢占 (Idempotency) 脏数据隔离测试"],"fullName":"军工级联调与破坏性用例 (E2E & Chaos) 2. 极致并发抢占 (Idempotency) 脏数据隔离测试 单用户针对同一个 Quote 并发连击 5 次，必须只流转成功 1 次并立刻封锁其他请求且保证不产生错误插库","status":"passed","title":"单用户针对同一个 Quote 并发连击 5 次，必须只流转成功 1 次并立刻封锁其他请求且保证不产生错误插库","duration":204.623599999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["军工级联调与破坏性用例 (E2E & Chaos)","3. 聚合查询极限缓存 (LRU Cache) 阻击测试"],"fullName":"军工级联调与破坏性用例 (E2E & Chaos) 3. 聚合查询极限缓存 (LRU Cache) 阻击测试 高频读取 Dashboard 时应该只查一次 DB，其余走内存缓冲，且速度差异显著","status":"passed","title":"高频读取 Dashboard 时应该只查一次 DB，其余走内存缓冲，且速度差异显著","duration":233.70900000000256,"failureMessages":[],"meta":{}}],"startTime":1772266822818,"endTime":1772266823297.709,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/e2e-workflow.test.ts"},{"assertionResults":[{"ancestorTitles":["小程序邀请模块测试","生成邀请码 (invite/generate)"],"fullName":"小程序邀请模块测试 生成邀请码 (invite/generate) 非管理员应被拒绝 (403)","status":"passed","title":"非管理员应被拒绝 (403)","duration":14.79700000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序邀请模块测试","生成邀请码 (invite/generate)"],"fullName":"小程序邀请模块测试 生成邀请码 (invite/generate) 管理员应成功生成邀请码","status":"passed","title":"管理员应成功生成邀请码","duration":9.582699999999022,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序邀请模块测试","生成邀请码 (invite/generate)"],"fullName":"小程序邀请模块测试 生成邀请码 (invite/generate) 非活跃租户无法生成邀请码 (403)","status":"passed","title":"非活跃租户无法生成邀请码 (403)","duration":3.3505999999997584,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序邀请模块测试","接受邀请 (invite/accept)"],"fullName":"小程序邀请模块测试 接受邀请 (invite/accept) 过期邀请码应返回 404","status":"passed","title":"过期邀请码应返回 404","duration":7.398300000000745,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序邀请模块测试","接受邀请 (invite/accept)"],"fullName":"小程序邀请模块测试 接受邀请 (invite/accept) 已加入其他租户的用户应被拦截 (409)","status":"passed","title":"已加入其他租户的用户应被拦截 (409)","duration":3.177400000000489,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序邀请模块测试","接受邀请 (invite/accept)"],"fullName":"小程序邀请模块测试 接受邀请 (invite/accept) 新用户接受邀请应成功创建账号并返回 Token","status":"passed","title":"新用户接受邀请应成功创建账号并返回 Token","duration":5.832599999999729,"failureMessages":[],"meta":{}}],"startTime":1772266832960,"endTime":1772266833004.8325,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/invite.test.ts"},{"assertionResults":[{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 GET /orders 应成功返回订单列表","status":"passed","title":"GET /orders 应成功返回订单列表","duration":18.973400000000765,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 GET /orders?status=COMPLETED 带状态筛选应成功","status":"passed","title":"GET /orders?status=COMPLETED 带状态筛选应成功","duration":2.591500000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 GET /orders?page=2&limit=20 分页参数应传递","status":"passed","title":"GET /orders?page=2&limit=20 分页参数应传递","duration":2.0106999999989057,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 POST /orders 合法 quoteId 应成功创建订单","status":"passed","title":"POST /orders 合法 quoteId 应成功创建订单","duration":5.964100000001054,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 POST /orders 非法 quoteId 应返回 400","status":"passed","title":"POST /orders 非法 quoteId 应返回 400","duration":3.1054000000003725,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 POST /orders 缺少 quoteId 应返回 400","status":"passed","title":"POST /orders 缺少 quoteId 应返回 400","duration":2.423899999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["订单 API 路由测试"],"fullName":"订单 API 路由测试 未授权请求应返回 401","status":"passed","title":"未授权请求应返回 401","duration":1.3441000000002532,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 GET /customers 应成功返回分页数据","status":"passed","title":"GET /customers 应成功返回分页数据","duration":2.0313999999998487,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 GET /customers?keyword=张 关键字搜索应成功","status":"passed","title":"GET /customers?keyword=张 关键字搜索应成功","duration":3.295400000000882,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 GET /customers 分页参数应传递到服务层","status":"passed","title":"GET /customers 分页参数应传递到服务层","duration":6.494399999999587,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 POST /customers 合法数据应成功创建","status":"passed","title":"POST /customers 合法数据应成功创建","duration":12.701399999999921,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 POST /customers 缺少必填字段 name 应返回 400","status":"passed","title":"POST /customers 缺少必填字段 name 应返回 400","duration":1.5218000000004395,"failureMessages":[],"meta":{}},{"ancestorTitles":["客户 API 路由测试"],"fullName":"客户 API 路由测试 POST /customers 未授权请求应返回 401","status":"passed","title":"POST /customers 未授权请求应返回 401","duration":0.6701000000011845,"failureMessages":[],"meta":{}}],"startTime":1772266819649,"endTime":1772266819713.6702,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/orders-customers.test.ts"},{"assertionResults":[{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 未注册的键应返回 null","status":"passed","title":"未注册的键应返回 null","duration":3.143199999999524,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 start 后 check 应返回 PROCESSING 状态","status":"passed","title":"start 后 check 应返回 PROCESSING 状态","duration":1.0335000000004584,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 complete 后 check 应返回 COMPLETED 状态及响应","status":"passed","title":"complete 后 check 应返回 COMPLETED 状态及响应","duration":2.1711000000004788,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 fail 后 check 应返回 null（允许重试）","status":"passed","title":"fail 后 check 应返回 null（允许重试）","duration":0.9380000000001019,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 过期记录应在 check 时被自动清理","status":"passed","title":"过期记录应在 check 时被自动清理","duration":0.6639000000004671,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","IdempotencyGuard - 幂等与防重放"],"fullName":"SecurityService 安全服务 IdempotencyGuard - 幂等与防重放 完整生命周期：start → complete → 重复请求直接返回缓存","status":"passed","title":"完整生命周期：start → complete → 重复请求直接返回缓存","duration":0.5476999999991676,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 新键的首次请求应被允许","status":"passed","title":"新键的首次请求应被允许","duration":0.5960000000004584,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 连续请求超过桶容量应被拒绝","status":"passed","title":"连续请求超过桶容量应被拒绝","duration":1.1748999999999796,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 令牌耗尽后等待足够时间应恢复","status":"passed","title":"令牌耗尽后等待足够时间应恢复","duration":0.8474999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 不同键的限流应独立","status":"passed","title":"不同键的限流应独立","duration":0.7049999999999272,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 reset 后应恢复全部容量","status":"passed","title":"reset 后应恢复全部容量","duration":0.44509999999991123,"failureMessages":[],"meta":{}},{"ancestorTitles":["SecurityService 安全服务","RateLimiter - 令牌桶频控"],"fullName":"SecurityService 安全服务 RateLimiter - 令牌桶频控 令牌补给不应超过桶最大容量","status":"passed","title":"令牌补给不应超过桶最大容量","duration":0.4183999999995649,"failureMessages":[],"meta":{}}],"startTime":1772266856911,"endTime":1772266856925.445,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/security-service.test.ts"},{"assertionResults":[{"ancestorTitles":["小程序安全与隔离性测试","认证拦截 (Authentication)"],"fullName":"小程序安全与隔离性测试 认证拦截 (Authentication) 未携带 Token 应返回 401","status":"passed","title":"未携带 Token 应返回 401","duration":18.22780000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","输入验证 (Zod Validation)"],"fullName":"小程序安全与隔离性测试 输入验证 (Zod Validation) 创建客户时缺少必填项应返回 400","status":"passed","title":"创建客户时缺少必填项应返回 400","duration":8.66070000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","租户隔离 (Tenant Isolation)"],"fullName":"小程序安全与隔离性测试 租户隔离 (Tenant Isolation) 获取客户列表应锁定当前租户 ID","status":"passed","title":"获取客户列表应锁定当前租户 ID","duration":16.602599999998347,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","租户隔离 (Tenant Isolation)"],"fullName":"小程序安全与隔离性测试 租户隔离 (Tenant Isolation) 从不同租户的报价单创建订单应被拦截 (404)","status":"passed","title":"从不同租户的报价单创建订单应被拦截 (404)","duration":5.501800000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","安全攻击防御 (Attack Prevention)"],"fullName":"小程序安全与隔离性测试 安全攻击防御 (Attack Prevention) 超长字符串注入应被 Zod 拦截","status":"passed","title":"超长字符串注入应被 Zod 拦截","duration":3.240400000000591,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","安全攻击防御 (Attack Prevention)"],"fullName":"小程序安全与隔离性测试 安全攻击防御 (Attack Prevention) 特殊字符注入不应导致服务端异常","status":"passed","title":"特殊字符注入不应导致服务端异常","duration":5.335300000000643,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","安全攻击防御 (Attack Prevention)"],"fullName":"小程序安全与隔离性测试 安全攻击防御 (Attack Prevention) tenantId 为空的用户应被拒绝","status":"passed","title":"tenantId 为空的用户应被拒绝","duration":1.5203000000001339,"failureMessages":[],"meta":{}},{"ancestorTitles":["小程序安全与隔离性测试","安全攻击防御 (Attack Prevention)"],"fullName":"小程序安全与隔离性测试 安全攻击防御 (Attack Prevention) 无 body 的 POST 请求应返回 400/500 而非崩溃","status":"passed","title":"无 body 的 POST 请求应返回 400/500 而非崩溃","duration":5.17489999999998,"failureMessages":[],"meta":{}}],"startTime":1772266835480,"endTime":1772266835545.1748,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/miniprogram/__tests__/security.test.ts"},{"assertionResults":[{"ancestorTitles":["MobileApprovalsPage"],"fullName":"MobileApprovalsPage should show skeleton while loading auth","status":"passed","title":"should show skeleton while loading auth","duration":63.03489999999874,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileApprovalsPage"],"fullName":"MobileApprovalsPage should fetch and display approvals","status":"passed","title":"should fetch and display approvals","duration":116.68159999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileApprovalsPage"],"fullName":"MobileApprovalsPage should show empty state if no approvals","status":"passed","title":"should show empty state if no approvals","duration":22.445600000000923,"failureMessages":[],"meta":{}}],"startTime":1772266820247,"endTime":1772266820449.4456,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/mobile/approvals/__tests__/page.test.tsx"},{"assertionResults":[{"ancestorTitles":["MobileTasksPage"],"fullName":"MobileTasksPage should show skeleton while loading auth","status":"passed","title":"should show skeleton while loading auth","duration":57.17739999999867,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileTasksPage"],"fullName":"MobileTasksPage should fetch and display tasks based on tabs","status":"passed","title":"should fetch and display tasks based on tabs","duration":505.8084999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["MobileTasksPage"],"fullName":"MobileTasksPage should show empty state if no tasks match tab","status":"passed","title":"should show empty state if no tasks match tab","duration":16.09769999999844,"failureMessages":[],"meta":{}}],"startTime":1772266820869,"endTime":1772266821448.0977,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/mobile/tasks/__tests__/page.test.tsx"},{"assertionResults":[{"ancestorTitles":["After Sales Health Action"],"fullName":"After Sales Health Action should return error when not logged in (auth fails)","status":"passed","title":"should return error when not logged in (auth fails)","duration":3.822400000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Health Action"],"fullName":"After Sales Health Action should return after-sales health metrics correctly","status":"passed","title":"should return after-sales health metrics correctly","duration":12.88170000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["After Sales Health Action"],"fullName":"After Sales Health Action should avoid division by zero when revenue/orders are zero","status":"passed","title":"should avoid division by zero when revenue/orders are zero","duration":5.124700000000303,"failureMessages":[],"meta":{}}],"startTime":1772266850332,"endTime":1772266850354.1248,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/after-sales-health.test.ts"},{"assertionResults":[{"ancestorTitles":["AR Aging Analysis Action"],"fullName":"AR Aging Analysis Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.7391999999999825,"failureMessages":[],"meta":{}},{"ancestorTitles":["AR Aging Analysis Action"],"fullName":"AR Aging Analysis Action should return AR aging data correctly segmented by days","status":"passed","title":"should return AR aging data correctly segmented by days","duration":11.107899999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["AR Aging Analysis Action"],"fullName":"AR Aging Analysis Action should handle zero AR correctly","status":"passed","title":"should handle zero AR correctly","duration":2.116499999999178,"failureMessages":[],"meta":{}}],"startTime":1772266851101,"endTime":1772266851118.1165,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/ar-aging.test.ts"},{"assertionResults":[{"ancestorTitles":["Cash Flow Forecast Action"],"fullName":"Cash Flow Forecast Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.501999999999498,"failureMessages":[],"meta":{}},{"ancestorTitles":["Cash Flow Forecast Action"],"fullName":"Cash Flow Forecast Action should return cash flow predictive data correctly","status":"passed","title":"should return cash flow predictive data correctly","duration":12.661299999999756,"failureMessages":[],"meta":{}},{"ancestorTitles":["Cash Flow Forecast Action"],"fullName":"Cash Flow Forecast Action should handle empty cash flow gracefully","status":"passed","title":"should handle empty cash flow gracefully","duration":2.9911999999994805,"failureMessages":[],"meta":{}}],"startTime":1772266856182,"endTime":1772266856200.9912,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/cash-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["Customer Source Distribution Action"],"fullName":"Customer Source Distribution Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.5914999999995416,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Source Distribution Action"],"fullName":"Customer Source Distribution Action should return source distribution with direct/unknown channels","status":"passed","title":"should return source distribution with direct/unknown channels","duration":10.483799999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Source Distribution Action"],"fullName":"Customer Source Distribution Action should not push direct channel if count is zero","status":"passed","title":"should not push direct channel if count is zero","duration":2.8067999999993845,"failureMessages":[],"meta":{}}],"startTime":1772266858769,"endTime":1772266858786.807,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/customer-source.test.ts"},{"assertionResults":[{"ancestorTitles":["Dashboard Stats Action"],"fullName":"Dashboard Stats Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.535200000000259,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Stats Action"],"fullName":"Dashboard Stats Action should intercept when permission denied","status":"passed","title":"should intercept when permission denied","duration":10.277400000000853,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard Stats Action"],"fullName":"Dashboard Stats Action should return stats correctly and use tenantId isolation","status":"passed","title":"should return stats correctly and use tenantId isolation","duration":5.637299999999414,"failureMessages":[],"meta":{}}],"startTime":1772266852402,"endTime":1772266852421.6372,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/dashboard-stats.test.ts"},{"assertionResults":[{"ancestorTitles":["Delivery Efficiency Action"],"fullName":"Delivery Efficiency Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.691399999999703,"failureMessages":[],"meta":{}},{"ancestorTitles":["Delivery Efficiency Action"],"fullName":"Delivery Efficiency Action should return correct delivery efficiency metrics","status":"passed","title":"should return correct delivery efficiency metrics","duration":9.052700000000186,"failureMessages":[],"meta":{}},{"ancestorTitles":["Delivery Efficiency Action"],"fullName":"Delivery Efficiency Action should handle zero tasks avoiding division by zero","status":"passed","title":"should handle zero tasks avoiding division by zero","duration":2.5366999999987456,"failureMessages":[],"meta":{}}],"startTime":1772266862214,"endTime":1772266862229.5366,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/delivery-efficiency.test.ts"},{"assertionResults":[{"ancestorTitles":["Leaderboard Action"],"fullName":"Leaderboard Action should intercept when permission denied","status":"passed","title":"should intercept when permission denied","duration":18.771999999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["Leaderboard Action"],"fullName":"Leaderboard Action should return leaderboard respecting toggle and limit","status":"passed","title":"should return leaderboard respecting toggle and limit","duration":9.212400000000343,"failureMessages":[],"meta":{}}],"startTime":1772266851276,"endTime":1772266851305.2124,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/leaderboard.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Trend Action"],"fullName":"Order Trend Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":4.155000000000655,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Trend Action"],"fullName":"Order Trend Action should return trend grouped by date format correctly","status":"passed","title":"should return trend grouped by date format correctly","duration":14.632200000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Trend Action"],"fullName":"Order Trend Action should handle empty trend correctly","status":"passed","title":"should handle empty trend correctly","duration":2.9711999999999534,"failureMessages":[],"meta":{}}],"startTime":1772266862321,"endTime":1772266862343.9712,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/order-trend.test.ts"},{"assertionResults":[{"ancestorTitles":["Pricing Reference Action"],"fullName":"Pricing Reference Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.829299999999421,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Reference Action"],"fullName":"Pricing Reference Action should return correct pricing stats for a given product","status":"passed","title":"should return correct pricing stats for a given product","duration":7.941999999999098,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Reference Action"],"fullName":"Pricing Reference Action should format zeroes correctly when no quotes found","status":"passed","title":"should format zeroes correctly when no quotes found","duration":2.7114000000001397,"failureMessages":[],"meta":{}}],"startTime":1772266862778,"endTime":1772266862792.7114,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/pricing-reference.test.ts"},{"assertionResults":[{"ancestorTitles":["Profit Margin Analysis Action"],"fullName":"Profit Margin Analysis Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":3.891700000000128,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profit Margin Analysis Action"],"fullName":"Profit Margin Analysis Action should return complex profit margins","status":"passed","title":"should return complex profit margins","duration":11.169999999998254,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profit Margin Analysis Action"],"fullName":"Profit Margin Analysis Action should handle zero revenue without division by zero","status":"passed","title":"should handle zero revenue without division by zero","duration":2.8887999999988097,"failureMessages":[],"meta":{}}],"startTime":1772266861052,"endTime":1772266861069.889,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/profit-margin.test.ts"},{"assertionResults":[{"ancestorTitles":["Sales Funnel Action"],"fullName":"Sales Funnel Action should return error when not logged in","status":"passed","title":"should return error when not logged in","duration":4.517499999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Sales Funnel Action"],"fullName":"Sales Funnel Action should return sales funnel correctly with phase times and trends","status":"passed","title":"should return sales funnel correctly with phase times and trends","duration":10.291799999999057,"failureMessages":[],"meta":{}}],"startTime":1772266859370,"endTime":1772266859385.2917,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/analytics/actions/__tests__/sales-funnel.test.ts"},{"assertionResults":[{"ancestorTitles":["Channels Mutations (渠道业务测试)","createChannel"],"fullName":"Channels Mutations (渠道业务测试) createChannel 应该成功创建渠道并生成默认联系人和审计日志","status":"passed","title":"应该成功创建渠道并生成默认联系人和审计日志","duration":24.309900000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Mutations (渠道业务测试)","updateChannel"],"fullName":"Channels Mutations (渠道业务测试) updateChannel 应该成功更新渠道信息及生成审计日志","status":"passed","title":"应该成功更新渠道信息及生成审计日志","duration":4.244700000001103,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Mutations (渠道业务测试)","updateChannel"],"fullName":"Channels Mutations (渠道业务测试) updateChannel 并发测试(乐观锁丢失更新)：当返回 0 行时触发并发冲突错误","status":"passed","title":"并发测试(乐观锁丢失更新)：当返回 0 行时触发并发冲突错误","duration":4.89600000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Mutations (渠道业务测试)","deleteChannel"],"fullName":"Channels Mutations (渠道业务测试) deleteChannel 渠道存在子渠道时无法删除，触发级联依赖校验","status":"passed","title":"渠道存在子渠道时无法删除，触发级联依赖校验","duration":7.567800000000716,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Mutations (渠道业务测试)","deleteChannel"],"fullName":"Channels Mutations (渠道业务测试) deleteChannel 渠道校验孤立后成功删除","status":"passed","title":"渠道校验孤立后成功删除","duration":4.289800000000469,"failureMessages":[],"meta":{}}],"startTime":1772266836671,"endTime":1772266836717.2898,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/actions/__tests__/mutations.test.ts"},{"assertionResults":[{"ancestorTitles":["Channels Queries (Fixed Validated)","getChannels"],"fullName":"Channels Queries (Fixed Validated) getChannels 成功获取分页列表","status":"passed","title":"成功获取分页列表","duration":206.90480000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Queries (Fixed Validated)"],"fullName":"Channels Queries (Fixed Validated) getChannelTree 构建嵌套树形结构","status":"passed","title":"getChannelTree 构建嵌套树形结构","duration":2.0741999999991094,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Queries (Fixed Validated)"],"fullName":"Channels Queries (Fixed Validated) getChannelById 根据 ID 获取详情","status":"passed","title":"getChannelById 根据 ID 获取详情","duration":1.9815999999991618,"failureMessages":[],"meta":{}}],"startTime":1772266823016,"endTime":1772266823227.9817,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 有效数据应通过校验","status":"passed","title":"有效数据应通过校验","duration":63.02609999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 name 为空字符串时应校验失败","status":"passed","title":"name 为空字符串时应校验失败","duration":3.168099999998958,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 name 超过 100 字符时应校验失败","status":"passed","title":"name 超过 100 字符时应校验失败","duration":1.4333000000005995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 channelType 不在枚举范围内时应校验失败","status":"passed","title":"channelType 不在枚举范围内时应校验失败","duration":1.9812000000001717,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 channelType=OTHER 但未提供 customChannelType 时应失败","status":"passed","title":"channelType=OTHER 但未提供 customChannelType 时应失败","duration":1.423399999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","基础字段校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 基础字段校验 channelType=OTHER 且提供 customChannelType 时应通过","status":"passed","title":"channelType=OTHER 且提供 customChannelType 时应通过","duration":0.738999999999578,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","手机号格式校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 手机号格式校验 有效手机号应通过","status":"passed","title":"有效手机号应通过","duration":0.9170999999987544,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","手机号格式校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 手机号格式校验 无效手机号格式应失败","status":"passed","title":"无效手机号格式应失败","duration":0.9513999999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","手机号格式校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 手机号格式校验 非1开头的11位号码应失败","status":"passed","title":"非1开头的11位号码应失败","duration":1.979799999999159,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","佣金配置校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 佣金配置校验 佣金率超过100应失败","status":"passed","title":"佣金率超过100应失败","duration":1.2237999999997555,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","佣金配置校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 佣金配置校验 佣金率为负数应失败","status":"passed","title":"佣金率为负数应失败","duration":0.7680999999993219,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","佣金配置校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 佣金配置校验 阶梯费率区间重叠应失败","status":"passed","title":"阶梯费率区间重叠应失败","duration":43.78099999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","佣金配置校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 佣金配置校验 有效阶梯费率应通过","status":"passed","title":"有效阶梯费率应通过","duration":1.1301000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","联系人 Schema 校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 联系人 Schema 校验 有效联系人数据应通过","status":"passed","title":"有效联系人数据应通过","duration":1.5645000000004075,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","联系人 Schema 校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 联系人 Schema 校验 联系人 name 为空时应校验失败","status":"passed","title":"联系人 name 为空时应校验失败","duration":1.5432999999993626,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","联系人 Schema 校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 联系人 Schema 校验 联系人缺少 channelId 应校验失败","status":"passed","title":"联系人缺少 channelId 应校验失败","duration":2.1960999999992055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","渠道类型 Schema 校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 渠道类型 Schema 校验 有效类型数据应通过","status":"passed","title":"有效类型数据应通过","duration":1.7508000000016182,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Schema 校验 (渠道表单验证)","渠道类型 Schema 校验"],"fullName":"Channel Schema 校验 (渠道表单验证) 渠道类型 Schema 校验 缺少 code 应失败","status":"passed","title":"缺少 code 应失败","duration":0.848599999999351,"failureMessages":[],"meta":{}}],"startTime":1772266831620,"endTime":1772266831753.8486,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/actions/__tests__/schema.test.ts"},{"assertionResults":[{"ancestorTitles":["Channels Security (渠道安全测试)","未授权访问拒绝"],"fullName":"Channels Security (渠道安全测试) 未授权访问拒绝 getChannels：未登录时应抛出 Unauthorized","status":"passed","title":"getChannels：未登录时应抛出 Unauthorized","duration":1546.3155000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","未授权访问拒绝"],"fullName":"Channels Security (渠道安全测试) 未授权访问拒绝 getChannels：session 无 tenantId 时应抛出 Unauthorized","status":"passed","title":"getChannels：session 无 tenantId 时应抛出 Unauthorized","duration":1.0719000000008236,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","未授权访问拒绝"],"fullName":"Channels Security (渠道安全测试) 未授权访问拒绝 getChannelTree：未登录时应抛出 Unauthorized","status":"passed","title":"getChannelTree：未登录时应抛出 Unauthorized","duration":1.049699999999575,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","未授权访问拒绝"],"fullName":"Channels Security (渠道安全测试) 未授权访问拒绝 getChannelById：未登录时应抛出 Unauthorized","status":"passed","title":"getChannelById：未登录时应抛出 Unauthorized","duration":1.4814000000005763,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","未授权访问拒绝"],"fullName":"Channels Security (渠道安全测试) 未授权访问拒绝 getChannelContacts：未登录时应抛出 Unauthorized","status":"passed","title":"getChannelContacts：未登录时应抛出 Unauthorized","duration":1.1517000000003463,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","权限检查拦截"],"fullName":"Channels Security (渠道安全测试) 权限检查拦截 getChannels：权限检查失败应抛出异常","status":"passed","title":"getChannels：权限检查失败应抛出异常","duration":0.8957999999984168,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","分页安全限制"],"fullName":"Channels Security (渠道安全测试) 分页安全限制 getChannels：pageSize 超过 100 时应强制限制为 100","status":"passed","title":"getChannels：pageSize 超过 100 时应强制限制为 100","duration":4.29320000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Security (渠道安全测试)","分页安全限制"],"fullName":"Channels Security (渠道安全测试) 分页安全限制 getChannels：pageSize 为负数时应被归一化为 1","status":"passed","title":"getChannels：pageSize 为负数时应被归一化为 1","duration":1.4834000000009837,"failureMessages":[],"meta":{}}],"startTime":1772266811652,"endTime":1772266813210.4834,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/actions/__tests__/security.test.ts"},{"assertionResults":[{"ancestorTitles":["Channel Settlements Actions","createSettlement"],"fullName":"Channel Settlements Actions createSettlement should throw error when pending commission is empty","status":"passed","title":"should throw error when pending commission is empty","duration":28.891900000000533,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Settlements Actions","createSettlement"],"fullName":"Channel Settlements Actions createSettlement should create settlement successfully with valid pending commissions","status":"passed","title":"should create settlement successfully with valid pending commissions","duration":12.03440000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Settlements Actions","submitSettlementForApproval"],"fullName":"Channel Settlements Actions submitSettlementForApproval should only update DRAFT settlement to PENDING","status":"passed","title":"should only update DRAFT settlement to PENDING","duration":3.8874999999989086,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Settlements Actions","approveSettlement"],"fullName":"Channel Settlements Actions approveSettlement should enforce segregation of duties (cannot approve self-created settlement)","status":"passed","title":"should enforce segregation of duties (cannot approve self-created settlement)","duration":4.584800000000541,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Settlements Actions","approveSettlement"],"fullName":"Channel Settlements Actions approveSettlement should approve settlement and create payment bill if valid","status":"passed","title":"should approve settlement and create payment bill if valid","duration":5.347200000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channel Settlements Actions","markSettlementPaid"],"fullName":"Channel Settlements Actions markSettlementPaid should mark approved settlement as paid and cascade comm records","status":"passed","title":"should mark approved settlement as paid and cascade comm records","duration":3.1974000000009255,"failureMessages":[],"meta":{}}],"startTime":1772266828108,"endTime":1772266828167.1975,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/actions/__tests__/settlements.test.ts"},{"assertionResults":[{"ancestorTitles":["Channels Analytics Engine (渠道分析计算引擎测试)"],"fullName":"Channels Analytics Engine (渠道分析计算引擎测试) 应该正确合并数据并计算 KPI","status":"passed","title":"应该正确合并数据并计算 KPI","duration":5.481999999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Analytics Engine (渠道分析计算引擎测试)"],"fullName":"Channels Analytics Engine (渠道分析计算引擎测试) 当佣金为 0 时，ROI 应返回 0","status":"passed","title":"当佣金为 0 时，ROI 应返回 0","duration":0.7386999999998807,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Analytics Engine (渠道分析计算引擎测试)"],"fullName":"Channels Analytics Engine (渠道分析计算引擎测试) 计算结果应按成交总额降序排列","status":"passed","title":"计算结果应按成交总额降序排列","duration":0.5271999999995387,"failureMessages":[],"meta":{}}],"startTime":1772266868352,"endTime":1772266868358.7388,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/logic/__tests__/analytics-engine.test.ts"},{"assertionResults":[{"ancestorTitles":["Commission Service Logic - calculateOrderCommission"],"fullName":"Commission Service Logic - calculateOrderCommission should calculate fixed commission correctly (integer percentage)","status":"passed","title":"should calculate fixed commission correctly (integer percentage)","duration":6.2849999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service Logic - calculateOrderCommission"],"fullName":"Commission Service Logic - calculateOrderCommission should calculate base price commission correctly","status":"passed","title":"should calculate base price commission correctly","duration":3.1908999999996013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service Logic - calculateOrderCommission Advanced"],"fullName":"Commission Service Logic - calculateOrderCommission Advanced should calculate tiered rates correctly","status":"passed","title":"should calculate tiered rates correctly","duration":1.1860999999989872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service Logic - calculateOrderCommission Advanced"],"fullName":"Commission Service Logic - calculateOrderCommission Advanced should fallback to base rate if tiered rates are invalid","status":"passed","title":"should fallback to base rate if tiered rates are invalid","duration":12.207900000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service - checkAndGenerateCommission"],"fullName":"Commission Service - checkAndGenerateCommission should trigger and insert commission if event matches","status":"passed","title":"should trigger and insert commission if event matches","duration":3.449299999998402,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service - checkAndGenerateCommission"],"fullName":"Commission Service - checkAndGenerateCommission should ignore if event mismatch","status":"passed","title":"should ignore if event mismatch","duration":0.9188000000012835,"failureMessages":[],"meta":{}},{"ancestorTitles":["Commission Service - Clawback Advanced"],"fullName":"Commission Service - Clawback Advanced should generate adjustment for SETTLED commissions","status":"passed","title":"should generate adjustment for SETTLED commissions","duration":6.4408000000003085,"failureMessages":[],"meta":{}}],"startTime":1772266836710,"endTime":1772266836744.441,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/logic/__tests__/commission-service.test.ts"},{"assertionResults":[{"ancestorTitles":["佣金计算逻辑","返佣模式 (COMMISSION)"],"fullName":"佣金计算逻辑 返佣模式 (COMMISSION) 应正确计算固定比例佣金","status":"passed","title":"应正确计算固定比例佣金","duration":3.6379999999990105,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","返佣模式 (COMMISSION)"],"fullName":"佣金计算逻辑 返佣模式 (COMMISSION) 佣金率为0时应返回0","status":"passed","title":"佣金率为0时应返回0","duration":0.5781000000006316,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","返佣模式 (COMMISSION)"],"fullName":"佣金计算逻辑 返佣模式 (COMMISSION) 高佣金率场景","status":"passed","title":"高佣金率场景","duration":0.38099999999940337,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","底价模式 (BASE_PRICE)"],"fullName":"佣金计算逻辑 底价模式 (BASE_PRICE) 应正确计算渠道利润","status":"passed","title":"应正确计算渠道利润","duration":1.3099999999994907,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","底价模式 (BASE_PRICE)"],"fullName":"佣金计算逻辑 底价模式 (BASE_PRICE) 等级折扣率为1时利润等于差价","status":"passed","title":"等级折扣率为1时利润等于差价","duration":0.5025999999998021,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","底价模式 (BASE_PRICE)"],"fullName":"佣金计算逻辑 底价模式 (BASE_PRICE) S级折扣应产生更高利润","status":"passed","title":"S级折扣应产生更高利润","duration":0.5786000000007334,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","等级折扣配置"],"fullName":"佣金计算逻辑 等级折扣配置 默认配置应有正确的等级折扣","status":"passed","title":"默认配置应有正确的等级折扣","duration":0.9143000000003667,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","等级折扣配置"],"fullName":"佣金计算逻辑 等级折扣配置 S级应有最优惠折扣","status":"passed","title":"S级应有最优惠折扣","duration":0.5484999999989668,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","等级折扣配置"],"fullName":"佣金计算逻辑 等级折扣配置 应能正确解析 JSON 配置","status":"passed","title":"应能正确解析 JSON 配置","duration":0.9452999999994063,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","触发模式匹配"],"fullName":"佣金计算逻辑 触发模式匹配 触发模式匹配时应继续处理","status":"passed","title":"触发模式匹配时应继续处理","duration":0.45020000000113214,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","触发模式匹配"],"fullName":"佣金计算逻辑 触发模式匹配 触发模式不匹配时应跳过","status":"passed","title":"触发模式不匹配时应跳过","duration":0.16079999999965366,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","触发模式匹配"],"fullName":"佣金计算逻辑 触发模式匹配 渠道未配置时应使用默认模式","status":"passed","title":"渠道未配置时应使用默认模式","duration":0.2600000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","触发模式匹配"],"fullName":"佣金计算逻辑 触发模式匹配 三种触发模式都应该有效","status":"passed","title":"三种触发模式都应该有效","duration":2.5195999999996275,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","佣金扣回逻辑","全额退款"],"fullName":"佣金计算逻辑 佣金扣回逻辑 全额退款 全额退款比例应为1","status":"passed","title":"全额退款比例应为1","duration":0.3350000000009459,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","佣金扣回逻辑","全额退款"],"fullName":"佣金计算逻辑 佣金扣回逻辑 全额退款 全额退款应作废整个佣金","status":"passed","title":"全额退款应作废整个佣金","duration":0.23019999999996799,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","佣金扣回逻辑","部分退款"],"fullName":"佣金计算逻辑 佣金扣回逻辑 部分退款 50%退款应扣减一半佣金","status":"passed","title":"50%退款应扣减一半佣金","duration":0.22190000000045984,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","佣金扣回逻辑","部分退款"],"fullName":"佣金计算逻辑 佣金扣回逻辑 部分退款 30%退款应扣减30%佣金","status":"passed","title":"30%退款应扣减30%佣金","duration":0.2062000000005355,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","佣金扣回逻辑","部分退款"],"fullName":"佣金计算逻辑 佣金扣回逻辑 部分退款 调整金额应为负数","status":"passed","title":"调整金额应为负数","duration":0.2179999999989377,"failureMessages":[],"meta":{}},{"ancestorTitles":["佣金计算逻辑","幂等性检查"],"fullName":"佣金计算逻辑 幂等性检查 有效状态列表应包含 PENDING 和 SETTLED","status":"passed","title":"有效状态列表应包含 PENDING 和 SETTLED","duration":0.9445999999988999,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","返佣模式 (COMMISSION)"],"fullName":"calculateOrderCommission() 函数 返佣模式 (COMMISSION) 固定比例10%：10000元订单应返1000元佣金","status":"passed","title":"固定比例10%：10000元订单应返1000元佣金","duration":4.586599999998725,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","返佣模式 (COMMISSION)"],"fullName":"calculateOrderCommission() 函数 返佣模式 (COMMISSION) 小数形式费率 0.1 应等同于 10%","status":"passed","title":"小数形式费率 0.1 应等同于 10%","duration":0.9373000000014144,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","返佣模式 (COMMISSION)"],"fullName":"calculateOrderCommission() 函数 返佣模式 (COMMISSION) 订单金额为0时应返回null","status":"passed","title":"订单金额为0时应返回null","duration":0.5259999999998399,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","阶梯返佣 (TIERED)"],"fullName":"calculateOrderCommission() 函数 阶梯返佣 (TIERED) 金额25000应命中20万-50万区间(10%)","status":"passed","title":"金额25000应命中20万-50万区间(10%)","duration":1.1520999999993364,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","阶梯返佣 (TIERED)"],"fullName":"calculateOrderCommission() 函数 阶梯返佣 (TIERED) 阶梯配置为无效JSON时应使用基础费率","status":"passed","title":"阶梯配置为无效JSON时应使用基础费率","duration":2.519000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","阶梯返佣 (TIERED)"],"fullName":"calculateOrderCommission() 函数 阶梯返佣 (TIERED) 阶梯配置为普通对象时应回退到基础费率","status":"passed","title":"阶梯配置为普通对象时应回退到基础费率","duration":0.7970000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","底价模式 (BASE_PRICE)"],"fullName":"calculateOrderCommission() 函数 底价模式 (BASE_PRICE) B级渠道(无额外折扣)应正确计算利润","status":"passed","title":"B级渠道(无额外折扣)应正确计算利润","duration":2.8743000000013126,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","底价模式 (BASE_PRICE)"],"fullName":"calculateOrderCommission() 函数 底价模式 (BASE_PRICE) S级渠道(9折)应有更高利润","status":"passed","title":"S级渠道(9折)应有更高利润","duration":1.8220999999994092,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","底价模式 (BASE_PRICE)"],"fullName":"calculateOrderCommission() 函数 底价模式 (BASE_PRICE) 当利润为负时不应返回佣金","status":"passed","title":"当利润为负时不应返回佣金","duration":0.8677999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","底价模式 (BASE_PRICE)"],"fullName":"calculateOrderCommission() 函数 底价模式 (BASE_PRICE) 底价模式下商品列表获取异常或为空时退回无佣金","status":"passed","title":"底价模式下商品列表获取异常或为空时退回无佣金","duration":1.8114999999997963,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateOrderCommission() 函数","底价模式 (BASE_PRICE)"],"fullName":"calculateOrderCommission() 函数 底价模式 (BASE_PRICE) 全局等级配置格式错误时使用默认折扣率","status":"passed","title":"全局等级配置格式错误时使用默认折扣率","duration":3.5200999999997293,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 回溯线索关联渠道Id时正常工作","status":"passed","title":"回溯线索关联渠道Id时正常工作","duration":2.2872000000006665,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 关联渠道亦缺失时提前退出","status":"passed","title":"关联渠道亦缺失时提前退出","duration":0.38879999999880965,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 当佣金记录已存在时应跳过生成（幂等性）","status":"passed","title":"当佣金记录已存在时应跳过生成（幂等性）","duration":1.1090000000003783,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 触发事件不匹配时应跳过","status":"passed","title":"触发事件不匹配时应跳过","duration":0.4455999999991036,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 未找到订单或渠道时应安全返回","status":"passed","title":"未找到订单或渠道时应安全返回","duration":0.46380000000135624,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkAndGenerateCommission() 集成测试流程"],"fullName":"checkAndGenerateCommission() 集成测试流程 正常流程应生成佣金并更新统计","status":"passed","title":"正常流程应生成佣金并更新统计","duration":0.9225999999998749,"failureMessages":[],"meta":{}},{"ancestorTitles":["handleCommissionClawback() 退款扣回逻辑"],"fullName":"handleCommissionClawback() 退款扣回逻辑 PENDING 状态的佣金应直接作废","status":"passed","title":"PENDING 状态的佣金应直接作废","duration":5.626399999999194,"failureMessages":[],"meta":{}},{"ancestorTitles":["handleCommissionClawback() 退款扣回逻辑"],"fullName":"handleCommissionClawback() 退款扣回逻辑 SETTLED 状态的佣金应生成负向调整记录","status":"passed","title":"SETTLED 状态的佣金应生成负向调整记录","duration":2.005800000000818,"failureMessages":[],"meta":{}},{"ancestorTitles":["handleCommissionClawback() 退款扣回逻辑"],"fullName":"handleCommissionClawback() 退款扣回逻辑 全额退款应标记为 FULL_REFUND","status":"passed","title":"全额退款应标记为 FULL_REFUND","duration":1.6989999999987049,"failureMessages":[],"meta":{}},{"ancestorTitles":["handleCommissionClawback() 退款扣回逻辑"],"fullName":"handleCommissionClawback() 退款扣回逻辑 处理无效状态的佣金和不合法金额跳过逻辑","status":"passed","title":"处理无效状态的佣金和不合法金额跳过逻辑","duration":0.6641999999992549,"failureMessages":[],"meta":{}},{"ancestorTitles":["handleCommissionClawback() 退款扣回逻辑"],"fullName":"handleCommissionClawback() 退款扣回逻辑 订单找不到或没有待处理佣金时直接退出","status":"passed","title":"订单找不到或没有待处理佣金时直接退出","duration":0.5270000000000437,"failureMessages":[],"meta":{}}],"startTime":1772266828695,"endTime":1772266828751.527,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/logic/__tests__/commission.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Channels Stats Engine (渠道统计引擎测试)"],"fullName":"Channels Stats Engine (渠道统计引擎测试) 应该正确计算概览数据","status":"passed","title":"应该正确计算概览数据","duration":2.9495999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Stats Engine (渠道统计引擎测试)"],"fullName":"Channels Stats Engine (渠道统计引擎测试) 当 Leads 为 0 时，转化率应为 0","status":"passed","title":"当 Leads 为 0 时，转化率应为 0","duration":0.550499999999829,"failureMessages":[],"meta":{}},{"ancestorTitles":["Channels Stats Engine (渠道统计引擎测试)"],"fullName":"Channels Stats Engine (渠道统计引擎测试) 应该正确格式化趋势数据","status":"passed","title":"应该正确格式化趋势数据","duration":0.5506000000000313,"failureMessages":[],"meta":{}}],"startTime":1772266869598,"endTime":1772266869602.5505,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/channels/logic/__tests__/stats-engine.test.ts"},{"assertionResults":[{"ancestorTitles":["Customer Activities Actions","getActivities"],"fullName":"Customer Activities Actions getActivities 应成功获取客户的活动列表","status":"passed","title":"应成功获取客户的活动列表","duration":10.344199999999546,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","getActivities"],"fullName":"Customer Activities Actions getActivities 未登录时应返回 Unauthorized","status":"passed","title":"未登录时应返回 Unauthorized","duration":0.9740999999994528,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","getActivities"],"fullName":"Customer Activities Actions getActivities 权限不足时应抛出错误或处理异常","status":"passed","title":"权限不足时应抛出错误或处理异常","duration":1.0895000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","getActivities"],"fullName":"Customer Activities Actions getActivities 应仅查询当前租户的数据","status":"passed","title":"应仅查询当前租户的数据","duration":2.421699999998964,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","createActivity"],"fullName":"Customer Activities Actions createActivity 应成功创建活动并记录审计日志","status":"passed","title":"应成功创建活动并记录审计日志","duration":5.634299999999712,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","createActivity"],"fullName":"Customer Activities Actions createActivity 客户不存在或不属于该租户时应拒绝创建","status":"passed","title":"客户不存在或不属于该租户时应拒绝创建","duration":0.9733999999989464,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","createActivity"],"fullName":"Customer Activities Actions createActivity 输入参数不合法时应由于 Schema 校验失败而抛出异常 (被 catch)","status":"passed","title":"输入参数不合法时应由于 Schema 校验失败而抛出异常 (被 catch)","duration":1.5331999999998516,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","createActivity"],"fullName":"Customer Activities Actions createActivity 创建成功后应精确刷新客户详情缓存 (revalidateTag)","status":"passed","title":"创建成功后应精确刷新客户详情缓存 (revalidateTag)","duration":1.6960999999992055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customer Activities Actions","createActivity"],"fullName":"Customer Activities Actions createActivity 审计日志应包含详细变更信息","status":"passed","title":"审计日志应包含详细变更信息","duration":1.6525000000001455,"failureMessages":[],"meta":{}}],"startTime":1772266845695,"endTime":1772266845721.6526,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/actions/__tests__/activities.test.ts"},{"assertionResults":[{"ancestorTitles":["mergeCustomersAction (合并客户测试 - 审批流重构版)"],"fullName":"mergeCustomersAction (合并客户测试 - 审批流重构版) 1. 成功提交合并审批申请","status":"passed","title":"1. 成功提交合并审批申请","duration":16.648200000001452,"failureMessages":[],"meta":{}},{"ancestorTitles":["mergeCustomersAction (合并客户测试 - 审批流重构版)"],"fullName":"mergeCustomersAction (合并客户测试 - 审批流重构版) 2. 无 MERGE 权限时应抛出 403 错误","status":"passed","title":"2. 无 MERGE 权限时应抛出 403 错误","duration":4.496399999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["mergeCustomersAction (合并客户测试 - 审批流重构版)"],"fullName":"mergeCustomersAction (合并客户测试 - 审批流重构版) 3. 提交审批失败时应抛出对应的错误","status":"passed","title":"3. 提交审批失败时应抛出对应的错误","duration":15.635599999999613,"failureMessages":[],"meta":{}}],"startTime":1772266846389,"endTime":1772266846426.6355,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/actions/__tests__/merge.test.ts"},{"assertionResults":[{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) createCustomer 应委托 CustomerService 并返回新客户","status":"passed","title":"createCustomer 应委托 CustomerService 并返回新客户","duration":1831.5355000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) deleteCustomer 应委托 CustomerService 执行软删除","status":"passed","title":"deleteCustomer 应委托 CustomerService 执行软删除","duration":3.1907999999984895,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) addCustomerAddress 应在事务中创建地址并记录审计日志","status":"passed","title":"addCustomerAddress 应在事务中创建地址并记录审计日志","duration":13.314399999999296,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) deleteCustomerAddress 应校验租户隔离后执行删除","status":"passed","title":"deleteCustomerAddress 应校验租户隔离后执行删除","duration":3.173399999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) setDefaultAddress 应在事务内重置旧默认并设置新默认","status":"passed","title":"setDefaultAddress 应在事务内重置旧默认并设置新默认","duration":2.971299999999246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Mutations (L5)"],"fullName":"Customers Mutations (L5) updateCustomerAddress 应在事务内校验地址归属并更新","status":"passed","title":"updateCustomerAddress 应在事务内校验地址归属并更新","duration":4.016999999999825,"failureMessages":[],"meta":{}}],"startTime":1772266808440,"endTime":1772266810299.017,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/actions/__tests__/mutations.test.ts"},{"assertionResults":[{"ancestorTitles":["Privacy Actions (Phone View Logs)","logPhoneView"],"fullName":"Privacy Actions (Phone View Logs) logPhoneView 应成功记录手机号查看日志","status":"passed","title":"应成功记录手机号查看日志","duration":7.787699999999859,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","logPhoneView"],"fullName":"Privacy Actions (Phone View Logs) logPhoneView 未登录时应抛出错误","status":"passed","title":"未登录时应抛出错误","duration":4.003999999999905,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","logPhoneView"],"fullName":"Privacy Actions (Phone View Logs) logPhoneView 应将查看者角色正确存入日志","status":"passed","title":"应将查看者角色正确存入日志","duration":0.9895999999998821,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","logPhoneView"],"fullName":"Privacy Actions (Phone View Logs) logPhoneView 创建成功后应精确刷新客户详情缓存 (revalidateTag)","status":"passed","title":"创建成功后应精确刷新客户详情缓存 (revalidateTag)","duration":1.7294000000001688,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","getPhoneViewLogs"],"fullName":"Privacy Actions (Phone View Logs) getPhoneViewLogs 应成功获取当前租户下的手机号查看日志","status":"passed","title":"应成功获取当前租户下的手机号查看日志","duration":2.3060000000004948,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","getPhoneViewLogs"],"fullName":"Privacy Actions (Phone View Logs) getPhoneViewLogs 权限不足时应抛出错误","status":"passed","title":"权限不足时应抛出错误","duration":0.9205999999994674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Privacy Actions (Phone View Logs)","getPhoneViewLogs"],"fullName":"Privacy Actions (Phone View Logs) getPhoneViewLogs 未授权租户信息时应抛出错误","status":"passed","title":"未授权租户信息时应抛出错误","duration":0.7956000000003769,"failureMessages":[],"meta":{}}],"startTime":1772266852656,"endTime":1772266852675.7957,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/actions/__tests__/privacy-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Customers Queries (L5)"],"fullName":"Customers Queries (L5) getCustomerDetail 应根据 ID 获取客户详情","status":"passed","title":"getCustomerDetail 应根据 ID 获取客户详情","duration":2319.469399999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Queries (L5)"],"fullName":"Customers Queries (L5) getCustomerDetail 客户不存在时应返回 undefined","status":"passed","title":"getCustomerDetail 客户不存在时应返回 undefined","duration":1.3857000000007247,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Activities (L5)"],"fullName":"Customers Activities (L5) getActivities 应返回客户跟进记录列表","status":"passed","title":"getActivities 应返回客户跟进记录列表","duration":11.470299999999042,"failureMessages":[],"meta":{}},{"ancestorTitles":["Customers Activities (L5)"],"fullName":"Customers Activities (L5) createActivity 应创建跟进记录并记录审计日志","status":"passed","title":"createActivity 应创建跟进记录并记录审计日志","duration":5.337999999999738,"failureMessages":[],"meta":{}}],"startTime":1772266808006,"endTime":1772266810345.338,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/customers/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Mock AP Test"],"fullName":"Mock AP Test pass","status":"passed","title":"pass","duration":1.655699999999797,"failureMessages":[],"meta":{}}],"startTime":1772266870397,"endTime":1772266870398.6558,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/finance/ap/__tests__/ap-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Lead Analytics (L5)","getLeadChannelROIStats"],"fullName":"Lead Analytics (L5) getLeadChannelROIStats 应当正确计算各大渠道的转化与平均单价","status":"failed","title":"应当正确计算各大渠道的转化与平均单价","duration":5101.050499999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/analytics.test.ts:72:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["Lead Analytics (L5)","getLeadChannelROIStats"],"fullName":"Lead Analytics (L5) getLeadChannelROIStats 应当处理空数据情况","status":"passed","title":"应当处理空数据情况","duration":15.293899999998757,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Analytics (L5)","getLeadChannelROIStats"],"fullName":"Lead Analytics (L5) getLeadChannelROIStats 应当正确处理订单数为 0 的情况（避免除以零）","status":"passed","title":"应当正确处理订单数为 0 的情况（避免除以零）","duration":3.537899999999354,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Analytics (L5)","getLeadChannelROIStats"],"fullName":"Lead Analytics (L5) getLeadChannelROIStats 应当记录性能日志","status":"passed","title":"应当记录性能日志","duration":5.9592999999986205,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Analytics (L5)","getLeadChannelROIStats"],"fullName":"Lead Analytics (L5) getLeadChannelROIStats 应当拦截未授权访问","status":"passed","title":"应当拦截未授权访问","duration":3.0816000000013446,"failureMessages":[],"meta":{}}],"startTime":1772266798975,"endTime":1772266804105.0815,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/analytics.test.ts"},{"assertionResults":[{"ancestorTitles":["importLeads"],"fullName":"importLeads should successfully import valid leads with concurrency","status":"passed","title":"should successfully import valid leads with concurrency","duration":24.82879999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["importLeads"],"fullName":"importLeads should handle duplicates correctly","status":"passed","title":"should handle duplicates correctly","duration":2.5658000000003085,"failureMessages":[],"meta":{}},{"ancestorTitles":["importLeads"],"fullName":"importLeads should handle validation errors","status":"passed","title":"should handle validation errors","duration":3.0625,"failureMessages":[],"meta":{}},{"ancestorTitles":["importLeads"],"fullName":"importLeads should include batch traceability in createLead calls","status":"passed","title":"should include batch traceability in createLead calls","duration":2.2287000000014814,"failureMessages":[],"meta":{}}],"startTime":1772266843555,"endTime":1772266843588.2288,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/import.test.ts"},{"assertionResults":[{"ancestorTitles":["Lead Mutations (L5)","createLead"],"fullName":"Lead Mutations (L5) createLead 应当成功创建线索并返回数据","status":"passed","title":"应当成功创建线索并返回数据","duration":3867.374,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","createLead"],"fullName":"Lead Mutations (L5) createLead 检测到重复线索时应返回 DUPLICATE 状态","status":"passed","title":"检测到重复线索时应返回 DUPLICATE 状态","duration":3.8391000000010536,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","createLead"],"fullName":"Lead Mutations (L5) createLead 未登录时应抛出 Unauthorized","status":"passed","title":"未登录时应抛出 Unauthorized","duration":4.407600000000457,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","updateLead"],"fullName":"Lead Mutations (L5) updateLead 应当委托 LeadService.updateLead 并返回成功结果","status":"passed","title":"应当委托 LeadService.updateLead 并返回成功结果","duration":9.155800000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","assignLead"],"fullName":"Lead Mutations (L5) assignLead 应当调用 LeadService.assignLead 并传入正确参数","status":"passed","title":"应当调用 LeadService.assignLead 并传入正确参数","duration":3.7379999999993743,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","addFollowup"],"fullName":"Lead Mutations (L5) addFollowup 应当调用 LeadService.addActivity","status":"passed","title":"应当调用 LeadService.addActivity","duration":4.790599999998449,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","voidLead"],"fullName":"Lead Mutations (L5) voidLead 应当成功作废线索","status":"passed","title":"应当成功作废线索","duration":2.599500000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","voidLead"],"fullName":"Lead Mutations (L5) voidLead Service 抛出异常时应返回失败","status":"passed","title":"Service 抛出异常时应返回失败","duration":11.642299999999523,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","releaseToPool"],"fullName":"Lead Mutations (L5) releaseToPool 应当释放线索到公海池","status":"passed","title":"应当释放线索到公海池","duration":2.6899999999986903,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","claimFromPool"],"fullName":"Lead Mutations (L5) claimFromPool 应当从公海池认领线索","status":"passed","title":"应当从公海池认领线索","duration":2.1864000000005035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","convertLead"],"fullName":"Lead Mutations (L5) convertLead 应当转化线索为客户并返回新客户 ID","status":"passed","title":"应当转化线索为客户并返回新客户 ID","duration":2.7969000000011874,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","importLeads"],"fullName":"Lead Mutations (L5) importLeads 应当批量导入并统计成功/失败数","status":"passed","title":"应当批量导入并统计成功/失败数","duration":4.580200000000332,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Mutations (L5)","importLeads"],"fullName":"Lead Mutations (L5) importLeads 格式不合法的行应记录错误而不中断","status":"passed","title":"格式不合法的行应记录错误而不中断","duration":3.5446999999985565,"failureMessages":[],"meta":{}}],"startTime":1772266798937,"endTime":1772266802863.5447,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/mutations.test.ts"},{"assertionResults":[{"ancestorTitles":["Lead Queries (L5)","getLeads"],"fullName":"Lead Queries (L5) getLeads 应当返回分页的线索数据并支持状态过滤","status":"failed","title":"应当返回分页的线索数据并支持状态过滤","duration":5103.062399999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/queries.test.ts:58:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getLeads"],"fullName":"Lead Queries (L5) getLeads 未登录时应抛出错误","status":"passed","title":"未登录时应抛出错误","duration":291.3822999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getLeadById"],"fullName":"Lead Queries (L5) getLeadById 应当返回存在的线索详情","status":"passed","title":"应当返回存在的线索详情","duration":9.882299999999304,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getLeadById"],"fullName":"Lead Queries (L5) getLeadById 未找到线索时返回 null","status":"passed","title":"未找到线索时返回 null","duration":1.8299999999999272,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getLeadTimeline"],"fullName":"Lead Queries (L5) getLeadTimeline 应当必须验证线索归属于当前租户才能返回活动记录","status":"passed","title":"应当必须验证线索归属于当前租户才能返回活动记录","duration":3.8483999999989464,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getLeadTimeline"],"fullName":"Lead Queries (L5) getLeadTimeline 如果线索不属于当前租户则抛出错误","status":"passed","title":"如果线索不属于当前租户则抛出错误","duration":1.529500000000553,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getChannels"],"fullName":"Lead Queries (L5) getChannels 应当返回渠道列表","status":"passed","title":"应当返回渠道列表","duration":3.0075999999990017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Queries (L5)","getSalesUsers"],"fullName":"Lead Queries (L5) getSalesUsers 应当返回同租户下的有效销售人员","status":"passed","title":"应当返回同租户下的有效销售人员","duration":2.8438999999998487,"failureMessages":[],"meta":{}}],"startTime":1772266798936,"endTime":1772266804355.844,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Lead Scoring & Duplicate Check (L5)","calculateLeadScore"],"fullName":"Lead Scoring & Duplicate Check (L5) calculateLeadScore 应当按照权重公式正确计算评分","status":"passed","title":"应当按照权重公式正确计算评分","duration":2778.7812000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Scoring & Duplicate Check (L5)","calculateLeadScore"],"fullName":"Lead Scoring & Duplicate Check (L5) calculateLeadScore 线索不存在时应返回错误","status":"passed","title":"线索不存在时应返回错误","duration":3.1098999999994703,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Scoring & Duplicate Check (L5)","checkLeadDuplicate"],"fullName":"Lead Scoring & Duplicate Check (L5) checkLeadDuplicate 手机号匹配时应返回 isDuplicate: true","status":"passed","title":"手机号匹配时应返回 isDuplicate: true","duration":4.562200000000303,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Scoring & Duplicate Check (L5)","checkLeadDuplicate"],"fullName":"Lead Scoring & Duplicate Check (L5) checkLeadDuplicate 无手机号和地址时应返回 isDuplicate: false","status":"passed","title":"无手机号和地址时应返回 isDuplicate: false","duration":2.3555000000014843,"failureMessages":[],"meta":{}},{"ancestorTitles":["Lead Scoring & Duplicate Check (L5)","batchCheckLeadDuplicates"],"fullName":"Lead Scoring & Duplicate Check (L5) batchCheckLeadDuplicates 应当批量检查并返回统计结果","status":"passed","title":"应当批量检查并返回统计结果","duration":8.787599999999657,"failureMessages":[],"meta":{}}],"startTime":1772266803743,"endTime":1772266806542.7876,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/leads/actions/__tests__/scoring.test.ts"},{"assertionResults":[{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow self-transition","status":"passed","title":"should allow self-transition","duration":2.77179999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow valid transitions","status":"passed","title":"should allow valid transitions","duration":1.437699999999495,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should reject invalid transitions","status":"passed","title":"should reject invalid transitions","duration":0.4029000000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow cancellation from most states","status":"passed","title":"should allow cancellation from most states","duration":0.6541999999999462,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should allow HALTED from specific states","status":"passed","title":"should allow HALTED from specific states","duration":0.6484000000000378,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should recover from HALTED to production states","status":"passed","title":"should recover from HALTED to production states","duration":0.2385999999996784,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","validateTransition"],"fullName":"OrderStateMachine validateTransition should not recover from HALTED to arbitrary states","status":"passed","title":"should not recover from HALTED to arbitrary states","duration":0.32520000000022264,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","getNextStates"],"fullName":"OrderStateMachine getNextStates should return correct next states","status":"passed","title":"should return correct next states","duration":3.021299999999428,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","canCancel"],"fullName":"OrderStateMachine canCancel should return true for non-terminal states","status":"passed","title":"should return true for non-terminal states","duration":0.7892000000001644,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine","canCancel"],"fullName":"OrderStateMachine canCancel should return false for terminal states","status":"passed","title":"should return false for terminal states","duration":0.3344999999999345,"failureMessages":[],"meta":{}}],"startTime":1772266862871,"endTime":1772266862883.3345,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/logic/__tests__/order-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["OrderStateMachine Auto-Transition"],"fullName":"OrderStateMachine Auto-Transition INSTALLATION_COMPLETED 应自动流转至 COMPLETED","status":"passed","title":"INSTALLATION_COMPLETED 应自动流转至 COMPLETED","duration":1.8623999999999796,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine Auto-Transition"],"fullName":"OrderStateMachine Auto-Transition PENDING_DELIVERY 目前暂无自动流转规则","status":"passed","title":"PENDING_DELIVERY 目前暂无自动流转规则","duration":0.549199999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine Auto-Transition"],"fullName":"OrderStateMachine Auto-Transition DRAFT 状态不应有自动流转","status":"passed","title":"DRAFT 状态不应有自动流转","duration":0.349699999999757,"failureMessages":[],"meta":{}},{"ancestorTitles":["OrderStateMachine Auto-Transition"],"fullName":"OrderStateMachine Auto-Transition 验证 validateTransition 对自动流转目标的兼容性","status":"passed","title":"验证 validateTransition 对自动流转目标的兼容性","duration":0.8380000000001928,"failureMessages":[],"meta":{}}],"startTime":1772266869634,"endTime":1772266869637.838,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/logic/__tests__/state-machine-auto.test.ts"},{"assertionResults":[{"ancestorTitles":["Comprehensive Calculation Engine Verification","Curtain Strategy Edge Cases"],"fullName":"Comprehensive Calculation Engine Verification Curtain Strategy Edge Cases 定高模式：高度刚好达到临界点 (fabric=280, cutHeight=280) - 不应报警","status":"passed","title":"定高模式：高度刚好达到临界点 (fabric=280, cutHeight=280) - 不应报警","duration":3.1953999999996086,"failureMessages":[],"meta":{}},{"ancestorTitles":["Comprehensive Calculation Engine Verification","Curtain Strategy Edge Cases"],"fullName":"Comprehensive Calculation Engine Verification Curtain Strategy Edge Cases 定高模式：高度略微超过临界点 (diff <= 13cm) - 应提示让渡帘头","status":"passed","title":"定高模式：高度略微超过临界点 (diff <= 13cm) - 应提示让渡帘头","duration":0.7085999999999331,"failureMessages":[],"meta":{}},{"ancestorTitles":["Comprehensive Calculation Engine Verification","Curtain Strategy Edge Cases"],"fullName":"Comprehensive Calculation Engine Verification Curtain Strategy Edge Cases 定宽模式：极宽窗户 (12米) - 应正确计算幅数","status":"passed","title":"定宽模式：极宽窗户 (12米) - 应正确计算幅数","duration":0.3809000000001106,"failureMessages":[],"meta":{}},{"ancestorTitles":["Comprehensive Calculation Engine Verification","Wallpaper Strategy Edge Cases"],"fullName":"Comprehensive Calculation Engine Verification Wallpaper Strategy Edge Cases 墙纸对花逻辑：花距极大 (64cm) 导致每卷可切条数减少","status":"passed","title":"墙纸对花逻辑：花距极大 (64cm) 导致每卷可切条数减少","duration":1.0615000000007058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Comprehensive Calculation Engine Verification","Wallpaper Strategy Edge Cases"],"fullName":"Comprehensive Calculation Engine Verification Wallpaper Strategy Edge Cases 墙纸逻辑：高度正好是 2.5m (10m 卷理应切 4 条，但考虑 cutLoss 只能切 3 条)","status":"passed","title":"墙纸逻辑：高度正好是 2.5m (10m 卷理应切 4 条，但考虑 cutLoss 只能切 3 条)","duration":0.42559999999957654,"failureMessages":[],"meta":{}}],"startTime":1772266869039,"endTime":1772266869045.4255,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/calc-strategies/__tests__/comprehensive-calc.test.ts"},{"assertionResults":[{"ancestorTitles":["CurtainStrategy"],"fullName":"CurtainStrategy Calculate Fixed Height - Exact Match","status":"passed","title":"Calculate Fixed Height - Exact Match","duration":3.547700000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["CurtainStrategy"],"fullName":"CurtainStrategy Calculate Fixed Height - Warning (Header Yield)","status":"passed","title":"Calculate Fixed Height - Warning (Header Yield)","duration":1.0280000000002474,"failureMessages":[],"meta":{}},{"ancestorTitles":["CurtainStrategy"],"fullName":"CurtainStrategy Calculate Fixed Width","status":"passed","title":"Calculate Fixed Width","duration":0.4750999999996566,"failureMessages":[],"meta":{}},{"ancestorTitles":["CurtainStrategy"],"fullName":"CurtainStrategy Calculate Single Opening Loss","status":"passed","title":"Calculate Single Opening Loss","duration":0.9956999999994878,"failureMessages":[],"meta":{}}],"startTime":1772266868741,"endTime":1772266868747.9956,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/calc-strategies/__tests__/curtain-strategy.test.ts"},{"assertionResults":[{"ancestorTitles":["WallpaperStrategy","墙纸计算 (WALLPAPER - 卷数计算)"],"fullName":"WallpaperStrategy 墙纸计算 (WALLPAPER - 卷数计算) 应正确计算基础墙纸卷数 - 单墙面","status":"passed","title":"应正确计算基础墙纸卷数 - 单墙面","duration":3.2820999999994456,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","墙纸计算 (WALLPAPER - 卷数计算)"],"fullName":"WallpaperStrategy 墙纸计算 (WALLPAPER - 卷数计算) 应正确计算多墙段墙纸卷数","status":"passed","title":"应正确计算多墙段墙纸卷数","duration":0.6409000000003289,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","墙纸计算 (WALLPAPER - 卷数计算)"],"fullName":"WallpaperStrategy 墙纸计算 (WALLPAPER - 卷数计算) 应正确处理花距对花逻辑","status":"passed","title":"应正确处理花距对花逻辑","duration":0.36590000000069267,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","墙布计算 (WALLCLOTH - 面积计算)"],"fullName":"WallpaperStrategy 墙布计算 (WALLCLOTH - 面积计算) 应正确计算墙布面积 - 单墙面","status":"passed","title":"应正确计算墙布面积 - 单墙面","duration":1.2007000000003245,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","墙布计算 (WALLCLOTH - 面积计算)"],"fullName":"WallpaperStrategy 墙布计算 (WALLCLOTH - 面积计算) 应正确计算多墙段墙布用量","status":"passed","title":"应正确计算多墙段墙布用量","duration":0.49030000000038854,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","墙布计算 (WALLCLOTH - 面积计算)"],"fullName":"WallpaperStrategy 墙布计算 (WALLCLOTH - 面积计算) 应在墙高超过幅宽时发出警告","status":"passed","title":"应在墙高超过幅宽时发出警告","duration":0.7281000000002678,"failureMessages":[],"meta":{}},{"ancestorTitles":["WallpaperStrategy","默认配置"],"fullName":"WallpaperStrategy 默认配置 应正确设置默认损耗参数","status":"passed","title":"应正确设置默认损耗参数","duration":0.7977000000000771,"failureMessages":[],"meta":{}}],"startTime":1772266868558,"endTime":1772266868566.7976,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/calc-strategies/__tests__/wallpaper-strategy.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Actions Audit Integration","createQuote"],"fullName":"Quote Actions Audit Integration createQuote 创建报价单时应记录审计日志","status":"passed","title":"创建报价单时应记录审计日志","duration":13.452299999999013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","updateQuote"],"fullName":"Quote Actions Audit Integration updateQuote 更新报价单折扣应记录审计日志","status":"passed","title":"更新报价单折扣应记录审计日志","duration":6.008499999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","copyQuote"],"fullName":"Quote Actions Audit Integration copyQuote 复制报价单应记录审计日志","status":"passed","title":"复制报价单应记录审计日志","duration":2.082399999999325,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 提交报价单应记录审计日志","status":"passed","title":"提交报价单应记录审计日志","duration":3.076499999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 拒绝报价单应记录审计日志","status":"passed","title":"拒绝报价单应记录审计日志","duration":1.7234000000007654,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 锁定报价单应记录审计日志","status":"passed","title":"锁定报价单应记录审计日志","duration":3.2268000000003667,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 解锁报价单应记录审计日志","status":"passed","title":"解锁报价单应记录审计日志","duration":2.0015000000003056,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 审批报价单应记录审计日志","status":"passed","title":"审批报价单应记录审计日志","duration":1.2951000000011845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 转订单应记录审计日志","status":"passed","title":"转订单应记录审计日志","duration":2.359199999998964,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Actions Audit Integration","Lifecycle Actions"],"fullName":"Quote Actions Audit Integration Lifecycle Actions 创建新版本应记录审计日志","status":"passed","title":"创建新版本应记录审计日志","duration":2.203299999999217,"failureMessages":[],"meta":{}}],"startTime":1772266833466,"endTime":1772266833505.2034,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/audit-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Calc Actions (L5)"],"fullName":"Calc Actions (L5) getCalcPreview 应当调用对应的计算策略并返回结果","status":"passed","title":"getCalcPreview 应当调用对应的计算策略并返回结果","duration":1165.762200000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Calc Actions (L5)"],"fullName":"Calc Actions (L5) getCalcPreview 缺少登录信息时抛出异常","status":"passed","title":"getCalcPreview 缺少登录信息时抛出异常","duration":42.31810000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["Calc Actions (L5)"],"fullName":"Calc Actions (L5) recalculateQuote 应当遍历所有明细项并重新计算总计，同时更新 DB","status":"passed","title":"recalculateQuote 应当遍历所有明细项并重新计算总计，同时更新 DB","duration":6.051400000000285,"failureMessages":[],"meta":{}},{"ancestorTitles":["Calc Actions (L5)"],"fullName":"Calc Actions (L5) recalculateQuote 当查询不到报价单时应报错返回","status":"passed","title":"recalculateQuote 当查询不到报价单时应报错返回","duration":1.2827999999990425,"failureMessages":[],"meta":{}},{"ancestorTitles":["Calc Actions (L5)"],"fullName":"Calc Actions (L5) recalculateQuote 缺少登录信息时应被拦截","status":"passed","title":"recalculateQuote 缺少登录信息时应被拦截","duration":0.6526000000012573,"failureMessages":[],"meta":{}}],"startTime":1772266811721,"endTime":1772266812937.6526,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/calc-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Calculation Engine Integration (recalculateQuote)"],"fullName":"Calculation Engine Integration (recalculateQuote) should calculate Curtain quantity and update DB","status":"passed","title":"should calculate Curtain quantity and update DB","duration":7.988400000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Calculation Engine Integration (recalculateQuote)"],"fullName":"Calculation Engine Integration (recalculateQuote) should calculate Wallcloth usage (Perimeter) and update DB","status":"passed","title":"should calculate Wallcloth usage (Perimeter) and update DB","duration":2.201299999999719,"failureMessages":[],"meta":{}}],"startTime":1772266864506,"endTime":1772266864516.2014,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/calc-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuote 应当验证租户隔离并返回报价详情","status":"passed","title":"getQuote 应当验证租户隔离并返回报价详情","duration":21.146600000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuotes 应当支持分页和租户隔离","status":"passed","title":"getQuotes 应当支持分页和租户隔离","duration":4.178100000000086,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuoteBundleById 应当处理未授权访问并返回带有 subQuotes 的数据","status":"passed","title":"getQuoteBundleById 应当处理未授权访问并返回带有 subQuotes 的数据","duration":2.1518999999998414,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuoteVersions 应当隔离租户并返回关联根节点的所有版本","status":"passed","title":"getQuoteVersions 应当隔离租户并返回关联根节点的所有版本","duration":1.7894999999998618,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuoteAuditLogs 应当先验证报价单归属然后再查询日志","status":"passed","title":"getQuoteAuditLogs 应当先验证报价单归属然后再查询日志","duration":1.5195999999996275,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Queries (L5)"],"fullName":"Quote Queries (L5) getQuoteAuditLogs 如果报价单不属于当前租户应当抛出异常","status":"passed","title":"getQuoteAuditLogs 如果报价单不属于当前租户应当抛出异常","duration":3.170900000000074,"failureMessages":[],"meta":{}}],"startTime":1772266834648,"endTime":1772266834682.171,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) createQuoteBundle 应创建报价套餐并指定 rootQuoteId","status":"passed","title":"createQuoteBundle 应创建报价套餐并指定 rootQuoteId","duration":1620.7736999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) createQuote 应创建报价单并触发更新套餐总额 (如果带 bundleId)","status":"passed","title":"createQuote 应创建报价单并触发更新套餐总额 (如果带 bundleId)","duration":3.6965000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) updateQuote 应根据折扣和原价计算出 finalAmount","status":"passed","title":"updateQuote 应根据折扣和原价计算出 finalAmount","duration":7.65270000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) copyQuote 应当调用 QuoteService 委托处理新复制","status":"passed","title":"copyQuote 应当调用 QuoteService 委托处理新复制","duration":3.5681000000004133,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) 在查询不到报价单时 updateQuote 会被阻拦并抛出错误","status":"passed","title":"在查询不到报价单时 updateQuote 会被阻拦并抛出错误","duration":6.472800000001371,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) updateQuote 版本冲突：传入旧 version 时应抛出 CONCURRENCY_CONFLICT","status":"passed","title":"updateQuote 版本冲突：传入旧 version 时应抛出 CONCURRENCY_CONFLICT","duration":3.0469999999986612,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quotes CRUD Actions (L5)"],"fullName":"Quotes CRUD Actions (L5) updateQuote 正常版本更新：传入正确 version 应更新成功且 set 含 version 自增表达式","status":"passed","title":"updateQuote 正常版本更新：传入正确 version 应更新成功且 set 含 version 自增表达式","duration":2.666000000001077,"failureMessages":[],"meta":{}}],"startTime":1772266811438,"endTime":1772266813086.666,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/quote-crud.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Items CRUD Actions (L5)"],"fullName":"Quote Items CRUD Actions (L5) createQuoteItem 应当成功记录并在通过计算策略获取到用量","status":"passed","title":"createQuoteItem 应当成功记录并在通过计算策略获取到用量","duration":1627.0306999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Items CRUD Actions (L5)"],"fullName":"Quote Items CRUD Actions (L5) updateQuoteItem 应当成功读取旧数据合并计算并更新","status":"passed","title":"updateQuoteItem 应当成功读取旧数据合并计算并更新","duration":3.863599999998769,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Items CRUD Actions (L5)"],"fullName":"Quote Items CRUD Actions (L5) deleteQuoteItem 应当记录审计日志并删除","status":"passed","title":"deleteQuoteItem 应当记录审计日志并删除","duration":3.390400000000227,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Items CRUD Actions (L5)"],"fullName":"Quote Items CRUD Actions (L5) reorderQuoteItems 应在事务内批量刷新排序","status":"passed","title":"reorderQuoteItems 应在事务内批量刷新排序","duration":3.122300000000905,"failureMessages":[],"meta":{}}],"startTime":1772266810906,"endTime":1772266812544.1223,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/quote-item-crud.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) submitQuote 应检查编辑权限并调用生命周期服务","status":"passed","title":"submitQuote 应检查编辑权限并调用生命周期服务","duration":1484.2215999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) rejectQuote 应检查审批权限并带上拒绝理由","status":"passed","title":"rejectQuote 应检查审批权限并带上拒绝理由","duration":4.877200000000812,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) lockQuote 应检查编辑权限和当前锁定状态，并直接更新 DB","status":"passed","title":"lockQuote 应检查编辑权限和当前锁定状态，并直接更新 DB","duration":47.40760000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) lockQuote 遇到已锁定的报价单会抛出异常","status":"passed","title":"lockQuote 遇到已锁定的报价单会抛出异常","duration":4.654300000000148,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) unlockQuote 应清除锁定标记","status":"passed","title":"unlockQuote 应清除锁定标记","duration":2.4980000000014115,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) approveQuote 应验证审批权限并调用生命周期服务","status":"passed","title":"approveQuote 应验证审批权限并调用生命周期服务","duration":1.624599999999191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) convertQuoteToOrder 应验证新建订单权限并调用生命周期服务","status":"passed","title":"convertQuoteToOrder 应验证新建订单权限并调用生命周期服务","duration":3.2097999999987223,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) createNextVersion 应当验证创建报价单权限并交由 QuoteService 创建新版本","status":"passed","title":"createNextVersion 应当验证创建报价单权限并交由 QuoteService 创建新版本","duration":3.0666000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) 执行缺少权限操作时应被阻断","status":"passed","title":"执行缺少权限操作时应被阻断","duration":1.874099999999089,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) lockQuote 版本冲突：传入旧 version 后 db.update 返回空时应抛出并发错误","status":"passed","title":"lockQuote 版本冲突：传入旧 version 后 db.update 返回空时应抛出并发错误","duration":1.70640000000094,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) lockQuote 正常锁定时 set 调用应包含 version 自增表达式","status":"passed","title":"lockQuote 正常锁定时 set 调用应包含 version 自增表达式","duration":1.1736000000000786,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) unlockQuote 应同步递增 version","status":"passed","title":"unlockQuote 应同步递增 version","duration":1.2185000000008586,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) submitQuote 正常版本检查：传入 version 时应先调用 preflightVersionCheck（即触发 db.update）","status":"passed","title":"submitQuote 正常版本检查：传入 version 时应先调用 preflightVersionCheck（即触发 db.update）","duration":1.524199999999837,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) submitQuote 版本冲突：传入 version 但 db.update 未找到记录时应抛出错误","status":"passed","title":"submitQuote 版本冲突：传入 version 但 db.update 未找到记录时应抛出错误","duration":1.1451000000015483,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) approveQuote 正常版本检查逻辑同 submitQuote","status":"passed","title":"approveQuote 正常版本检查逻辑同 submitQuote","duration":1.6166999999986729,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle Actions (L5)"],"fullName":"Quote Lifecycle Actions (L5) rejectQuote 正常版本检查逻辑同 submitQuote","status":"passed","title":"rejectQuote 正常版本检查逻辑同 submitQuote","duration":1.3814000000002125,"failureMessages":[],"meta":{}}],"startTime":1772266810703,"endTime":1772266812271.3813,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/quote-lifecycle-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["报价单模块 - 租户隔离安全测试","getQuote - 查询隔离"],"fullName":"报价单模块 - 租户隔离安全测试 getQuote - 查询隔离 应该阻止租户 A 访问租户 B 的报价单","status":"passed","title":"应该阻止租户 A 访问租户 B 的报价单","duration":4895.660899999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 租户隔离安全测试","getQuote - 查询隔离"],"fullName":"报价单模块 - 租户隔离安全测试 getQuote - 查询隔离 应该允许访问同租户的报价单","status":"passed","title":"应该允许访问同租户的报价单","duration":1.2921000000005733,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 租户隔离安全测试","未认证用户访问"],"fullName":"报价单模块 - 租户隔离安全测试 未认证用户访问 应该拒绝未登录用户的请求","status":"passed","title":"应该拒绝未登录用户的请求","duration":3.3144999999985885,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 租户隔离安全测试","未认证用户访问"],"fullName":"报价单模块 - 租户隔离安全测试 未认证用户访问 应该拒绝没有 tenantId 的用户","status":"passed","title":"应该拒绝没有 tenantId 的用户","duration":1.1315000000013242,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 状态流转安全测试"],"fullName":"报价单模块 - 状态流转安全测试 不应允许非 DRAFT/REJECTED 状态的报价单提交","status":"passed","title":"不应允许非 DRAFT/REJECTED 状态的报价单提交","duration":0.24070000000028813,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 状态流转安全测试"],"fullName":"报价单模块 - 状态流转安全测试 不应允许非 PENDING_CUSTOMER/APPROVED 状态的报价单转订单","status":"passed","title":"不应允许非 PENDING_CUSTOMER/APPROVED 状态的报价单转订单","duration":0.1452000000008411,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 数据防泄露 (Data Leakage Prevention)"],"fullName":"报价单模块 - 数据防泄露 (Data Leakage Prevention) getQuote 不应请求 costPrice 字段","status":"passed","title":"getQuote 不应请求 costPrice 字段","duration":2.2427999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 跨租户操作防护"],"fullName":"报价单模块 - 跨租户操作防护 reorderQuoteItems 应该验证报价单归属","status":"passed","title":"reorderQuoteItems 应该验证报价单归属","duration":3656.2350000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 跨租户操作防护"],"fullName":"报价单模块 - 跨租户操作防护 updateQuoteItem 应该验证行项目归属","status":"passed","title":"updateQuoteItem 应该验证行项目归属","duration":5456.841899999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 跨租户操作防护"],"fullName":"报价单模块 - 跨租户操作防护 lockQuote 应该从 context 获取 tenantId","status":"passed","title":"lockQuote 应该从 context 获取 tenantId","duration":5.65769999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 跨租户操作防护"],"fullName":"报价单模块 - 跨租户操作防护 createRoom 应该验证 quoteId 归属 (防止 IDOR)","status":"passed","title":"createRoom 应该验证 quoteId 归属 (防止 IDOR)","duration":6.808700000001409,"failureMessages":[],"meta":{}},{"ancestorTitles":["报价单模块 - 跨租户操作防护"],"fullName":"报价单模块 - 跨租户操作防护 createQuoteItem 应该验证 quoteId 归属 (防止 IDOR)","status":"passed","title":"createQuoteItem 应该验证 quoteId 归属 (防止 IDOR)","duration":6.001200000002427,"failureMessages":[],"meta":{}}],"startTime":1772266796920,"endTime":1772266810958.0012,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/actions/__tests__/security.test.ts"},{"assertionResults":[{"ancestorTitles":["Auto-close Action"],"fullName":"Auto-close Action 如果没有待结案订单，应返回 0 计数","status":"passed","title":"如果没有待结案订单，应返回 0 计数","duration":6.4848000000001775,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auto-close Action"],"fullName":"Auto-close Action 应成功处理待结案订单","status":"passed","title":"应成功处理待结案订单","duration":8.110200000000987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auto-close Action"],"fullName":"Auto-close Action 当部分订单处理失败时，应记录错误信息但不中断整体流程","status":"passed","title":"当部分订单处理失败时，应记录错误信息但不中断整体流程","duration":4.305599999999686,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auto-close Action"],"fullName":"Auto-close Action 未授权时应禁止操作","status":"passed","title":"未授权时应禁止操作","duration":1.4352000000017142,"failureMessages":[],"meta":{}}],"startTime":1772266855569,"endTime":1772266855589.4353,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/auto-close.test.ts"},{"assertionResults":[{"ancestorTitles":["Change Order Actions","createChangeRequestAction"],"fullName":"Change Order Actions createChangeRequestAction 应成功创建变更请求并提交审批","status":"passed","title":"应成功创建变更请求并提交审批","duration":20.442299999999705,"failureMessages":[],"meta":{}},{"ancestorTitles":["Change Order Actions","approveChangeRequestAction"],"fullName":"Change Order Actions approveChangeRequestAction 应成功审批通过变更请求","status":"passed","title":"应成功审批通过变更请求","duration":2.169600000000173,"failureMessages":[],"meta":{}},{"ancestorTitles":["Change Order Actions","approveChangeRequestAction"],"fullName":"Change Order Actions approveChangeRequestAction 权限不足时应拒绝审批","status":"passed","title":"权限不足时应拒绝审批","duration":4.381800000000112,"failureMessages":[],"meta":{}}],"startTime":1772266852506,"endTime":1772266852534.3818,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/change-order.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Creation Actions","createOrderFromQuote"],"fullName":"Order Creation Actions createOrderFromQuote 成功从报价单创建订单","status":"passed","title":"成功从报价单创建订单","duration":14.833399999999529,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Creation Actions","createOrderFromQuote"],"fullName":"Order Creation Actions createOrderFromQuote 报价单不存在时抛出异常","status":"passed","title":"报价单不存在时抛出异常","duration":4.583599999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Creation Actions","createOrderFromQuote"],"fullName":"Order Creation Actions createOrderFromQuote 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":0.7732999999998356,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Creation Actions","createOrderFromQuote"],"fullName":"Order Creation Actions createOrderFromQuote OrderService 异常时正确传播错误","status":"passed","title":"OrderService 异常时正确传播错误","duration":24.133600000000115,"failureMessages":[],"meta":{}}],"startTime":1772266848699,"endTime":1772266848744.1335,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/creation.test.ts"},{"assertionResults":[{"ancestorTitles":["Halt Actions","haltOrderAction"],"fullName":"Halt Actions haltOrderAction 应成功叫停订单","status":"passed","title":"应成功叫停订单","duration":9.711600000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["Halt Actions","haltOrderAction"],"fullName":"Halt Actions haltOrderAction 权限不足时应拒绝","status":"passed","title":"权限不足时应拒绝","duration":8.852000000000771,"failureMessages":[],"meta":{}},{"ancestorTitles":["Halt Actions","getHaltedOrders"],"fullName":"Halt Actions getHaltedOrders 应返回带叫停天数信息的列表","status":"passed","title":"应返回带叫停天数信息的列表","duration":1.997400000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["Halt Actions","resumeOrderAction"],"fullName":"Halt Actions resumeOrderAction 应成功恢复叫停的订单","status":"passed","title":"应成功恢复叫停的订单","duration":2.2343999999993684,"failureMessages":[],"meta":{}}],"startTime":1772266845906,"endTime":1772266845929.2344,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/halt.test.ts"},{"assertionResults":[{"ancestorTitles":["Logistics Actions","requestDelivery"],"fullName":"Logistics Actions requestDelivery 应成功请求发货并记录审计日志","status":"passed","title":"应成功请求发货并记录审计日志","duration":15.592499999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logistics Actions","requestDelivery"],"fullName":"Logistics Actions requestDelivery 应拒绝未经授权的请求","status":"passed","title":"应拒绝未经授权的请求","duration":3.656600000000253,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logistics Actions","requestDelivery"],"fullName":"Logistics Actions requestDelivery 应检查权限","status":"passed","title":"应检查权限","duration":1.0207999999984168,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logistics Actions","updateLogistics"],"fullName":"Logistics Actions updateLogistics 应成功更新物流信息并记录审计","status":"passed","title":"应成功更新物流信息并记录审计","duration":3.9594000000015512,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logistics Actions","updateLogistics"],"fullName":"Logistics Actions updateLogistics 当 LogisticsService 失败时应返回错误","status":"passed","title":"当 LogisticsService 失败时应返回错误","duration":2.087999999999738,"failureMessages":[],"meta":{}}],"startTime":1772266842349,"endTime":1772266842377.088,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/logistics.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Mutations Actions","updateOrderStatus"],"fullName":"Order Mutations Actions updateOrderStatus should update order status and record audit log when transition is valid","status":"passed","title":"should update order status and record audit log when transition is valid","duration":10.224600000000464,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Mutations Actions","updateOrderStatus"],"fullName":"Order Mutations Actions updateOrderStatus should return error when transition is invalid","status":"passed","title":"should return error when transition is invalid","duration":8.543400000000474,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Mutations Actions","pauseOrder"],"fullName":"Order Mutations Actions pauseOrder should call OrderService.haltOrder and record audit log","status":"passed","title":"should call OrderService.haltOrder and record audit log","duration":8.207000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Mutations Actions","resumeOrder"],"fullName":"Order Mutations Actions resumeOrder should call OrderService.resumeOrder and record audit log","status":"passed","title":"should call OrderService.resumeOrder and record audit log","duration":3.6908999999996013,"failureMessages":[],"meta":{}}],"startTime":1772266839758,"endTime":1772266839789.691,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/mutations.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Export Actions","exportOrdersAction"],"fullName":"Order Export Actions exportOrdersAction 成功导出订单为 CSV","status":"passed","title":"成功导出订单为 CSV","duration":9.394599999999627,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Export Actions","exportOrdersAction"],"fullName":"Order Export Actions exportOrdersAction 空数据时返回仅含标题行的 CSV","status":"passed","title":"空数据时返回仅含标题行的 CSV","duration":1.974699999999757,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Export Actions","exportOrdersAction"],"fullName":"Order Export Actions exportOrdersAction 未登录时返回错误","status":"passed","title":"未登录时返回错误","duration":0.5561999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Export Actions","exportOrdersAction"],"fullName":"Order Export Actions exportOrdersAction 数据库异常时返回错误","status":"passed","title":"数据库异常时返回错误","duration":9.000900000000001,"failureMessages":[],"meta":{}}],"startTime":1772266854223,"endTime":1772266854244.001,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/order-export.test.ts"},{"assertionResults":[{"ancestorTitles":["Orders Lifecycle Actions","cancelOrderAction"],"fullName":"Orders Lifecycle Actions cancelOrderAction 成功取消订单","status":"passed","title":"成功取消订单","duration":15.080599999999322,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","cancelOrderAction"],"fullName":"Orders Lifecycle Actions cancelOrderAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":3.3022000000000844,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","confirmInstallationAction"],"fullName":"Orders Lifecycle Actions confirmInstallationAction 成功确认安装完成","status":"passed","title":"成功确认安装完成","duration":3.4663000000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","confirmInstallationAction"],"fullName":"Orders Lifecycle Actions confirmInstallationAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":1.6270999999997002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","confirmInstallationAction"],"fullName":"Orders Lifecycle Actions confirmInstallationAction Service 异常时正确传播","status":"passed","title":"Service 异常时正确传播","duration":12.82719999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","customerAcceptAction"],"fullName":"Orders Lifecycle Actions customerAcceptAction 成功验收通过","status":"passed","title":"成功验收通过","duration":2.621900000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","customerAcceptAction"],"fullName":"Orders Lifecycle Actions customerAcceptAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":0.6340000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","closeOrderAction"],"fullName":"Orders Lifecycle Actions closeOrderAction 成功关闭订单","status":"passed","title":"成功关闭订单","duration":3.2430999999996857,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","closeOrderAction"],"fullName":"Orders Lifecycle Actions closeOrderAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":1.0369000000009692,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","requestCustomerConfirmationAction"],"fullName":"Orders Lifecycle Actions requestCustomerConfirmationAction 成功请求客户确认","status":"passed","title":"成功请求客户确认","duration":1.4689999999991414,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","requestCustomerConfirmationAction"],"fullName":"Orders Lifecycle Actions requestCustomerConfirmationAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":0.6590999999989435,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","customerRejectAction"],"fullName":"Orders Lifecycle Actions customerRejectAction 成功处理客户拒绝","status":"passed","title":"成功处理客户拒绝","duration":2.7065999999995256,"failureMessages":[],"meta":{}},{"ancestorTitles":["Orders Lifecycle Actions","customerRejectAction"],"fullName":"Orders Lifecycle Actions customerRejectAction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":0.7822999999989406,"failureMessages":[],"meta":{}}],"startTime":1772266831688,"endTime":1772266831739.7822,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/orders-lifecycle.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Production Actions","confirmOrderProduction"],"fullName":"Order Production Actions confirmOrderProduction PAID 状态订单成功开始生产","status":"passed","title":"PAID 状态订单成功开始生产","duration":16.75959999999941,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","confirmOrderProduction"],"fullName":"Order Production Actions confirmOrderProduction MONTHLY 结算订单无需全额付款即可开始生产","status":"passed","title":"MONTHLY 结算订单无需全额付款即可开始生产","duration":2.0698000000011234,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","confirmOrderProduction"],"fullName":"Order Production Actions confirmOrderProduction 非 PAID 且非 MONTHLY 状态不允许开始生产","status":"passed","title":"非 PAID 且非 MONTHLY 状态不允许开始生产","duration":13.385099999999511,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","confirmOrderProduction"],"fullName":"Order Production Actions confirmOrderProduction 订单不存在时抛出异常","status":"passed","title":"订单不存在时抛出异常","duration":4.030800000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","confirmOrderProduction"],"fullName":"Order Production Actions confirmOrderProduction 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":1.185300000001007,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","splitOrder"],"fullName":"Order Production Actions splitOrder 成功执行拆单","status":"passed","title":"成功执行拆单","duration":5.250799999999799,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","splitOrder"],"fullName":"Order Production Actions splitOrder 拆单引擎异常时正确传播","status":"passed","title":"拆单引擎异常时正确传播","duration":3.860099999999875,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Production Actions","splitOrder"],"fullName":"Order Production Actions splitOrder 未登录时抛出异常","status":"passed","title":"未登录时抛出异常","duration":0.7566999999999098,"failureMessages":[],"meta":{}}],"startTime":1772266831472,"endTime":1772266831520.7566,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/production.test.ts"},{"assertionResults":[{"ancestorTitles":["Order Queries Actions","getOrders"],"fullName":"Order Queries Actions getOrders should return paginated orders","status":"passed","title":"should return paginated orders","duration":8.421199999999772,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Queries Actions","getOrders"],"fullName":"Order Queries Actions getOrders should filtering by search term","status":"passed","title":"should filtering by search term","duration":2.303200000000288,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Queries Actions","getOrderById"],"fullName":"Order Queries Actions getOrderById should return order detail when found","status":"passed","title":"should return order detail when found","duration":1.3729000000002998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Order Queries Actions","getOrderById"],"fullName":"Order Queries Actions getOrderById should return error when order not found","status":"passed","title":"should return error when order not found","duration":1.5354999999999563,"failureMessages":[],"meta":{}}],"startTime":1772266868573,"endTime":1772266868587.5354,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/orders/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Attachment Calculation"],"fullName":"Attachment Calculation should pass placeholder test","status":"passed","title":"should pass placeholder test","duration":1.8355000000001382,"failureMessages":[],"meta":{}}],"startTime":1772266870767,"endTime":1772266870768.8354,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/logic/__tests__/attachment-calc.test.ts"},{"assertionResults":[{"ancestorTitles":["Curtain Calculation Warnings"],"fullName":"Curtain Calculation Warnings should pass placeholder test","status":"passed","title":"should pass placeholder test","duration":3.1270999999997002,"failureMessages":[],"meta":{}}],"startTime":1772266870450,"endTime":1772266870453.1272,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/logic/__tests__/curtain-calc-warnings.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Version Compare Logic"],"fullName":"Quote Version Compare Logic should detect no changes for identical items","status":"passed","title":"should detect no changes for identical items","duration":4.604800000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Version Compare Logic"],"fullName":"Quote Version Compare Logic should detect changes in basic fields (quantity, price)","status":"passed","title":"should detect changes in basic fields (quantity, price)","duration":1.3022999999993772,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Version Compare Logic"],"fullName":"Quote Version Compare Logic should detect changes in specs (fabricDirection)","status":"passed","title":"should detect changes in specs (fabricDirection)","duration":0.7700000000004366,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Version Compare Logic"],"fullName":"Quote Version Compare Logic should handle missing specs gracefully","status":"passed","title":"should handle missing specs gracefully","duration":0.6697999999996682,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Version Compare Logic"],"fullName":"Quote Version Compare Logic should treat null and undefined as equal for optional fields","status":"passed","title":"should treat null and undefined as equal for optional fields","duration":1.3834999999999127,"failureMessages":[],"meta":{}}],"startTime":1772266866758,"endTime":1772266866766.3835,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/logic/__tests__/quote-version-compare.test.ts"},{"assertionResults":[{"ancestorTitles":["Quote Lifecycle E2E Integration","Scenario A: Standard Lifecycle (Happy Path)"],"fullName":"Quote Lifecycle E2E Integration Scenario A: Standard Lifecycle (Happy Path) should successfully submit and convert a low-risk quote to an order","status":"passed","title":"should successfully submit and convert a low-risk quote to an order","duration":13.170000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["Quote Lifecycle E2E Integration","Scenario B: High Risk Workflow"],"fullName":"Quote Lifecycle E2E Integration Scenario B: High Risk Workflow should block or require approval for high risk quotes","status":"passed","title":"should block or require approval for high risk quotes","duration":2.9470000000001164,"failureMessages":[],"meta":{}}],"startTime":1772266864053,"endTime":1772266864069.947,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/integration/lifecycle.test.ts"},{"assertionResults":[{"ancestorTitles":["QuoteService.refreshExpiredQuotePrices"],"fullName":"QuoteService.refreshExpiredQuotePrices should batch fetch products and update items with changed prices","status":"passed","title":"should batch fetch products and update items with changed prices","duration":11.271099999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["QuoteService.refreshExpiredQuotePrices"],"fullName":"QuoteService.refreshExpiredQuotePrices should throw error if quote is not expired or draft","status":"passed","title":"should throw error if quote is not expired or draft","duration":3.3537999999998647,"failureMessages":[],"meta":{}}],"startTime":1772266862821,"endTime":1772266862836.3538,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/quotes/__tests__/unit/expiration.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should split order into install tasks correctly","status":"skipped","title":"should split order into install tasks correctly","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should create measure task correctly","status":"skipped","title":"should create measure task correctly","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should set fee status to PENDING when requiresFee is true","status":"skipped","title":"should set fee status to PENDING when requiresFee is true","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should set fee status to NONE for VIP customer","status":"skipped","title":"should set fee status to NONE for VIP customer","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should check in measure task successfully with GPS validation","status":"skipped","title":"should check in measure task successfully with GPS validation","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should detect late check-in","status":"skipped","title":"should detect late check-in","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should reject task and increment count","status":"skipped","title":"should reject task and increment count","failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Tasks Logic"],"fullName":"Installation Tasks Logic should trigger warning on 3rd rejection","status":"skipped","title":"should trigger warning on 3rd rejection","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/actions/create-task.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Concurrency & Protection"],"fullName":"Installation Concurrency & Protection 应该拒绝确认一个不存在或未指派的任务","status":"passed","title":"应该拒绝确认一个不存在或未指派的任务","duration":8.103699999999662,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Concurrency & Protection"],"fullName":"Installation Concurrency & Protection 应该防止重复确认逻辑（业务层模拟）","status":"passed","title":"应该防止重复确认逻辑（业务层模拟）","duration":1.381199999999808,"failureMessages":[],"meta":{}}],"startTime":1772266868763,"endTime":1772266868772.381,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/concurrency.test.ts"},{"assertionResults":[{"ancestorTitles":["DB Debug"],"fullName":"DB Debug dummy","status":"skipped","title":"dummy","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/debug-db.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Finance Integration (AP Logic)"],"fullName":"Installation Finance Integration (AP Logic) should create a labor AP record when installation is confirmed","status":"skipped","title":"should create a labor AP record when installation is confirmed","failureMessages":[],"meta":{}}],"startTime":1772266786446,"endTime":1772266786446,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/finance-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Module Security Tests","checkSchedulingConflict - 租户隔离"],"fullName":"Installation Module Security Tests checkSchedulingConflict - 租户隔离 应该在查询中包含 tenantId 过滤","status":"passed","title":"应该在查询中包含 tenantId 过滤","duration":6.922099999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkSchedulingConflict - 租户隔离"],"fullName":"Installation Module Security Tests checkSchedulingConflict - 租户隔离 应该检测硬冲突 - 同一时段已有任务","status":"passed","title":"应该检测硬冲突 - 同一时段已有任务","duration":1.370600000000195,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkSchedulingConflict - 租户隔离"],"fullName":"Installation Module Security Tests checkSchedulingConflict - 租户隔离 应该检测软冲突 - 当日任务数过多","status":"passed","title":"应该检测软冲突 - 当日任务数过多","duration":1.554399999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkSchedulingConflict - 租户隔离"],"fullName":"Installation Module Security Tests checkSchedulingConflict - 租户隔离 应该忽略已完成的任务","status":"passed","title":"应该忽略已完成的任务","duration":1.3561999999992622,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkLogisticsReady - 租户隔离"],"fullName":"Installation Module Security Tests checkLogisticsReady - 租户隔离 应该在没有 PO 时返回 ready","status":"passed","title":"应该在没有 PO 时返回 ready","duration":1.0614999999997963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkLogisticsReady - 租户隔离"],"fullName":"Installation Module Security Tests checkLogisticsReady - 租户隔离 应该检测未到货的 PO","status":"passed","title":"应该检测未到货的 PO","duration":1.1255999999993946,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","checkLogisticsReady - 租户隔离"],"fullName":"Installation Module Security Tests checkLogisticsReady - 租户隔离 应该在所有 PO 到货时返回 ready","status":"passed","title":"应该在所有 PO 到货时返回 ready","duration":0.6279999999997017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","时段解析"],"fullName":"Installation Module Security Tests 时段解析 应该正确解析预定义时段","status":"passed","title":"应该正确解析预定义时段","duration":0.6563999999998487,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Module Security Tests","时段解析"],"fullName":"Installation Module Security Tests 时段解析 应该正确解析时间范围格式","status":"passed","title":"应该正确解析时间范围格式","duration":1.360700000000179,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation"],"fullName":"Input Validation 应该拒绝无效的任务 ID 格式","status":"passed","title":"应该拒绝无效的任务 ID 格式","duration":0.8383000000003449,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation"],"fullName":"Input Validation 应该接受有效的 UUID","status":"passed","title":"应该接受有效的 UUID","duration":0.25309999999990396,"failureMessages":[],"meta":{}}],"startTime":1772266861753,"endTime":1772266861771.2532,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/install-tasks.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Flow Integration Test","getInstallTasks"],"fullName":"Installation Flow Integration Test getInstallTasks should fail if unauthenticated","status":"passed","title":"should fail if unauthenticated","duration":5.3104000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","getInstallTasks"],"fullName":"Installation Flow Integration Test getInstallTasks should get all install tasks without filters","status":"passed","title":"should get all install tasks without filters","duration":1.6606999999994514,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","getInstallTasks"],"fullName":"Installation Flow Integration Test getInstallTasks should filter install tasks by status","status":"passed","title":"should filter install tasks by status","duration":0.9059000000006563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","getInstallTasks"],"fullName":"Installation Flow Integration Test getInstallTasks should filter install tasks by search term","status":"passed","title":"should filter install tasks by search term","duration":1.7671000000000276,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","getInstallers"],"fullName":"Installation Flow Integration Test getInstallers should return installers for the tenant","status":"passed","title":"should return installers for the tenant","duration":1.8828000000003158,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","dispatchInstallTask"],"fullName":"Installation Flow Integration Test dispatchInstallTask should fail if installer does not exist or invalid role","status":"passed","title":"should fail if installer does not exist or invalid role","duration":1.3010999999996784,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","dispatchInstallTask"],"fullName":"Installation Flow Integration Test dispatchInstallTask should successfully dispatch install task","status":"passed","title":"should successfully dispatch install task","duration":1.235500000000684,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Flow Integration Test","dispatchInstallTask"],"fullName":"Installation Flow Integration Test dispatchInstallTask should act conditionally if test completion is triggered later","status":"passed","title":"should act conditionally if test completion is triggered later","duration":0.3356999999996333,"failureMessages":[],"meta":{}}],"startTime":1772266860550,"endTime":1772266860565.3357,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/installation-flow.test.ts"},{"assertionResults":[{"ancestorTitles":["Pricing Actions Logic","calculateLaborFee - 分级定价逻辑"],"fullName":"Pricing Actions Logic calculateLaborFee - 分级定价逻辑 应优先使用师傅个人定价","status":"passed","title":"应优先使用师傅个人定价","duration":5.093499999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions Logic","calculateLaborFee - 分级定价逻辑"],"fullName":"Pricing Actions Logic calculateLaborFee - 分级定价逻辑 当师傅无定价时应兜底使用租户标准定价","status":"passed","title":"当师傅无定价时应兜底使用租户标准定价","duration":1.4508999999998196,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions Logic","calculateLaborFee - 分级定价逻辑"],"fullName":"Pricing Actions Logic calculateLaborFee - 分级定价逻辑 若均无配置应返回 0 费用对象","status":"passed","title":"若均无配置应返回 0 费用对象","duration":0.8892000000005282,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pricing Actions Logic","calculateLaborFee - 分级定价逻辑"],"fullName":"Pricing Actions Logic calculateLaborFee - 分级定价逻辑 应能够处理纯基础费的固定价格模式","status":"passed","title":"应能够处理纯基础费的固定价格模式","duration":1.4948999999996886,"failureMessages":[],"meta":{}}],"startTime":1772266868991,"endTime":1772266869000.4949,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/pricing-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Actions"],"fullName":"Measurement Actions should pass placeholder test","status":"passed","title":"should pass placeholder test","duration":2.8420999999998457,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Zod Schemas"],"fullName":"Measurement Zod Schemas should validate a valid measure item","status":"passed","title":"should validate a valid measure item","duration":5.526600000000144,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Zod Schemas"],"fullName":"Measurement Zod Schemas should fail on invalid width","status":"passed","title":"should fail on invalid width","duration":1.4643999999998414,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Zod Schemas"],"fullName":"Measurement Zod Schemas should validate create task schema","status":"passed","title":"should validate create task schema","duration":3.1315999999997075,"failureMessages":[],"meta":{}}],"startTime":1772266865303,"endTime":1772266865317.1316,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/__tests__/actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Exception Scenarios"],"fullName":"Measurement Exception Scenarios 拆分任务时如果原任务已完成应该抛出错误","status":"passed","title":"拆分任务时如果原任务已完成应该抛出错误","duration":20.398400000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Exception Scenarios"],"fullName":"Measurement Exception Scenarios 拆分任务时若原任务不存在应返回错误","status":"passed","title":"拆分任务时若原任务不存在应返回错误","duration":3.8410000000003492,"failureMessages":[],"meta":{}}],"startTime":1772266853100,"endTime":1772266853123.841,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/__tests__/exceptions.test.ts"},{"assertionResults":[{"ancestorTitles":["Sync Manager"],"fullName":"Sync Manager should be valid","status":"passed","title":"should be valid","duration":2.393000000000029,"failureMessages":[],"meta":{}}],"startTime":1772266870236,"endTime":1772266870238.393,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/__tests__/sync-manager.test.ts"},{"assertionResults":[{"ancestorTitles":["Smart Dispatch Integration","评分算法测试"],"fullName":"Smart Dispatch Integration 评分算法测试 应该为 5km 以内的师傅给出最高距离分","status":"passed","title":"应该为 5km 以内的师傅给出最高距离分","duration":3.832999999999629,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch Integration","评分算法测试"],"fullName":"Smart Dispatch Integration 评分算法测试 应该为距离较远的师傅给出较低分数","status":"passed","title":"应该为距离较远的师傅给出较低分数","duration":0.6600000000003092,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch Integration","评分算法测试"],"fullName":"Smart Dispatch Integration 评分算法测试 应该为无位置信息的师傅给出较低加分","status":"passed","title":"应该为无位置信息的师傅给出较低加分","duration":0.4393000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch Integration","多师傅排序测试"],"fullName":"Smart Dispatch Integration 多师傅排序测试 应该在多个师傅中按分数排序","status":"passed","title":"应该在多个师傅中按分数排序","duration":1.4188999999996668,"failureMessages":[],"meta":{}}],"startTime":1772266869574,"endTime":1772266869581.419,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/smart-dispatch/__tests__/dispatch-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly when no location is provided","status":"passed","title":"should calculate score correctly when no location is provided","duration":2.7424000000000888,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly for distance <= 5km","status":"passed","title":"should calculate score correctly for distance <= 5km","duration":0.6568999999999505,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly for 5km < distance <= 10km","status":"passed","title":"should calculate score correctly for 5km < distance <= 10km","duration":0.42399999999997817,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly for 10km < distance <= 20km","status":"passed","title":"should calculate score correctly for 10km < distance <= 20km","duration":0.6856999999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly for 20km < distance <= 50km","status":"passed","title":"should calculate score correctly for 20km < distance <= 50km","duration":0.3910999999998239,"failureMessages":[],"meta":{}},{"ancestorTitles":["Smart Dispatch - calculateWorkerScore"],"fullName":"Smart Dispatch - calculateWorkerScore should calculate score correctly for distance > 50km","status":"passed","title":"should calculate score correctly for distance > 50km","duration":0.24279999999998836,"failureMessages":[],"meta":{}}],"startTime":1772266868561,"endTime":1772266868567.243,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/smart-dispatch/__tests__/scoring.test.ts"},{"assertionResults":[{"ancestorTitles":["UserForm Loading"],"fullName":"UserForm Loading 提交时按钮应进入 Loading 状态并禁用","status":"passed","title":"提交时按钮应进入 Loading 状态并禁用","duration":667.2650000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserForm Loading"],"fullName":"UserForm Loading 提交失败时应显示错误提示","status":"passed","title":"提交失败时应显示错误提示","duration":197.58699999999953,"failureMessages":[],"meta":{}}],"startTime":1772266813807,"endTime":1772266814671.587,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/settings/components/__tests__/user-form.test.tsx"},{"assertionResults":[{"ancestorTitles":["getShowroomItems() Action"],"fullName":"getShowroomItems() Action 应返回带分页的数据","status":"passed","title":"应返回带分页的数据","duration":10.768700000000536,"failureMessages":[],"meta":{}},{"ancestorTitles":["createShowroomItem() Action"],"fullName":"createShowroomItem() Action 应成功创建并记录审计日志","status":"passed","title":"应成功创建并记录审计日志","duration":4.413000000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["createShowroomItem() Action"],"fullName":"createShowroomItem() Action 创建时应清洗 XSS 内容","status":"passed","title":"创建时应清洗 XSS 内容","duration":6.918299999999363,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateShowroomItem() Action"],"fullName":"updateShowroomItem() Action 应成功更新并记录审计日志","status":"passed","title":"应成功更新并记录审计日志","duration":6.172099999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateShowroomItem() Action"],"fullName":"updateShowroomItem() Action 更新不存在的记录应抛出 Item not found","status":"passed","title":"更新不存在的记录应抛出 Item not found","duration":4.734400000001187,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateShowroomItem() Action"],"fullName":"updateShowroomItem() Action 非创建者更新应抛出权限异常","status":"passed","title":"非创建者更新应抛出权限异常","duration":1.4902000000001863,"failureMessages":[],"meta":{}},{"ancestorTitles":["deleteShowroomItem() Action"],"fullName":"deleteShowroomItem() Action 应执行软删除","status":"passed","title":"应执行软删除","duration":2.7193999999999505,"failureMessages":[],"meta":{}}],"startTime":1772266835034,"endTime":1772266835072.7195,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/showroom/actions/__tests__/items.test.ts"},{"assertionResults":[{"ancestorTitles":["createShareLink() Action"],"fullName":"createShareLink() Action 应成功创建分享链接并记录审计日志","status":"passed","title":"应成功创建分享链接并记录审计日志","duration":10.506100000000515,"failureMessages":[],"meta":{}},{"ancestorTitles":["createShareLink() Action"],"fullName":"createShareLink() Action 应成功解析密码及限阅次数并落库","status":"passed","title":"应成功解析密码及限阅次数并落库","duration":2.780300000000352,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 应成功获取分享内容并合并素材详情","status":"passed","title":"应成功获取分享内容并合并素材详情","duration":3.960599999999431,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 应处理 Redis 采样回写逻辑","status":"passed","title":"应处理 Redis 采样回写逻辑","duration":1.6266000000005079,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当 Redis 不可用时应 Fail Closed 抛出错误","status":"passed","title":"当 Redis 不可用时应 Fail Closed 抛出错误","duration":4.3245999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当分享被停用时应抛出错误","status":"passed","title":"当分享被停用时应抛出错误","duration":0.9023999999999432,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当处理频率过快时应触发限流错误","status":"passed","title":"当处理频率过快时应触发限流错误","duration":1.4450000000006185,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当达到阅后即焚上限时应抛出错误","status":"passed","title":"当达到阅后即焚上限时应抛出错误","duration":1.1440000000002328,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当开启密码保护且未提供密码时抛出错误","status":"passed","title":"当开启密码保护且未提供密码时抛出错误","duration":2.016099999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当开启密码保护且密码错误时抛出错误","status":"passed","title":"当开启密码保护且密码错误时抛出错误","duration":1.5221000000001368,"failureMessages":[],"meta":{}},{"ancestorTitles":["getShareContent() Action"],"fullName":"getShareContent() Action 当提供正确密码时成功获取内容","status":"passed","title":"当提供正确密码时成功获取内容","duration":1.6968999999999141,"failureMessages":[],"meta":{}}],"startTime":1772266836679,"endTime":1772266836711.697,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/showroom/actions/__tests__/shares.test.ts"},{"assertionResults":[{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 Session 为空时应返回 false","status":"passed","title":"Session 为空时应返回 false","duration":2.726300000000265,"failureMessages":[],"meta":{}},{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 超级管理员 (SUPER_ADMIN) 应有权管理任何素材","status":"passed","title":"超级管理员 (SUPER_ADMIN) 应有权管理任何素材","duration":0.3897999999999229,"failureMessages":[],"meta":{}},{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 管理员 (ADMIN) 应有权管理任何素材","status":"passed","title":"管理员 (ADMIN) 应有权管理任何素材","duration":0.22400000000016007,"failureMessages":[],"meta":{}},{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 创建者本人应有权管理该素材","status":"passed","title":"创建者本人应有权管理该素材","duration":0.44290000000000873,"failureMessages":[],"meta":{}},{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 非创建者且非管理员应被拒绝","status":"passed","title":"非创建者且非管理员应被拒绝","duration":0.27189999999973224,"failureMessages":[],"meta":{}},{"ancestorTitles":["canManageShowroomItem 权限逻辑单元测试"],"fullName":"canManageShowroomItem 权限逻辑单元测试 边界情况：用户 ID 匹配但 Role 缺失（非 Admin 角色）应视为普通用户逻辑","status":"passed","title":"边界情况：用户 ID 匹配但 Role 缺失（非 Admin 角色）应视为普通用户逻辑","duration":0.2660999999998239,"failureMessages":[],"meta":{}}],"startTime":1772266869421,"endTime":1772266869426.266,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/showroom/logic/__tests__/permissions.test.ts"},{"assertionResults":[{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 基础分验证：空数据应返回基础分 20","status":"passed","title":"基础分验证：空数据应返回基础分 20","duration":2.6190000000005966,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 图片得分：包含至少一张图片应加 20 分","status":"passed","title":"图片得分：包含至少一张图片应加 20 分","duration":0.743199999999888,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 内容得分：内容超过 50 字应加 20 分","status":"passed","title":"内容得分：内容超过 50 字应加 20 分","duration":0.46560000000044965,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 商品关联得分：关联 productId 应加 20 分","status":"passed","title":"商品关联得分：关联 productId 应加 20 分","duration":0.7053999999998268,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 标签得分：包含至少一个标签应加 20 分","status":"passed","title":"标签得分：包含至少一个标签应加 20 分","duration":0.4238999999997759,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 多维叠加得分：图片 + 商品","status":"passed","title":"多维叠加得分：图片 + 商品","duration":0.4293000000006941,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 满分验证：满足所有条件应返回 100 分","status":"passed","title":"满分验证：满足所有条件应返回 100 分","duration":0.47180000000025757,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 封顶验证：得分不应超过 100 分","status":"passed","title":"封顶验证：得分不应超过 100 分","duration":0.3486000000002605,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 类型敏感：productId 为空字符串时不应作为关联商品加分（依赖逻辑实现，当前逻辑仅判断是否存在）","status":"passed","title":"类型敏感：productId 为空字符串时不应作为关联商品加分（依赖逻辑实现，当前逻辑仅判断是否存在）","duration":0.6661999999996624,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateScore 评分算法单元测试"],"fullName":"calculateScore 评分算法单元测试 逻辑鲁棒性：非法或空数组不应加分","status":"passed","title":"逻辑鲁棒性：非法或空数组不应加分","duration":0.3809000000001106,"failureMessages":[],"meta":{}}],"startTime":1772266867605,"endTime":1772266867612.3809,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/showroom/logic/__tests__/scoring.test.ts"},{"assertionResults":[{"ancestorTitles":["Inventory Actions","adjustInventoryAction"],"fullName":"Inventory Actions adjustInventoryAction 仓库不存在时应返回错误","status":"failed","title":"仓库不存在时应返回错误","duration":5028.366,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/inventory-actions.test.ts:79:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["Inventory Actions","adjustInventoryAction"],"fullName":"Inventory Actions adjustInventoryAction 扣减库存导致负数时应报错","status":"passed","title":"扣减库存导致负数时应报错","duration":153.64730000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","adjustInventoryAction"],"fullName":"Inventory Actions adjustInventoryAction 正数调配或合法扣减时应成功并生成日志","status":"passed","title":"正数调配或合法扣减时应成功并生成日志","duration":5.474599999999555,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","adjustInventoryAction"],"fullName":"Inventory Actions adjustInventoryAction 首次初始化某仓库的某商品库存应执行 insert","status":"passed","title":"首次初始化某仓库的某商品库存应执行 insert","duration":2.58679999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","transferInventoryAction"],"fullName":"Inventory Actions transferInventoryAction 同仓库调拨应报错","status":"passed","title":"同仓库调拨应报错","duration":5.408599999998842,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","transferInventoryAction"],"fullName":"Inventory Actions transferInventoryAction 原仓库库存不足应报错","status":"passed","title":"原仓库库存不足应报错","duration":2.598099999999249,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","transferInventoryAction"],"fullName":"Inventory Actions transferInventoryAction 合法调拨应能扣减原仓，增加目标仓","status":"passed","title":"合法调拨应能扣减原仓，增加目标仓","duration":2.3518000000003667,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","getInventoryLevels"],"fullName":"Inventory Actions getInventoryLevels 应成功获取库存在给定过滤条件下的等级","status":"passed","title":"应成功获取库存在给定过滤条件下的等级","duration":57.38169999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["Inventory Actions","setminStockAction"],"fullName":"Inventory Actions setminStockAction 应成功设置安全库存","status":"passed","title":"应成功设置安全库存","duration":3.333099999999831,"failureMessages":[],"meta":{}}],"startTime":1772266798938,"endTime":1772266804202.333,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/inventory-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Pending Pool Actions","getPendingPurchaseItems"],"fullName":"Pending Pool Actions getPendingPurchaseItems 未登录时应抛出 Unauthorized","status":"passed","title":"未登录时应抛出 Unauthorized","duration":440.9849999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","getPendingPurchaseItems"],"fullName":"Pending Pool Actions getPendingPurchaseItems 应正常返回三类汇总结果","status":"passed","title":"应正常返回三类汇总结果","duration":9.47479999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","submitForApproval"],"fullName":"Pending Pool Actions submitForApproval 未登录时应抛出 Unauthorized","status":"passed","title":"未登录时应抛出 Unauthorized","duration":1.2106000000003405,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","submitForApproval"],"fullName":"Pending Pool Actions submitForApproval 没有 DRAFT 状态的 PO 时应报错","status":"passed","title":"没有 DRAFT 状态的 PO 时应报错","duration":3.2874999999994543,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","submitForApproval"],"fullName":"Pending Pool Actions submitForApproval 应成功提交并记录审计日志","status":"passed","title":"应成功提交并记录审计日志","duration":2.964100000000144,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","assignToSupplier"],"fullName":"Pending Pool Actions assignToSupplier 供应商不存在时应抛出错误","status":"passed","title":"供应商不存在时应抛出错误","duration":3.240099999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","assignToSupplier"],"fullName":"Pending Pool Actions assignToSupplier 没有可分配项时应抛出错误","status":"passed","title":"没有可分配项时应抛出错误","duration":1.917699999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","assignToSupplier"],"fullName":"Pending Pool Actions assignToSupplier 应成功分配并创建 DRAFT PO","status":"passed","title":"应成功分配并创建 DRAFT PO","duration":7.902799999999843,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","mergeToPurchaseOrder"],"fullName":"Pending Pool Actions mergeToPurchaseOrder 没有可合并项时应抛出错误","status":"passed","title":"没有可合并项时应抛出错误","duration":3.7867999999998574,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","mergeToPurchaseOrder"],"fullName":"Pending Pool Actions mergeToPurchaseOrder 成品和面料混合时应抛出错误","status":"passed","title":"成品和面料混合时应抛出错误","duration":2.539600000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pending Pool Actions","mergeToPurchaseOrder"],"fullName":"Pending Pool Actions mergeToPurchaseOrder 应成功合并并返回结果","status":"passed","title":"应成功合并并返回结果","duration":3.0234999999993306,"failureMessages":[],"meta":{}}],"startTime":1772266812829,"endTime":1772266813311.0234,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/pending-pool-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["PO Actions (L5)","getPurchaseOrders"],"fullName":"PO Actions (L5) getPurchaseOrders 应当返回分页列表","status":"failed","title":"应当返回分页列表","duration":5343.063,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/po-actions.test.ts:110:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["PO Actions (L5)","getPurchaseOrders"],"fullName":"PO Actions (L5) getPurchaseOrders 未授权时返回错误","status":"passed","title":"未授权时返回错误","duration":2.0091999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","getPoById"],"fullName":"PO Actions (L5) getPoById 应当返回详情","status":"passed","title":"应当返回详情","duration":2.6582000000016706,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","getPoById"],"fullName":"PO Actions (L5) getPoById 找不到时返回错误","status":"passed","title":"找不到时返回错误","duration":1.924699999999575,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","createPurchaseOrder"],"fullName":"PO Actions (L5) createPurchaseOrder 供应商不存在时应报错","status":"passed","title":"供应商不存在时应报错","duration":19.941800000000512,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","createPurchaseOrder"],"fullName":"PO Actions (L5) createPurchaseOrder 供应商已停用时应报错","status":"passed","title":"供应商已停用时应报错","duration":3.6849999999994907,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","createPurchaseOrder"],"fullName":"PO Actions (L5) createPurchaseOrder 应在事务中成功创建采购单及明细","status":"passed","title":"应在事务中成功创建采购单及明细","duration":5.473700000000463,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","updatePoStatus"],"fullName":"PO Actions (L5) updatePoStatus 合法的状态转换应成功","status":"passed","title":"合法的状态转换应成功","duration":3.9544000000005326,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","updatePoStatus"],"fullName":"PO Actions (L5) updatePoStatus 非法的状态转换应返回错误","status":"passed","title":"非法的状态转换应返回错误","duration":3.824800000000323,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","batchDeleteDraftPOs"],"fullName":"PO Actions (L5) batchDeleteDraftPOs 当存在非草稿 PO 时应抛出错误","status":"passed","title":"当存在非草稿 PO 时应抛出错误","duration":4.597400000000562,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","batchDeleteDraftPOs"],"fullName":"PO Actions (L5) batchDeleteDraftPOs 全部草稿时应成功删除","status":"passed","title":"全部草稿时应成功删除","duration":2.357900000000882,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","confirmPoQuote"],"fullName":"PO Actions (L5) confirmPoQuote 当 PO 状态是 PENDING_CONFIRMATION 时应成功转换至 PENDING_PAYMENT","status":"passed","title":"当 PO 状态是 PENDING_CONFIRMATION 时应成功转换至 PENDING_PAYMENT","duration":3.186599999999089,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","confirmPoQuote"],"fullName":"PO Actions (L5) confirmPoQuote 状态不允许时应抛出错误","status":"passed","title":"状态不允许时应抛出错误","duration":2.1305000000011205,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","confirmPoCompletion"],"fullName":"PO Actions (L5) confirmPoCompletion IN_PRODUCTION 状态下应成功转换至 READY","status":"passed","title":"IN_PRODUCTION 状态下应成功转换至 READY","duration":1.9677000000010594,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","exportPoPdf"],"fullName":"PO Actions (L5) exportPoPdf 应返回结构化的 PO 基础信息和明细","status":"passed","title":"应返回结构化的 PO 基础信息和明细","duration":0.9524999999994179,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","exportPoPdf"],"fullName":"PO Actions (L5) exportPoPdf PO 不存在时应返回错误","status":"passed","title":"PO 不存在时应返回错误","duration":0.7988000000004831,"failureMessages":[],"meta":{}},{"ancestorTitles":["PO Actions (L5)","getProcurementDashboardMetrics"],"fullName":"PO Actions (L5) getProcurementDashboardMetrics 应返回采购统计指标","status":"passed","title":"应返回采购统计指标","duration":1.076999999999316,"failureMessages":[],"meta":{}}],"startTime":1772266798939,"endTime":1772266804346.077,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/po-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["PO Preview Flow"],"fullName":"PO Preview Flow should pass placeholder test","status":"passed","title":"should pass placeholder test","duration":3.1224999999999454,"failureMessages":[],"meta":{}}],"startTime":1772266870354,"endTime":1772266870357.1226,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/po-preview.test.ts"},{"assertionResults":[{"ancestorTitles":["Processing Orders Actions","getProcessingOrders"],"fullName":"Processing Orders Actions getProcessingOrders 应能正确获取并映射加工单列表","status":"failed","title":"应能正确获取并映射加工单列表","duration":5106.372799999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/processing-actions.test.ts:64:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["Processing Orders Actions","getProcessingOrderById"],"fullName":"Processing Orders Actions getProcessingOrderById 单据不存在时返回错误","status":"passed","title":"单据不存在时返回错误","duration":2.204599999999118,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","getProcessingOrderById"],"fullName":"Processing Orders Actions getProcessingOrderById 应成功返回带明细的加工单","status":"passed","title":"应成功返回带明细的加工单","duration":2.697099999999409,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","updateProcessingOrderStatus"],"fullName":"Processing Orders Actions updateProcessingOrderStatus 更新状态时应记录时间并审计","status":"passed","title":"更新状态时应记录时间并审计","duration":6.261800000000221,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","createProcessingOrder"],"fullName":"Processing Orders Actions createProcessingOrder 关联订单不存在时应返回错误","status":"passed","title":"关联订单不存在时应返回错误","duration":7.171199999998862,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","createProcessingOrder"],"fullName":"Processing Orders Actions createProcessingOrder 校验通过时应在事务中创建并记录审计日志","status":"passed","title":"校验通过时应在事务中创建并记录审计日志","duration":3.787800000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","updateProcessingOrder"],"fullName":"Processing Orders Actions updateProcessingOrder 仅在 PENDING 状态下允许更新","status":"passed","title":"仅在 PENDING 状态下允许更新","duration":2.69760000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["Processing Orders Actions","updateProcessingOrder"],"fullName":"Processing Orders Actions updateProcessingOrder 可以更新供应商和备注并记录审计日志","status":"passed","title":"可以更新供应商和备注并记录审计日志","duration":1.7626000000000204,"failureMessages":[],"meta":{}}],"startTime":1772266798937,"endTime":1772266804071.7627,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/processing-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Product Bundle Actions (L5)","createProductBundle"],"fullName":"Product Bundle Actions (L5) createProductBundle 当套件 SKU 已存在时应抛出错误","status":"passed","title":"当套件 SKU 已存在时应抛出错误","duration":2783.9579999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Bundle Actions (L5)","createProductBundle"],"fullName":"Product Bundle Actions (L5) createProductBundle 应成功在事务中创建套件并插入子表项目","status":"passed","title":"应成功在事务中创建套件并插入子表项目","duration":8.741400000000795,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Bundle Actions (L5)","updateProductBundle"],"fullName":"Product Bundle Actions (L5) updateProductBundle 找不到时应报错","status":"passed","title":"找不到时应报错","duration":5.576600000000326,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Bundle Actions (L5)","updateProductBundle"],"fullName":"Product Bundle Actions (L5) updateProductBundle 应成功更新套件并先删后增子表（如果有 items ）","status":"passed","title":"应成功更新套件并先删后增子表（如果有 items ）","duration":3.8189999999995052,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Bundle Actions (L5)","deleteProductBundle"],"fullName":"Product Bundle Actions (L5) deleteProductBundle 应级联删除子表与主表并记录审计","status":"passed","title":"应级联删除子表与主表并记录审计","duration":33.072400000000926,"failureMessages":[],"meta":{}}],"startTime":1772266802917,"endTime":1772266805754.0725,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/product-bundles.test.ts"},{"assertionResults":[{"ancestorTitles":["Product Pricing Actions (L5)","calculateProductCost"],"fullName":"Product Pricing Actions (L5) calculateProductCost 未授权访问应拦截","status":"passed","title":"未授权访问应拦截","duration":2427.0252999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","calculateProductCost"],"fullName":"Product Pricing Actions (L5) calculateProductCost 产品不存在应抛出错误","status":"passed","title":"产品不存在应抛出错误","duration":4.676500000001397,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","calculateProductCost"],"fullName":"Product Pricing Actions (L5) calculateProductCost 应正确计算标准综合成本（无供应商覆盖）","status":"passed","title":"应正确计算标准综合成本（无供应商覆盖）","duration":4.1960999999992055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","calculateProductCost"],"fullName":"Product Pricing Actions (L5) calculateProductCost 应正确计算并覆盖供应商特定采购价","status":"passed","title":"应正确计算并覆盖供应商特定采购价","duration":3.030000000000655,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","analyzeProductProfit"],"fullName":"Product Pricing Actions (L5) analyzeProductProfit 应正确分析产品利润和毛利率","status":"passed","title":"应正确分析产品利润和毛利率","duration":4.586599999998725,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","analyzeProductProfit"],"fullName":"Product Pricing Actions (L5) analyzeProductProfit 售价为 0 时毛利率应为 0 避免除以零错误","status":"passed","title":"售价为 0 时毛利率应为 0 避免除以零错误","duration":1.6563000000005559,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","calculateChannelPrice"],"fullName":"Product Pricing Actions (L5) calculateChannelPrice 应当在 FIXED 模式使用固定价格或回退原价","status":"passed","title":"应当在 FIXED 模式使用固定价格或回退原价","duration":1.3832000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Pricing Actions (L5)","calculateChannelPrice"],"fullName":"Product Pricing Actions (L5) calculateChannelPrice 应当在 DISCOUNT 模式使用折扣率","status":"passed","title":"应当在 DISCOUNT 模式使用折扣率","duration":1.5638999999991938,"failureMessages":[],"meta":{}}],"startTime":1772266806416,"endTime":1772266808865.564,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/product-pricing.test.ts"},{"assertionResults":[{"ancestorTitles":["Product Supplier Actions (L5)","getProductSuppliers"],"fullName":"Product Supplier Actions (L5) getProductSuppliers 应当成功返回格式化的商品供应商列表","status":"passed","title":"应当成功返回格式化的商品供应商列表","duration":4623.515600000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","getProductSuppliers"],"fullName":"Product Supplier Actions (L5) getProductSuppliers 如果是未登录访问应拦截","status":"passed","title":"如果是未登录访问应拦截","duration":1.7971999999990658,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","addProductSupplier"],"fullName":"Product Supplier Actions (L5) addProductSupplier 已经绑定过的活跃关联应报错拦截","status":"passed","title":"已经绑定过的活跃关联应报错拦截","duration":7.683099999998376,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","addProductSupplier"],"fullName":"Product Supplier Actions (L5) addProductSupplier 商品和供应商存在时，应当插入绑定并且清空原有默认值（如果是 default）","status":"passed","title":"商品和供应商存在时，应当插入绑定并且清空原有默认值（如果是 default）","duration":3.8510999999998603,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","updateProductSupplier"],"fullName":"Product Supplier Actions (L5) updateProductSupplier 应该成功更新部分字段并在事务中处理 default","status":"passed","title":"应该成功更新部分字段并在事务中处理 default","duration":4.649699999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","removeProductSupplier"],"fullName":"Product Supplier Actions (L5) removeProductSupplier 应当软删除关联关系并记录日志","status":"passed","title":"应当软删除关联关系并记录日志","duration":4.832599999999729,"failureMessages":[],"meta":{}},{"ancestorTitles":["Product Supplier Actions (L5)","setDefaultSupplier"],"fullName":"Product Supplier Actions (L5) setDefaultSupplier 应当消除其他关联的默认并设置自身默认","status":"passed","title":"应当消除其他关联的默认并设置自身默认","duration":2.2031000000006316,"failureMessages":[],"meta":{}}],"startTime":1772266798983,"endTime":1772266803633.2031,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/product-supplier-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Split Route Rules Actions","getSplitRules"],"fullName":"Split Route Rules Actions getSplitRules 未授权时应抛出错误","status":"passed","title":"未授权时应抛出错误","duration":486.6286999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","getSplitRules"],"fullName":"Split Route Rules Actions getSplitRules 权限不足时应抛出错误","status":"passed","title":"权限不足时应抛出错误","duration":1.324399999999514,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","getSplitRules"],"fullName":"Split Route Rules Actions getSplitRules 应正常返回规则列表","status":"passed","title":"应正常返回规则列表","duration":5.43369999999959,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","createSplitRule"],"fullName":"Split Route Rules Actions createSplitRule 应成功创建规则并记录审计日志","status":"passed","title":"应成功创建规则并记录审计日志","duration":7.840799999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","createSplitRule"],"fullName":"Split Route Rules Actions createSplitRule 权限不足时应抛出错误","status":"passed","title":"权限不足时应抛出错误","duration":1.1393000000007305,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","updateSplitRule"],"fullName":"Split Route Rules Actions updateSplitRule 规则不存在时应抛出错误","status":"passed","title":"规则不存在时应抛出错误","duration":2.225300000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","updateSplitRule"],"fullName":"Split Route Rules Actions updateSplitRule 应成功更新规则并记录审计日志","status":"passed","title":"应成功更新规则并记录审计日志","duration":2.3238000000001193,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","deleteSplitRule"],"fullName":"Split Route Rules Actions deleteSplitRule 规则不存在时应抛出错误","status":"passed","title":"规则不存在时应抛出错误","duration":1.9328999999997905,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","deleteSplitRule"],"fullName":"Split Route Rules Actions deleteSplitRule 应成功删除规则并记录审计日志","status":"passed","title":"应成功删除规则并记录审计日志","duration":2.15940000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Route Rules Actions","getAllSuppliers"],"fullName":"Split Route Rules Actions getAllSuppliers 应返回当前租户的供应商列表","status":"passed","title":"应返回当前租户的供应商列表","duration":1.9615000000012515,"failureMessages":[],"meta":{}}],"startTime":1772266813116,"endTime":1772266813630.9614,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/rules.test.ts"},{"assertionResults":[{"ancestorTitles":["Shipment Actions (L5)","createShipment"],"fullName":"Shipment Actions (L5) createShipment 采购单不存在时应返回错误","status":"passed","title":"采购单不存在时应返回错误","duration":2974.7785000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","createShipment"],"fullName":"Shipment Actions (L5) createShipment 状态不允许发货时应返回错误","status":"passed","title":"状态不允许发货时应返回错误","duration":3.1695999999992637,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","createShipment"],"fullName":"Shipment Actions (L5) createShipment READY 状态下应成功创建物流记录并更新 PO 状态","status":"passed","title":"READY 状态下应成功创建物流记录并更新 PO 状态","duration":4.47269999999844,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","createShipment"],"fullName":"Shipment Actions (L5) createShipment 未授权时应返回错误","status":"passed","title":"未授权时应返回错误","duration":2.9601999999995314,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","updateShipment"],"fullName":"Shipment Actions (L5) updateShipment 物流记录不存在时应返回错误","status":"passed","title":"物流记录不存在时应返回错误","duration":4.922800000000279,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","updateShipment"],"fullName":"Shipment Actions (L5) updateShipment 应成功更新物流信息并记录审计","status":"passed","title":"应成功更新物流信息并记录审计","duration":6.69760000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","getShipments"],"fullName":"Shipment Actions (L5) getShipments 采购单不存在时应返回空数组","status":"passed","title":"采购单不存在时应返回空数组","duration":2.750500000000102,"failureMessages":[],"meta":{}},{"ancestorTitles":["Shipment Actions (L5)","getShipments"],"fullName":"Shipment Actions (L5) getShipments 应返回按时间倒序的物流记录","status":"passed","title":"应返回按时间倒序的物流记录","duration":2.4143999999996595,"failureMessages":[],"meta":{}}],"startTime":1772266804604,"endTime":1772266807608.4143,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/shipment-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["Split Engine"],"fullName":"Split Engine should handle empty order items","status":"passed","title":"should handle empty order items","duration":8.855500000001484,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Engine"],"fullName":"Split Engine should split FINISHED items to PO","status":"passed","title":"should split FINISHED items to PO","duration":13.06670000000122,"failureMessages":[],"meta":{}},{"ancestorTitles":["Split Engine"],"fullName":"Split Engine should split CUSTOM items to WO if Processor","status":"passed","title":"should split CUSTOM items to WO if Processor","duration":3.7368999999998778,"failureMessages":[],"meta":{}}],"startTime":1772266845361,"endTime":1772266845386.7368,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/split-engine.test.ts"},{"assertionResults":[{"ancestorTitles":["Supplier Actions (L5)","createSupplier"],"fullName":"Supplier Actions (L5) createSupplier 应当成功创建供应商并返回 ID","status":"failed","title":"应当成功创建供应商并返回 ID","duration":5040.178599999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:796:27)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:823:16)\n    at Object.<anonymous> (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:615:28)\n    at chain (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/chunk-tasks.js:9:14)\n    at C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/supplier-actions.test.ts:85:9\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:40\n    at runWithSuite (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1195:8)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:901:10)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.collect (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:905:46)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1390:26\n    at collectTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1365:3)\n    at startTests (file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1937:17)\n    at file:///C:/Users/bigey/Documents/Antigravity/L2C/node_modules/.pnpm/vitest@4.0.16_@types+node@20.19.27_jiti@2.6.1_jsdom@27.4.0_lightningcss@1.30.2_tsx@4.21.0_yaml@2.8.2/node_modules/vitest/dist/chunks/base.Bin-9uYm.js:86:26"],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","createSupplier"],"fullName":"Supplier Actions (L5) createSupplier 当供应商名称已存在时应当抛出错误","status":"passed","title":"当供应商名称已存在时应当抛出错误","duration":102.78570000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","getSuppliers"],"fullName":"Supplier Actions (L5) getSuppliers 应当返回分页的供应商列表","status":"passed","title":"应当返回分页的供应商列表","duration":5.6783000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","getSupplierById"],"fullName":"Supplier Actions (L5) getSupplierById 应当返回指定的供应商","status":"passed","title":"应当返回指定的供应商","duration":2.6975000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","getSupplierById"],"fullName":"Supplier Actions (L5) getSupplierById 找不到时应当抛出错误","status":"passed","title":"找不到时应当抛出错误","duration":2.980599999998958,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","updateSupplier"],"fullName":"Supplier Actions (L5) updateSupplier 应当成功更新并通知 Audit","status":"passed","title":"应当成功更新并通知 Audit","duration":11.89639999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","updateSupplier"],"fullName":"Supplier Actions (L5) updateSupplier 未找到该供应商时应当抛出错误","status":"passed","title":"未找到该供应商时应当抛出错误","duration":3.3467000000000553,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","deleteSupplier"],"fullName":"Supplier Actions (L5) deleteSupplier 应当成功删除没有采购关联的供应商","status":"passed","title":"应当成功删除没有采购关联的供应商","duration":2.8677999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","deleteSupplier"],"fullName":"Supplier Actions (L5) deleteSupplier 当有采购数据时应当阻止删除","status":"passed","title":"当有采购数据时应当阻止删除","duration":4.300699999999779,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","getSupplierRating"],"fullName":"Supplier Actions (L5) getSupplierRating 应当返回供应商多维度评分（含交期和质量指标）","status":"passed","title":"应当返回供应商多维度评分（含交期和质量指标）","duration":4.679200000000492,"failureMessages":[],"meta":{}},{"ancestorTitles":["Supplier Actions (L5)","getSupplierRankings"],"fullName":"Supplier Actions (L5) getSupplierRankings 应当按交付采购单数进行排名","status":"passed","title":"应当按交付采购单数进行排名","duration":2.2937000000001717,"failureMessages":[],"meta":{}}],"startTime":1772266798986,"endTime":1772266804172.2937,"status":"failed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/actions/__tests__/supplier-actions.test.ts"},{"assertionResults":[{"ancestorTitles":["SupplierForm"],"fullName":"SupplierForm should render form fields","status":"passed","title":"should render form fields","duration":635.9011000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["SupplierForm"],"fullName":"SupplierForm should show validation error on submit empty form","status":"passed","title":"should show validation error on submit empty form","duration":977.7033999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["SupplierForm"],"fullName":"SupplierForm should submit with valid data","status":"passed","title":"should submit with valid data","duration":2257.059500000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["SupplierForm"],"fullName":"SupplierForm should populate initial data","status":"passed","title":"should populate initial data","duration":307.35119999999733,"failureMessages":[],"meta":{}}],"startTime":1772266805892,"endTime":1772266810070.3513,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/components/__tests__/supplier-form.test.tsx"},{"assertionResults":[{"ancestorTitles":["PurchaseOrderPreviewDialog"],"fullName":"PurchaseOrderPreviewDialog renders nothing when open is false or data is null","status":"passed","title":"renders nothing when open is false or data is null","duration":36.67130000000179,"failureMessages":[],"meta":{}},{"ancestorTitles":["PurchaseOrderPreviewDialog"],"fullName":"PurchaseOrderPreviewDialog renders PO details correctly when open","status":"passed","title":"renders PO details correctly when open","duration":630.7552000000032,"failureMessages":[],"meta":{}}],"startTime":1772266822431,"endTime":1772266823098.7551,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/components/purchase-order-preview-dialog.test.tsx"},{"assertionResults":[{"ancestorTitles":["SplitRuleManager"],"fullName":"SplitRuleManager renders the rule list correctly","status":"passed","title":"renders the rule list correctly","duration":231.3636000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRuleManager"],"fullName":"SplitRuleManager opens add dialog when \"新建规则\" is clicked","status":"passed","title":"opens add dialog when \"新建规则\" is clicked","duration":922.2510000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRuleManager"],"fullName":"SplitRuleManager calls deleteSplitRule when delete button is clicked","status":"passed","title":"calls deleteSplitRule when delete button is clicked","duration":171.068299999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["SplitRuleManager"],"fullName":"SplitRuleManager renders empty state when no rules","status":"passed","title":"renders empty state when no rules","duration":66.2448000000004,"failureMessages":[],"meta":{}}],"startTime":1772266813693,"endTime":1772266815084.2449,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/supply-chain/__tests__/components/split-rule-manager.test.tsx"},{"assertionResults":[{"ancestorTitles":["移动端登录 API"],"fullName":"移动端登录 API 缺少 phone/password 应返回 400","status":"passed","title":"缺少 phone/password 应返回 400","duration":16.950200000001132,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端登录 API"],"fullName":"移动端登录 API 错误密码应返回 401 模糊错误","status":"passed","title":"错误密码应返回 401 模糊错误","duration":3.64390000000094,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端登录 API"],"fullName":"移动端登录 API 禁用账号应无法登录","status":"passed","title":"禁用账号应无法登录","duration":2.684899999998379,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端登录 API"],"fullName":"移动端登录 API MFA 开启时应返回 preAuthToken","status":"passed","title":"MFA 开启时应返回 preAuthToken","duration":5.80869999999959,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端登录 API"],"fullName":"移动端登录 API 正确凭证应返回 Token 对","status":"passed","title":"正确凭证应返回 Token 对","duration":4.410399999998845,"failureMessages":[],"meta":{}}],"startTime":1772266839061,"endTime":1772266839095.4104,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/auth/__tests__/login.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端 MFA 验证 API"],"fullName":"移动端 MFA 验证 API 如果缺失 preAuthToken 或 code 应当返回 400","status":"passed","title":"如果缺失 preAuthToken 或 code 应当返回 400","duration":18.14350000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 MFA 验证 API"],"fullName":"移动端 MFA 验证 API 如果 preAuthToken 错误或已过期应当返回 401","status":"passed","title":"如果 preAuthToken 错误或已过期应当返回 401","duration":3.6167999999997846,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 MFA 验证 API"],"fullName":"移动端 MFA 验证 API 如果 token type 不是 pre-auth 应当返回 401","status":"passed","title":"如果 token type 不是 pre-auth 应当返回 401","duration":2.02140000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 MFA 验证 API"],"fullName":"移动端 MFA 验证 API 如果验证码错误或过期应当返回 400","status":"passed","title":"如果验证码错误或过期应当返回 400","duration":6.614599999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 MFA 验证 API"],"fullName":"移动端 MFA 验证 API 如果所有信息正确应当生成最终的 Access/Refresh Token 并返回","status":"passed","title":"如果所有信息正确应当生成最终的 Access/Refresh Token 并返回","duration":2.7831999999998516,"failureMessages":[],"meta":{}}],"startTime":1772266835816,"endTime":1772266835848.7832,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/auth/__tests__/mfa.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果缺失 refreshToken 应当返回 400","status":"passed","title":"如果缺失 refreshToken 应当返回 400","duration":22.579599999999118,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果 token 无效应当返回 401","status":"passed","title":"如果 token 无效应当返回 401","duration":3.8263000000006286,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果 token 类型不是 refresh 应当返回 401","status":"passed","title":"如果 token 类型不是 refresh 应当返回 401","duration":3.287399999999252,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果用户已被禁用或失效应当返回 401 (内部人员)","status":"passed","title":"如果用户已被禁用或失效应当返回 401 (内部人员)","duration":3.7885999999998603,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果客户已失效应当返回 401 (CUSTOMER)","status":"passed","title":"如果客户已失效应当返回 401 (CUSTOMER)","duration":4.336299999999028,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端 Token 刷新 API"],"fullName":"移动端 Token 刷新 API 如果一切正常应当签发新的 Access 和 Refresh Token","status":"passed","title":"如果一切正常应当签发新的 Access 和 Refresh Token","duration":6.38760000000002,"failureMessages":[],"meta":{}}],"startTime":1772266838677,"endTime":1772266838721.3877,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/auth/__tests__/refresh.test.ts"},{"assertionResults":[{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果缺失 code 应当返回 400","status":"passed","title":"如果缺失 code 应当返回 400","duration":16.20589999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果微信环境变量未配置应当返回 500","status":"passed","title":"如果微信环境变量未配置应当返回 500","duration":2.6378999999997177,"failureMessages":[],"meta":{}},{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果微信接口返回 errcode 应当返回 400","status":"passed","title":"如果微信接口返回 errcode 应当返回 400","duration":10.42280000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果新用户登录（无手机号匹配）应当返回需要绑定状态并打标","status":"passed","title":"如果新用户登录（无手机号匹配）应当返回需要绑定状态并打标","duration":6.561099999998987,"failureMessages":[],"meta":{}},{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果是已绑定客户（openid 匹配）应当生成 token 并放行","status":"passed","title":"如果是已绑定客户（openid 匹配）应当生成 token 并放行","duration":5.224299999999857,"failureMessages":[],"meta":{}},{"ancestorTitles":["微信小程序登录 API"],"fullName":"微信小程序登录 API 如果 openid 未绑定但手机号匹配匹配，应当自动绑定并放行","status":"passed","title":"如果 openid 未绑定但手机号匹配匹配，应当自动绑定并放行","duration":3.7141000000010536,"failureMessages":[],"meta":{}}],"startTime":1772266833981,"endTime":1772266834026.714,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/auth/__tests__/wechat.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端线索 API (Leads API)"],"fullName":"移动端线索 API (Leads API) GET: 应正常返回分页线索","status":"passed","title":"GET: 应正常返回分页线索","duration":19.67119999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端线索 API (Leads API)"],"fullName":"移动端线索 API (Leads API) POST: 创建重复线索应返回 409","status":"passed","title":"POST: 创建重复线索应返回 409","duration":3.1437000000005355,"failureMessages":[],"meta":{}}],"startTime":1772266844147,"endTime":1772266844170.1438,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/leads/__tests__/leads.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端订单 API (Orders API)"],"fullName":"移动端订单 API (Orders API) 正常返回订单分页数据","status":"passed","title":"正常返回订单分页数据","duration":20.25750000000062,"failureMessages":[],"meta":{}}],"startTime":1772266854640,"endTime":1772266854660.2576,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/orders/__tests__/orders.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端报价 API (Quotes API)"],"fullName":"移动端报价 API (Quotes API) 应正常返回报价分页列表","status":"passed","title":"应正常返回报价分页列表","duration":22.270300000000134,"failureMessages":[],"meta":{}}],"startTime":1772266848076,"endTime":1772266848098.2703,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/quotes/__tests__/quotes.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端任务 API (Tasks API)"],"fullName":"移动端任务 API (Tasks API) 应正常查询并合并两类任务数据","status":"passed","title":"应正常查询并合并两类任务数据","duration":21.999300000000403,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端任务 API (Tasks API)"],"fullName":"移动端任务 API (Tasks API) 权限不足应被拦截并返回 403","status":"passed","title":"权限不足应被拦截并返回 403","duration":4.09060000000045,"failureMessages":[],"meta":{}}],"startTime":1772266850137,"endTime":1772266850163.0906,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/tasks/__tests__/tasks.test.ts"},{"assertionResults":[{"ancestorTitles":["安装清单验证测试","updateInstallChecklistAction"],"fullName":"安装清单验证测试 updateInstallChecklistAction 应该成功保存部分完成的清单","status":"passed","title":"应该成功保存部分完成的清单","duration":9.806799999999384,"failureMessages":[],"meta":{}},{"ancestorTitles":["安装清单验证测试","updateInstallChecklistAction"],"fullName":"安装清单验证测试 updateInstallChecklistAction 应该正确计算 allCompleted 状态 - 未完成","status":"passed","title":"应该正确计算 allCompleted 状态 - 未完成","duration":1.1170000000001892,"failureMessages":[],"meta":{}},{"ancestorTitles":["安装清单验证测试","updateInstallChecklistAction"],"fullName":"安装清单验证测试 updateInstallChecklistAction 应该正确计算 allCompleted 状态 - 已完成","status":"passed","title":"应该正确计算 allCompleted 状态 - 已完成","duration":0.9600000000000364,"failureMessages":[],"meta":{}},{"ancestorTitles":["安装清单验证测试","checkOutInstallTaskAction - Checklist 验证"],"fullName":"安装清单验证测试 checkOutInstallTaskAction - Checklist 验证 应该阻止签退 - 当清单未完成时","status":"passed","title":"应该阻止签退 - 当清单未完成时","duration":3.3523999999997613,"failureMessages":[],"meta":{}},{"ancestorTitles":["安装清单验证测试","checkOutInstallTaskAction - Checklist 验证"],"fullName":"安装清单验证测试 checkOutInstallTaskAction - Checklist 验证 应该允许签退 - 当清单已完成时","status":"passed","title":"应该允许签退 - 当清单已完成时","duration":1.222899999999754,"failureMessages":[],"meta":{}},{"ancestorTitles":["安装清单验证测试","checkOutInstallTaskAction - Checklist 验证"],"fullName":"安装清单验证测试 checkOutInstallTaskAction - Checklist 验证 应该阻止签退 - 当清单不存在时","status":"passed","title":"应该阻止签退 - 当清单不存在时","duration":0.8470999999999549,"failureMessages":[],"meta":{}}],"startTime":1772266859512,"endTime":1772266859530.8472,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/integration/checklist.test.ts"},{"assertionResults":[{"ancestorTitles":["Installation Logic Unit Tests","Conflict Detection"],"fullName":"Installation Logic Unit Tests Conflict Detection should detect HARD conflict","status":"passed","title":"should detect HARD conflict","duration":5.530800000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Logic Unit Tests","Conflict Detection"],"fullName":"Installation Logic Unit Tests Conflict Detection should pass if no conflict","status":"passed","title":"should pass if no conflict","duration":0.8468999999995503,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Logic Unit Tests","Logistics Check"],"fullName":"Installation Logic Unit Tests Logistics Check should fail if PO is not ready","status":"passed","title":"should fail if PO is not ready","duration":1.4853000000002794,"failureMessages":[],"meta":{}},{"ancestorTitles":["Installation Logic Unit Tests","Logistics Check"],"fullName":"Installation Logic Unit Tests Logistics Check should pass if all POs are ready","status":"passed","title":"should pass if all POs are ready","duration":1.1158000000004904,"failureMessages":[],"meta":{}}],"startTime":1772266868919,"endTime":1772266868928.1157,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/installation/__tests__/integration/conflict.test.ts"},{"assertionResults":[{"ancestorTitles":["checkInMeasureTask"],"fullName":"checkInMeasureTask 签到成功 - 正常流程","status":"passed","title":"签到成功 - 正常流程","duration":10.366199999998571,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkInMeasureTask"],"fullName":"checkInMeasureTask 签到失败 - 任务不存在","status":"passed","title":"签到失败 - 任务不存在","duration":1.6200000000008004,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkInMeasureTask"],"fullName":"checkInMeasureTask 签到失败 - 非指派测量师","status":"passed","title":"签到失败 - 非指派测量师","duration":1.039200000001074,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkInMeasureTask"],"fullName":"checkInMeasureTask 签到失败 - 任务已结束","status":"passed","title":"签到失败 - 任务已结束","duration":2.4481999999989057,"failureMessages":[],"meta":{}}],"startTime":1772266862943,"endTime":1772266862958.4482,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/check-in.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Action: createMeasureTask"],"fullName":"Measurement Action: createMeasureTask should create task successfully without fee","status":"passed","title":"should create task successfully without fee","duration":541.3810999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: createMeasureTask"],"fullName":"Measurement Action: createMeasureTask should create task successfully with fee waiver (VIP)","status":"passed","title":"should create task successfully with fee waiver (VIP)","duration":2.563399999999092,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: createMeasureTask"],"fullName":"Measurement Action: createMeasureTask should fail if customer not found","status":"passed","title":"should fail if customer not found","duration":9.705599999997503,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: createMeasureTask"],"fullName":"Measurement Action: createMeasureTask should fail if unauthorized","status":"passed","title":"should fail if unauthorized","duration":1.1054000000003725,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: createMeasureTask"],"fullName":"Measurement Action: createMeasureTask should fail if lead ID mismatch","status":"passed","title":"should fail if lead ID mismatch","duration":2.2207000000016706,"failureMessages":[],"meta":{}}],"startTime":1772266821758,"endTime":1772266822315.2207,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/create-task.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should dispatch a task successfully","status":"passed","title":"should dispatch a task successfully","duration":16.057600000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should fail if unauthorized (no session)","status":"passed","title":"should fail if unauthorized (no session)","duration":3.5666000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should fail if missing permission","status":"passed","title":"should fail if missing permission","duration":1.7795999999998457,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should fail with invalid input (wrong UUID)","status":"passed","title":"should fail with invalid input (wrong UUID)","duration":6.292099999999664,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should fail with invalid date","status":"passed","title":"should fail with invalid date","duration":3.7094999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: dispatchMeasureTask"],"fullName":"Measurement Action: dispatchMeasureTask should propagate errors from MeasurementService","status":"passed","title":"should propagate errors from MeasurementService","duration":2.8420999999998457,"failureMessages":[],"meta":{}}],"startTime":1772266835460,"endTime":1772266835494.842,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/dispatch.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Lifecycle","submitMeasureData"],"fullName":"Measurement Lifecycle submitMeasureData should fail if unauthenticated","status":"passed","title":"should fail if unauthenticated","duration":5.180000000000291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","submitMeasureData"],"fullName":"Measurement Lifecycle submitMeasureData should fail if user is not the assigned worker","status":"passed","title":"should fail if user is not the assigned worker","duration":8.072400000000926,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","submitMeasureData"],"fullName":"Measurement Lifecycle submitMeasureData should fail if task status is not allowed","status":"passed","title":"should fail if task status is not allowed","duration":1.980199999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","submitMeasureData"],"fullName":"Measurement Lifecycle submitMeasureData should successfully submit measure data","status":"passed","title":"should successfully submit measure data","duration":3.965699999998833,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","reviewMeasureTask"],"fullName":"Measurement Lifecycle reviewMeasureTask should fail if user does not have required role","status":"passed","title":"should fail if user does not have required role","duration":5.546200000000681,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","reviewMeasureTask"],"fullName":"Measurement Lifecycle reviewMeasureTask should successfully approve task","status":"passed","title":"should successfully approve task","duration":2.0570000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","reviewMeasureTask"],"fullName":"Measurement Lifecycle reviewMeasureTask should successfully reject task","status":"passed","title":"should successfully reject task","duration":2.2414000000007945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","createNewMeasureVersion"],"fullName":"Measurement Lifecycle createNewMeasureVersion should successfully create a new round","status":"passed","title":"should successfully create a new round","duration":1.5023000000001048,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Lifecycle","createNewMeasureVersion"],"fullName":"Measurement Lifecycle createNewMeasureVersion should successfully create a new variant","status":"passed","title":"should successfully create a new variant","duration":1.2994999999991705,"failureMessages":[],"meta":{}}],"startTime":1772266845050,"endTime":1772266845083.2996,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/measurement-lifecycle.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Queries","getMeasureTasks"],"fullName":"Measurement Queries getMeasureTasks should return tasks with pagination","status":"passed","title":"should return tasks with pagination","duration":12.448900000000322,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Queries","getMeasureTasks"],"fullName":"Measurement Queries getMeasureTasks should handle errors gracefully","status":"passed","title":"should handle errors gracefully","duration":11.690500000000611,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Queries","getMeasureTaskById"],"fullName":"Measurement Queries getMeasureTaskById should return task details when found","status":"passed","title":"should return task details when found","duration":1.3995999999997366,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Queries","getMeasureTaskById"],"fullName":"Measurement Queries getMeasureTaskById should return error when task not found","status":"passed","title":"should return error when task not found","duration":1.3865999999998166,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Queries","getAvailableWorkers"],"fullName":"Measurement Queries getAvailableWorkers should return filtered workers","status":"passed","title":"should return filtered workers","duration":1.1257000000005064,"failureMessages":[],"meta":{}}],"startTime":1772266848367,"endTime":1772266848396.1257,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/queries.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Action: rejectMeasureTask"],"fullName":"Measurement Action: rejectMeasureTask should reject a task successfully and reset status to PENDING_VISIT","status":"passed","title":"should reject a task successfully and reset status to PENDING_VISIT","duration":13.630400000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: rejectMeasureTask"],"fullName":"Measurement Action: rejectMeasureTask should fail if task does not exist or tenant mismatch","status":"passed","title":"should fail if task does not exist or tenant mismatch","duration":1.6327000000001135,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: rejectMeasureTask"],"fullName":"Measurement Action: rejectMeasureTask should fail if task is CANCELLED","status":"passed","title":"should fail if task is CANCELLED","duration":1.02599999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: rejectMeasureTask"],"fullName":"Measurement Action: rejectMeasureTask should trigger warning when reject count reaches threshold (3)","status":"passed","title":"should trigger warning when reject count reaches threshold (3)","duration":2.3461999999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Action: rejectMeasureTask"],"fullName":"Measurement Action: rejectMeasureTask should fail if user is not authorized","status":"passed","title":"should fail if user is not authorized","duration":0.9422999999997046,"failureMessages":[],"meta":{}}],"startTime":1772266852218,"endTime":1772266852237.9424,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/reject.test.ts"},{"assertionResults":[{"ancestorTitles":["测量模块 Action: splitMeasureTask"],"fullName":"测量模块 Action: splitMeasureTask 应成功拆分任务","status":"passed","title":"应成功拆分任务","duration":12.128499999998894,"failureMessages":[],"meta":{}},{"ancestorTitles":["测量模块 Action: splitMeasureTask"],"fullName":"测量模块 Action: splitMeasureTask 已完成任务不可拆分","status":"passed","title":"已完成任务不可拆分","duration":10.136199999999008,"failureMessages":[],"meta":{}},{"ancestorTitles":["测量模块 Action: splitMeasureTask"],"fullName":"测量模块 Action: splitMeasureTask 拆分数量少于2应校验失败","status":"passed","title":"拆分数量少于2应校验失败","duration":1.798399999999674,"failureMessages":[],"meta":{}}],"startTime":1772266844230,"endTime":1772266844253.7983,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/split.test.ts"},{"assertionResults":[{"ancestorTitles":["Measurement Workflows","submitMeasureData"],"fullName":"Measurement Workflows submitMeasureData should submit measure data successfully","status":"passed","title":"should submit measure data successfully","duration":12.083699999999226,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Workflows","submitMeasureData"],"fullName":"Measurement Workflows submitMeasureData should fail if user is not the assigned worker","status":"passed","title":"should fail if user is not the assigned worker","duration":1.8720000000002983,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Workflows","submitMeasureData"],"fullName":"Measurement Workflows submitMeasureData should fail if status is not allowed","status":"passed","title":"should fail if status is not allowed","duration":1.8028999999996813,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Workflows","reviewMeasureTask"],"fullName":"Measurement Workflows reviewMeasureTask should approve a task successfully","status":"passed","title":"should approve a task successfully","duration":2.9354000000002998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Workflows","reviewMeasureTask"],"fullName":"Measurement Workflows reviewMeasureTask should reject a task successfully","status":"passed","title":"should reject a task successfully","duration":1.269999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["Measurement Workflows","reviewMeasureTask"],"fullName":"Measurement Workflows reviewMeasureTask should fail if user has no permission (role mismatch)","status":"passed","title":"should fail if user has no permission (role mismatch)","duration":3.3029999999998836,"failureMessages":[],"meta":{}}],"startTime":1772266844652,"endTime":1772266844676.303,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/features/service/measurement/actions/__tests__/workflows.test.ts"},{"assertionResults":[{"ancestorTitles":["移动端仪表盘 API (Dashboard API)"],"fullName":"移动端仪表盘 API (Dashboard API) 应从缓存读取数据（如果存在）","status":"passed","title":"应从缓存读取数据（如果存在）","duration":16.76549999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["移动端仪表盘 API (Dashboard API)"],"fullName":"移动端仪表盘 API (Dashboard API) 应正确计算数据指标","status":"passed","title":"应正确计算数据指标","duration":4.482700000000477,"failureMessages":[],"meta":{}}],"startTime":1772266851408,"endTime":1772266851429.4827,"status":"passed","message":"","name":"C:/Users/bigey/Documents/Antigravity/L2C/src/app/api/mobile/dashboard/summary/__tests__/dashboard.test.ts"}]}